# Система логирования

Модуль `logging` предоставляет централизованную конфигурацию логирования для всего приложения.

## Обзор

Модуль включает:

- Настройку формата логов
- Управление уровнем логирования
- Интеграцию с Uvicorn
- Поддержку вывода в консоль

## Основные компоненты

### configure_logging

Функция для настройки корневого логгера и логгеров Uvicorn.

::: src.infrastructure.logging.logger.configure_logging
    :docstring:
    :members:

## Формат логов

По умолчанию используется следующий формат:
```
[2023-11-10 14:15:23] INFO module.name: Сообщение лога
```

Где:

- `2023-11-10 14:15:23` - временная метка
- `INFO` - уровень логирования
- `module.name` - имя модуля, сгенерированное логгером
- `Сообщение лога` - текст сообщения

## Уровни логирования

Поддерживаются стандартные уровни логирования Python:

- `DEBUG` - отладочная информация
- `INFO` - информационные сообщения
- `WARNING` - предупреждения
- `ERROR` - ошибки выполнения
- `CRITICAL` - критические ошибки

## Пример использования

```python
from src.infrastructure.logging.logger import configure_logging

# Настройка логирования с уровнем DEBUG
configure_logging(level='DEBUG')

# Использование в коде
import logging
logger = logging.getLogger(__name__)

def some_function():
    logger.debug('Отладочное сообщение')
    logger.info('Информационное сообщение')
    logger.warning('Предупреждение')
    logger.error('Ошибка')
    logger.critical('Критическая ошибка')
```

## Интеграция с Uvicorn

Модуль автоматически настраивает логирование для Uvicorn, что позволяет:

- Унифицировать формат логов
- Управлять уровнем логирования для всего приложения
- Избежать дублирования логов

## Рекомендации

1. **Выбор уровня логирования**
   - `DEBUG` - для разработки
   - `INFO` - для продакшн-окружения
   - `WARNING` и выше - для мониторинга ошибок

2. **Именование логгеров**
   Используйте `__name__` для автоматического определения имени модуля:
   ```python
   logger = logging.getLogger(__name__)
   ```

3. **Структурированные логи**
   Для сложных сценариев можно расширить формат логов, добавив дополнительную информацию:
   ```python
   logger.info('Обработка запроса', extra={
       'user_id': user_id,
       'request_id': request_id
   })
   ```

## Расширение функциональности

Для добавления дополнительных обработчиков (файлы, внешние сервисы) можно модифицировать функцию `configure_logging`:

```python
def configure_logging(level='INFO'):
    # Существующая конфигурация...
    
    # Добавление файлового обработчика
    file_handler = logging.FileHandler('app.log')
    file_handler.setFormatter(formatter)
    root_logger.addHandler(file_handler)
```

## Связанные компоненты

- [Настройки приложения](../../../config/loader.md)
- [Обработка ошибок](../../exceptions.md)
- [Мониторинг](../../monitoring/README.md)
