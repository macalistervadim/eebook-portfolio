{"config":{"lang":["ru"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\u0412\u0435\u0431-\u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u00ab\u0418\u043d\u0432\u0435\u0441\u0442\u0438\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u041f\u043e\u043c\u043e\u0433\u0430\u0442\u043e\u0440\u00bb (eebook)\ud83d\udcb9 \u0418\u043d\u0432\u0435\u0441\u0442\u0438\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u041f\u043e\u043c\u043e\u0433\u0430\u0442\u043e\u0440","text":"<p>\u0412\u0430\u0448 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442 \u0434\u043b\u044f \u0443\u0447\u0451\u0442\u0430 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u0435\u0439, \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u0434\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u0438 \u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0432\u044b\u043f\u043b\u0430\u0442.</p> \u041d\u0430\u0447\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u041f\u043e\u0440\u0442\u0444\u0435\u043b\u0438 \u0438 \u0430\u043a\u0442\u0438\u0432\u044b<p>\u0421\u043e\u0437\u0434\u0430\u0432\u0430\u0439\u0442\u0435 \u0438 \u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u0438 \u0441 \u0430\u043a\u0446\u0438\u044f\u043c\u0438, \u043e\u0431\u043b\u0438\u0433\u0430\u0446\u0438\u044f\u043c\u0438, \u0432\u0430\u043b\u044e\u0442\u043e\u0439 \u0438 \u043a\u0440\u0438\u043f\u0442\u043e\u0432\u0430\u043b\u044e\u0442\u043e\u0439.</p> \u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430 \u0438 \u043c\u0435\u0442\u0440\u0438\u043a\u0438<p>\u0421\u043b\u0435\u0434\u0438\u0442\u0435 \u0437\u0430 \u0434\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c\u044e, \u0432\u043e\u043b\u0430\u0442\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0441\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u0439\u0442\u0435 \u0441 \u0438\u043d\u0434\u0435\u043a\u0441\u0430\u043c\u0438.</p> \u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c \u0432\u044b\u043f\u043b\u0430\u0442<p>\u0414\u0438\u0432\u0438\u0434\u0435\u043d\u0434\u044b, \u043a\u0443\u043f\u043e\u043d\u044b, \u043f\u043e\u0433\u0430\u0448\u0435\u043d\u0438\u044f \u2014 \u0432\u0441\u0451 \u0432 \u043e\u0434\u043d\u043e\u043c \u043c\u0435\u0441\u0442\u0435.</p> \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c<p>\u0428\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445, \u0437\u0430\u0449\u0438\u0442\u0430 \u043e\u0442 XSS, CSRF \u0438 SQL-\u0438\u043d\u044a\u0435\u043a\u0446\u0438\u0439.</p> \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435<p>\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438 \u0438 \u0442\u0438\u043a\u0435\u0442\u0430\u043c\u0438, \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u044f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430.</p> \u0418\u043d\u0444\u0440\u0430\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430<p>Docker, CI/CD, \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435, \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433 \u0438 \u043c\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435.</p> Pet-\u043f\u0440\u043e\u0435\u043a\u0442 (1\u20132 \u043c\u0435\u0441\u044f\u0446\u0430)<p>MVP \u0434\u043b\u044f \u043e\u0434\u043d\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f, \u0431\u0430\u0437\u043e\u0432\u0430\u044f \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430, CRUD \u043f\u043e \u0430\u043a\u0442\u0438\u0432\u0430\u043c \u0438 \u0441\u0434\u0435\u043b\u043a\u0430\u043c.</p> \u041f\u0440\u043e\u0434\u0443\u043a\u0442 \u0434\u043b\u044f \u043f\u043e\u0440\u0442\u0444\u043e\u043b\u0438\u043e (2\u20133 \u043c\u0435\u0441\u044f\u0446\u0430)<p>\u041c\u043d\u043e\u0433\u043e\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0440\u0435\u0436\u0438\u043c, \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f, \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f, UX-\u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441.</p> SaaS-\u043f\u0438\u043b\u043e\u0442 (3\u20136 \u043c\u0435\u0441\u044f\u0446\u0435\u0432)<p>\u041c\u043e\u043d\u0435\u0442\u0438\u0437\u0430\u0446\u0438\u044f, \u0438\u043c\u043f\u043e\u0440\u0442/\u044d\u043a\u0441\u043f\u043e\u0440\u0442 \u0441\u0434\u0435\u043b\u043e\u043a, \u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c \u0432\u044b\u043f\u043b\u0430\u0442, CI/CD, \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433.</p> \u041c\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (6\u201312 \u043c\u0435\u0441\u044f\u0446\u0435\u0432)<p>\u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u0438 \u0441 API \u0431\u0440\u043e\u043a\u0435\u0440\u043e\u0432, \u0441\u043e\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438, \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f (PWA/React Native).</p>  Python / FastAPI  React / Tailwind  PostgreSQL / Alembic  Docker / CI/CD  Render / AWS / Fly.io <p>\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a: \u0421\u0442\u0430\u0440\u0446\u0435\u0432 \u0412\u0430\u0434\u0438\u043c \u0421\u0435\u0440\u0433\u0435\u0435\u0432\u0438\u0447 \u2014 GitHub</p>"},{"location":"CHANGELOG/","title":"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439","text":""},{"location":"CHANGELOG/#changelog","title":"Changelog","text":"<p>All notable changes to this project will be documented in this file. Dates are displayed in UTC.</p> <p>Generated by <code>auto-changelog</code>.</p>"},{"location":"LICENCE/","title":"\u041b\u0438\u0446\u0435\u043d\u0437\u0438\u044f","text":"<p>MIT License</p> <p>Copyright (c) 2025</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p> <p> <sub>Built with \u2764\ufe0f by Startsev Vadim</sub> </p>"},{"location":"api/python/bootstrap/","title":"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f","text":""},{"location":"api/python/bootstrap/#_2","title":"\u041e\u0431\u0437\u043e\u0440","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c <code>bootstrap</code> \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442 \u0437\u0430 \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u0443\u044e \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u0438 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u042d\u0442\u043e \u043f\u0435\u0440\u0432\u0430\u044f \u0442\u043e\u0447\u043a\u0430 \u0432\u0445\u043e\u0434\u0430, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043f\u043e\u0434\u0433\u043e\u0442\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u0432\u0441\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b \u043f\u0435\u0440\u0435\u0434 \u0437\u0430\u043f\u0443\u0441\u043a\u043e\u043c \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0433\u043e \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u0430.</p>"},{"location":"api/python/bootstrap/#_3","title":"\u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b","text":""},{"location":"api/python/bootstrap/#bootstrap","title":"\u0424\u0443\u043d\u043a\u0446\u0438\u044f <code>bootstrap()</code>","text":"<p>\u0426\u0435\u043d\u0442\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u0432\u0441\u0435 \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b \u0432 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435.</p> Source code in <code>src/bootstrap.py</code> <pre><code>async def bootstrap() -&gt; Settings:\n    try:\n        configure_logging()\n        await SettingsLoader().load()\n        settings = Settings()  # type: ignore\n        _ = get_engine()\n        logger.info('Bootstrap \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043b \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b')\n        return settings\n\n    except Exception as e:\n        logger.exception('Bootstrap failed')\n        raise BootstrapInitializationError(f'Failed to bootstrap application: {str(e)}') from e\n</code></pre>"},{"location":"api/python/bootstrap/#_4","title":"\u041f\u0440\u043e\u0446\u0435\u0441\u0441 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438","text":"<ol> <li>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</li> <li>\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u0441\u0438\u0441\u0442\u0435\u043c\u0443 \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</li> <li> <p>\u041d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442 \u0444\u043e\u0440\u043c\u0430\u0442\u044b \u0432\u044b\u0432\u043e\u0434\u0430 \u0438 \u0443\u0440\u043e\u0432\u043d\u0438 \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</p> </li> <li> <p>\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a</p> </li> <li>\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u0438\u0437 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f</li> <li> <p>\u0412\u0430\u043b\u0438\u0434\u0438\u0440\u0443\u0435\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e Pydantic</p> </li> <li> <p>\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445</p> </li> <li>\u0421\u043e\u0437\u0434\u0430\u0451\u0442 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0441 \u0431\u0430\u0437\u043e\u0439 \u0434\u0430\u043d\u043d\u044b\u0445</li> <li> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u044c \u0411\u0414</p> </li> <li> <p>\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u0435 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438</p> </li> <li>\u041b\u043e\u0433\u0438\u0440\u0443\u0435\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u0435 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438</li> <li>\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043e\u0431\u044a\u0435\u043a\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438</li> </ol>"},{"location":"api/python/bootstrap/#_5","title":"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a","text":"<p>\u0412 \u0441\u043b\u0443\u0447\u0430\u0435 \u0432\u043e\u0437\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u044f \u043e\u0448\u0438\u0431\u043e\u043a \u043d\u0430 \u043b\u044e\u0431\u043e\u043c \u044d\u0442\u0430\u043f\u0435:</p> <ul> <li>\u0417\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442 \u043f\u043e\u043b\u043d\u044b\u0439 \u0441\u0442\u0435\u043a\u0442\u0440\u0435\u0439\u0441 \u0432 \u043b\u043e\u0433</li> <li>\u0413\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u0442 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 <code>BootstrapInitializationError</code></li> <li>\u0417\u0430\u0432\u0435\u0440\u0448\u0430\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0443 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0441 \u043d\u0435\u043d\u0443\u043b\u0435\u0432\u044b\u043c \u043a\u043e\u0434\u043e\u043c \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430</li> </ul> <p>               Bases: <code>Exception</code></p> <p>\u0412\u044b\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u0440\u0438 \u043d\u0435\u043f\u043e\u043b\u0430\u0434\u043a\u0430\u0445 \u0432 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u0440\u043e\u0435\u043a\u0442\u0430.</p> Source code in <code>src/exceptions.py</code> <pre><code>class BootstrapInitializationError(Exception):\n    \"\"\"\u0412\u044b\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u0440\u0438 \u043d\u0435\u043f\u043e\u043b\u0430\u0434\u043a\u0430\u0445 \u0432 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u0440\u043e\u0435\u043a\u0442\u0430.\"\"\"\n</code></pre>"},{"location":"api/python/bootstrap/#_6","title":"\u041f\u0440\u0438\u043c\u0435\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":"<pre><code>from src.bootstrap import bootstrap\n\nasync def main():\n    try:\n        settings = await bootstrap()\n        # \u0417\u0430\u043f\u0443\u0441\u043a \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0441 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u043c\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c\u0438\n        await run_app(settings)\n    except BootstrapInitializationError as e:\n        print(f\"\u041e\u0448\u0438\u0431\u043a\u0430 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438: {e}\")\n        return 1\n    return 0\n</code></pre>"},{"location":"api/python/adapters/factory/","title":"\u0424\u0430\u0431\u0440\u0438\u043a\u0430 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0435\u0432 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c <code>factory</code> \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0430\u0431\u0441\u0442\u0440\u0430\u043a\u0446\u0438\u0438 \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0435\u0432 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f, \u0441\u043b\u0435\u0434\u0443\u044f \u043f\u0440\u0438\u043d\u0446\u0438\u043f\u0430\u043c DDD \u0438 \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u0443 \"\u0410\u0431\u0441\u0442\u0440\u0430\u043a\u0442\u043d\u0430\u044f \u0444\u0430\u0431\u0440\u0438\u043a\u0430\".</p>"},{"location":"api/python/adapters/factory/#_2","title":"\u041e\u0431\u0437\u043e\u0440","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442:</p> <ul> <li>\u0410\u0431\u0441\u0442\u0440\u0430\u043a\u0442\u043d\u0443\u044e \u0444\u0430\u0431\u0440\u0438\u043a\u0443 <code>ABCPortfolioRepositoryFactory</code></li> <li>\u0415\u0451 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e <code>SQLAlchemyPortfolioRepositoryFactory</code></li> </ul>"},{"location":"api/python/adapters/factory/#abcportfoliorepositoryfactory","title":"ABCPortfolioRepositoryFactory","text":"<p>\u0411\u0430\u0437\u043e\u0432\u044b\u0439 \u0430\u0431\u0441\u0442\u0440\u0430\u043a\u0442\u043d\u044b\u0439 \u043a\u043b\u0430\u0441\u0441, \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0449\u0438\u0439 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0435\u0432 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f.</p> <p>               Bases: <code>ABC</code></p> <p>\u0410\u0431\u0441\u0442\u0440\u0430\u043a\u0442\u043d\u0430\u044f \u0444\u0430\u0431\u0440\u0438\u043a\u0430 \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f.</p> Source code in <code>src/adapters/factory.py</code> <pre><code>class ABCPortfolioRepositoryFactory(abc.ABC):\n    \"\"\"\u0410\u0431\u0441\u0442\u0440\u0430\u043a\u0442\u043d\u0430\u044f \u0444\u0430\u0431\u0440\u0438\u043a\u0430 \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f.\"\"\"\n\n    @abc.abstractmethod\n    def create(self, session: AsyncSession) -&gt; AbstractPortfolioRepository:\n        \"\"\"\u0421\u043e\u0437\u0434\u0430\u0451\u0442 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f.\"\"\"\n        raise NotImplementedError\n</code></pre>"},{"location":"api/python/adapters/factory/#src.adapters.factory.ABCPortfolioRepositoryFactory.create","title":"<code>create(session)</code>  <code>abstractmethod</code>","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0451\u0442 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f.</p> Source code in <code>src/adapters/factory.py</code> <pre><code>@abc.abstractmethod\ndef create(self, session: AsyncSession) -&gt; AbstractPortfolioRepository:\n    \"\"\"\u0421\u043e\u0437\u0434\u0430\u0451\u0442 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f.\"\"\"\n    raise NotImplementedError\n</code></pre>"},{"location":"api/python/adapters/factory/#sqlalchemyportfoliorepositoryfactory","title":"SQLAlchemyPortfolioRepositoryFactory","text":"<p>\u041a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u0430\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0444\u0430\u0431\u0440\u0438\u043a\u0438, \u0441\u043e\u0437\u0434\u0430\u044e\u0449\u0430\u044f \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u044b <code>SqlAlchemyPortfolioRepository</code>.</p> <p>               Bases: <code>ABCPortfolioRepositoryFactory</code></p> Source code in <code>src/adapters/factory.py</code> <pre><code>class SQLAlchemyPortfolioRepositoryFactory(ABCPortfolioRepositoryFactory):\n    def create(self, session: AsyncSession) -&gt; SqlAlchemyPortfolioRepository:\n        return SqlAlchemyPortfolioRepository(session)\n</code></pre>"},{"location":"api/python/adapters/factory/#_3","title":"\u041f\u0440\u0438\u043c\u0435\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":"<pre><code>from sqlalchemy.ext.asyncio import create_async_engine, AsyncSession\nfrom src.adapters.factory import SQLAlchemyPortfolioRepositoryFactory\n\n# \u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0441\u0435\u0441\u0441\u0438\u0438\nengine = create_async_engine(\"postgresql+asyncpg://user:password@localhost/db\")\nasync_session = sessionmaker(engine, class_=AsyncSession, expire_on_commit=False)\n\n# \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0444\u0430\u0431\u0440\u0438\u043a\u0438\nfactory = SQLAlchemyPortfolioRepositoryFactory()\n\n# \u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f\nasync with async_session() as session:\n    repository = factory.create(session)\n    # \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f...\n</code></pre>"},{"location":"api/python/adapters/factory/#_4","title":"\u0414\u0435\u0442\u0430\u043b\u0438 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438","text":"<ul> <li>\u0424\u0430\u0431\u0440\u0438\u043a\u0430 \u0438\u043d\u043a\u0430\u043f\u0441\u0443\u043b\u0438\u0440\u0443\u0435\u0442 \u043b\u043e\u0433\u0438\u043a\u0443 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0435\u0432</li> <li>\u041f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043b\u0435\u0433\u043a\u043e \u0437\u0430\u043c\u0435\u043d\u0438\u0442\u044c \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f</li> <li>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u0443\u044e \u0440\u0430\u0431\u043e\u0442\u0443 \u0441 \u0411\u0414 \u0447\u0435\u0440\u0435\u0437 SQLAlchemy</li> </ul>"},{"location":"api/python/adapters/factory/#_5","title":"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u044f","text":"<ul> <li>\u0414\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0435\u043c \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0430\u043a\u0442\u0438\u0432\u043d\u0430\u044f \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u0430\u044f \u0441\u0435\u0441\u0441\u0438\u044f SQLAlchemy</li> <li>\u0424\u0430\u0431\u0440\u0438\u043a\u0430 \u043d\u0435 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0436\u0438\u0437\u043d\u0435\u043d\u043d\u044b\u043c \u0446\u0438\u043a\u043b\u043e\u043c \u0441\u0435\u0441\u0441\u0438\u0438</li> <li>\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0444\u0430\u0431\u0440\u0438\u043a\u0443 \u0432 \u0440\u0430\u043c\u043a\u0430\u0445 \u0435\u0434\u0438\u043d\u0438\u0446\u044b \u0440\u0430\u0431\u043e\u0442\u044b (Unit of Work)</li> </ul>"},{"location":"api/python/adapters/factory/#_6","title":"\u0421\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b","text":"<ul> <li>\u0420\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0439 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f</li> <li>\u0418\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b \u0430\u0434\u0430\u043f\u0442\u0435\u0440\u043e\u0432</li> <li>ORM-\u043c\u043e\u0434\u0435\u043b\u0438</li> </ul>"},{"location":"api/python/adapters/interfaces/","title":"\u0418\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b \u0430\u0434\u0430\u043f\u0442\u0435\u0440\u043e\u0432","text":""},{"location":"api/python/adapters/interfaces/#_2","title":"\u041e\u0431\u0437\u043e\u0440","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c <code>interfaces</code> \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442\u044b (\u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b) \u0434\u043b\u044f \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0441 \u0432\u043d\u0435\u0448\u043d\u0438\u043c\u0438 \u0441\u0438\u0441\u0442\u0435\u043c\u0430\u043c\u0438. \u042d\u0442\u0438 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044e\u0442 \u0433\u0438\u0431\u043a\u043e\u0441\u0442\u044c \u0438 \u043b\u0451\u0433\u043a\u043e\u0441\u0442\u044c \u0437\u0430\u043c\u0435\u043d\u044b \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0439 \u0431\u0435\u0437 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043a\u043e\u0434\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0438\u0445 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442.</p>"},{"location":"api/python/adapters/interfaces/#_3","title":"\u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b","text":""},{"location":"api/python/adapters/interfaces/#isecretsprovider","title":"ISecretsProvider","text":"<p>\u0410\u0431\u0441\u0442\u0440\u0430\u043a\u0446\u0438\u044f \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430\u043c\u0438 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, HashiCorp Vault, AWS Secrets Manager).</p> <p>               Bases: <code>Protocol</code></p> <p>\u041a\u043e\u043d\u0442\u0440\u0430\u043a\u0442 \u0434\u043b\u044f \u043b\u044e\u0431\u043e\u0433\u043e \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432.</p> Source code in <code>src/adapters/interfaces.py</code> <pre><code>class ISecretsProvider(Protocol):\n    \"\"\"\u041a\u043e\u043d\u0442\u0440\u0430\u043a\u0442 \u0434\u043b\u044f \u043b\u044e\u0431\u043e\u0433\u043e \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432.\"\"\"\n\n    async def get_secret(self, path: str, key: str | None = None) -&gt; dict[str, Any]:\n        \"\"\"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0441\u0435\u043a\u0440\u0435\u0442\u0430 \u043f\u043e \u043f\u0443\u0442\u0438 \u0438 \u043a\u043b\u044e\u0447\u0443.\n\n        Args:\n            path: \u041f\u0443\u0442\u044c \u043a \u0441\u0435\u043a\u0440\u0435\u0442\u0443 \u0432 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435\n            key: \u041a\u043b\u044e\u0447 \u0441\u0435\u043a\u0440\u0435\u0442\u0430 (\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e)\n\n        Returns:\n            \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0441\u0435\u043a\u0440\u0435\u0442\u0430 \u0438\u043b\u0438 None, \u0435\u0441\u043b\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e\n\n        \"\"\"\n        ...\n</code></pre>"},{"location":"api/python/adapters/interfaces/#src.adapters.interfaces.ISecretsProvider.get_secret","title":"<code>get_secret(path: str, key: str | None = None) -&gt; dict[str, Any]</code>  <code>async</code>","text":"<p>\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0441\u0435\u043a\u0440\u0435\u0442\u0430 \u043f\u043e \u043f\u0443\u0442\u0438 \u0438 \u043a\u043b\u044e\u0447\u0443.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>str</code> <p>\u041f\u0443\u0442\u044c \u043a \u0441\u0435\u043a\u0440\u0435\u0442\u0443 \u0432 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435</p> required <code>key</code> <code>str | None</code> <p>\u041a\u043b\u044e\u0447 \u0441\u0435\u043a\u0440\u0435\u0442\u0430 (\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e)</p> <code>None</code> <p>Returns:</p> Type Description <code>dict[str, Any]</code> <p>\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0441\u0435\u043a\u0440\u0435\u0442\u0430 \u0438\u043b\u0438 None, \u0435\u0441\u043b\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e</p> Source code in <code>src/adapters/interfaces.py</code> <pre><code>async def get_secret(self, path: str, key: str | None = None) -&gt; dict[str, Any]:\n    \"\"\"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0441\u0435\u043a\u0440\u0435\u0442\u0430 \u043f\u043e \u043f\u0443\u0442\u0438 \u0438 \u043a\u043b\u044e\u0447\u0443.\n\n    Args:\n        path: \u041f\u0443\u0442\u044c \u043a \u0441\u0435\u043a\u0440\u0435\u0442\u0443 \u0432 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435\n        key: \u041a\u043b\u044e\u0447 \u0441\u0435\u043a\u0440\u0435\u0442\u0430 (\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e)\n\n    Returns:\n        \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0441\u0435\u043a\u0440\u0435\u0442\u0430 \u0438\u043b\u0438 None, \u0435\u0441\u043b\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e\n\n    \"\"\"\n    ...\n</code></pre>"},{"location":"api/python/adapters/interfaces/#_4","title":"\u041f\u0440\u0438\u043d\u0446\u0438\u043f\u044b \u0440\u0430\u0431\u043e\u0442\u044b","text":""},{"location":"api/python/adapters/interfaces/#_5","title":"\u0418\u043d\u0432\u0435\u0440\u0441\u0438\u044f \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439","text":"<p>\u0412\u0441\u0435 \u0430\u0434\u0430\u043f\u0442\u0435\u0440\u044b \u0437\u0430\u0432\u0438\u0441\u044f\u0442 \u043e\u0442 \u0430\u0431\u0441\u0442\u0440\u0430\u043a\u0446\u0438\u0439 (\u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432), \u0430 \u043d\u0435 \u043e\u0442 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0445 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0439. \u042d\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442:</p> <ul> <li>\u041b\u0435\u0433\u043a\u043e \u0437\u0430\u043c\u0435\u043d\u044f\u0442\u044c \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438</li> <li>\u0423\u043f\u0440\u043e\u0449\u0430\u0442\u044c \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435</li> <li>\u0421\u043d\u0438\u0436\u0430\u0442\u044c \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u043e\u0441\u0442\u044c \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432</li> </ul>"},{"location":"api/python/adapters/interfaces/#_6","title":"\u041b\u0435\u043d\u0438\u0432\u0430\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430","text":"<p>\u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0430\u0434\u0430\u043f\u0442\u0435\u0440\u043e\u0432 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u0438 \u043f\u0435\u0440\u0432\u043e\u043c \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0438, \u0447\u0442\u043e \u0443\u0441\u043a\u043e\u0440\u044f\u0435\u0442 \u0437\u0430\u043f\u0443\u0441\u043a \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f.</p>"},{"location":"api/python/adapters/interfaces/#_7","title":"\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":""},{"location":"api/python/adapters/interfaces/#_8","title":"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0441\u0435\u043a\u0440\u0435\u0442\u0430","text":"<pre><code>from src.adapters.interfaces import ISecretsProvider\n\nclass MyService:\n    def __init__(self, secrets_provider: ISecretsProvider):\n        self.secrets = secrets_provider\n\n    async def get_database_credentials(self):\n        return await self.secrets.get_secret(\"database/prod\", \"credentials\")\n</code></pre>"},{"location":"api/python/adapters/orm/","title":"ORM-\u043c\u043e\u0434\u0435\u043b\u0438 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c <code>orm</code> \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445 \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f\u043c\u0438, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f SQLAlchemy Core.</p>"},{"location":"api/python/adapters/orm/#_1","title":"\u041e\u0431\u0437\u043e\u0440 \u0441\u0445\u0435\u043c\u044b \u0434\u0430\u043d\u043d\u044b\u0445","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0442\u0430\u0431\u043b\u0438\u0446 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f:</p> <ul> <li>\u041f\u043e\u0440\u0442\u0444\u0435\u043b\u0435\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439</li> <li>\u0410\u043a\u0442\u0438\u0432\u043e\u0432 \u0432 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f\u0445</li> <li>\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439 \u043f\u043e \u0430\u043a\u0442\u0438\u0432\u0430\u043c</li> </ul>"},{"location":"api/python/adapters/orm/#_2","title":"\u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b","text":""},{"location":"api/python/adapters/orm/#portfolios","title":"\u041f\u043e\u0440\u0442\u0444\u0435\u043b\u0438 (<code>portfolios</code>)","text":"<p>\u0425\u0440\u0430\u043d\u0438\u0442 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439.</p>"},{"location":"api/python/adapters/orm/#holdings","title":"\u0410\u043a\u0442\u0438\u0432\u044b (<code>holdings</code>)","text":"<p>\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e\u0431 \u0430\u043a\u0442\u0438\u0432\u0430\u0445 \u0432 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f\u0445.</p>"},{"location":"api/python/adapters/orm/#transactions","title":"\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 (<code>transactions</code>)","text":"<p>\u0417\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442 \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0432\u0441\u0435\u0445 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439 \u0441 \u0430\u043a\u0442\u0438\u0432\u0430\u043c\u0438.</p>"},{"location":"api/python/adapters/orm/#_3","title":"\u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438","text":"<ul> <li>\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u044b - \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f UUID \u0434\u043b\u044f \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 \u0437\u0430\u043f\u0438\u0441\u0435\u0439</li> <li>\u0418\u043d\u0434\u0435\u043a\u0441\u0430\u0446\u0438\u044f - \u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043f\u043e \u0447\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u043c \u043f\u043e\u043b\u044f\u043c</li> <li>\u0426\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0445 - \u0412\u043d\u0435\u0448\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0438 \u0441 \u043a\u0430\u0441\u043a\u0430\u0434\u043d\u044b\u043c \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435\u043c</li> <li>\u0422\u043e\u0447\u043d\u043e\u0441\u0442\u044c \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0439 - \u0412\u044b\u0441\u043e\u043a\u0430\u044f \u0442\u043e\u0447\u043d\u043e\u0441\u0442\u044c \u0434\u043b\u044f \u0444\u0438\u043d\u0430\u043d\u0441\u043e\u0432\u044b\u0445 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439 (20 \u0446\u0438\u0444\u0440, 10 \u0437\u043d\u0430\u043a\u043e\u0432 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u044f\u0442\u043e\u0439)</li> </ul>"},{"location":"api/python/adapters/orm/#_4","title":"\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":""},{"location":"api/python/adapters/orm/#_5","title":"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0442\u0430\u0431\u043b\u0438\u0446","text":"<pre><code>from sqlalchemy import create_engine\nfrom src.adapters.orm import metadata\n\n# \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0434\u0432\u0438\u0436\u043a\u0430\nengine = create_engine(\"postgresql://user:password@localhost/dbname\")\n\n# \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0432\u0441\u0435\u0445 \u0442\u0430\u0431\u043b\u0438\u0446\nmetadata.create_all(engine)\n</code></pre>"},{"location":"api/python/adapters/orm/#_6","title":"\u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f\u043c\u0438","text":"<pre><code>from sqlalchemy import insert, select\nfrom sqlalchemy.ext.asyncio import create_async_engine, AsyncSession\nfrom src.adapters.orm import transaction_table\n\nasync def add_transaction(session: AsyncSession, transaction_data: dict):\n    stmt = insert(transaction_table).values(transaction_data)\n    await session.execute(stmt)\n    await session.commit()\n</code></pre>"},{"location":"api/python/adapters/orm/#_7","title":"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u044f \u043f\u043e \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438","text":"<ul> <li>\u0414\u043b\u044f \u0443\u0441\u043a\u043e\u0440\u0435\u043d\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u044b \u0438\u043d\u0434\u0435\u043a\u0441\u044b \u043d\u0430 \u0447\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u043f\u043e\u043b\u044f</li> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 <code>ondelete='CASCADE'</code> \u0434\u043b\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0445 \u0437\u0430\u043f\u0438\u0441\u0435\u0439</li> <li>\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u0443\u043b\u044b \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u0434\u043b\u044f \u043f\u0440\u043e\u0434\u0430\u043a\u0448\u043d-\u0441\u0440\u0435\u0434\u044b</li> </ul>"},{"location":"api/python/adapters/orm/#_8","title":"\u0421\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b","text":"<ul> <li>\u0424\u0430\u0431\u0440\u0438\u043a\u0430 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0435\u0432</li> <li>\u0420\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0439 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f</li> <li>\u0418\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b \u0430\u0434\u0430\u043f\u0442\u0435\u0440\u043e\u0432</li> </ul>"},{"location":"api/python/adapters/repository/","title":"\u0420\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0439 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c <code>repository</code> \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u0430 Repository \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f SQLAlchemy \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 ORM.</p>"},{"location":"api/python/adapters/repository/#_2","title":"\u041e\u0431\u0437\u043e\u0440","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442:</p> <ul> <li>\u0410\u0431\u0441\u0442\u0440\u0430\u043a\u0442\u043d\u044b\u0439 \u043a\u043b\u0430\u0441\u0441 <code>AbstractPortfolioRepository</code> \u0441 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435\u043c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430</li> <li>\u041a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u0443\u044e \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e <code>SqlAlchemyPortfolioRepository</code> \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 PostgreSQL</li> </ul>"},{"location":"api/python/adapters/repository/#abstractportfoliorepository","title":"AbstractPortfolioRepository","text":"<p>\u0411\u0430\u0437\u043e\u0432\u044b\u0439 \u0430\u0431\u0441\u0442\u0440\u0430\u043a\u0442\u043d\u044b\u0439 \u043a\u043b\u0430\u0441\u0441, \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0449\u0438\u0439 \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435\u043c \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u0435\u0439.</p> <p>               Bases: <code>ABC</code></p> Source code in <code>src/adapters/repository.py</code> <pre><code>class AbstractPortfolioRepository(abc.ABC):\n    @abc.abstractmethod\n    async def add(self, portfolio: Portfolio) -&gt; None:\n        raise NotImplementedError\n\n    @abc.abstractmethod\n    async def get_by_id(self, portfolio_id: UUID) -&gt; Portfolio | None:\n        raise NotImplementedError\n\n    @abc.abstractmethod\n    async def get_by_user_id(self, user_id: UUID) -&gt; list[Portfolio]:\n        raise NotImplementedError\n\n    @abc.abstractmethod\n    async def update(self, portfolio: Portfolio) -&gt; None:\n        raise NotImplementedError\n\n    @abc.abstractmethod\n    async def delete(self, portfolio_id: UUID) -&gt; None:\n        raise NotImplementedError\n\n    @abc.abstractmethod\n    async def add_transaction(self, transaction: Transaction) -&gt; None:\n        raise NotImplementedError\n</code></pre>"},{"location":"api/python/adapters/repository/#sqlalchemyportfoliorepository","title":"SqlAlchemyPortfolioRepository","text":"<p>\u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 PostgreSQL \u0447\u0435\u0440\u0435\u0437 SQLAlchemy.</p> <p>               Bases: <code>AbstractPortfolioRepository</code></p> Source code in <code>src/adapters/repository.py</code> <pre><code>class SqlAlchemyPortfolioRepository(AbstractPortfolioRepository):\n    def __init__(self, session):\n        self.session = session\n\n    async def add(self, portfolio: Portfolio) -&gt; None:\n        stmt = insert(portfolio_table).values(\n            id=portfolio.id,\n            user_id=portfolio.user_id,\n            name=portfolio.name,\n            currency=portfolio.currency,\n            created_at=portfolio.created_at,\n        )\n        await self.session.execute(stmt)\n\n        for h in portfolio.holdings:\n            stmt_h = insert(holding_table).values(\n                id=uuid.uuid4(),\n                portfolio_id=portfolio.id,\n                asset_id=h.asset_id,\n                quantity=h.quantity,\n                average_cost=h.average_cost,\n            )\n            await self.session.execute(stmt_h)\n\n    async def get_by_id(self, portfolio_id) -&gt; Portfolio | None:\n        row = await self.session.execute(\n            select(portfolio_table).where(portfolio_table.c.id == portfolio_id),\n        )\n        p_data = row.first()\n        if not p_data:\n            return None\n\n        row_h = await self.session.execute(\n            select(holding_table).where(holding_table.c.portfolio_id == portfolio_id),\n        )\n        holdings = [Holding(h.asset_id, h.quantity, h.average_cost) for h in row_h.fetchall()]\n\n        return Portfolio(\n            user_id=p_data.user_id,\n            name=p_data.name,\n            currency=p_data.currency,\n            holdings=holdings,\n            created_at=p_data.created_at,\n        )\n\n    async def get_by_user_id(self, user_id) -&gt; list[Portfolio]:\n        row = await self.session.execute(\n            select(portfolio_table).where(portfolio_table.c.user_id == user_id),\n        )\n        portfolios_data = row.fetchall()\n        portfolios = []\n\n        for p_data in portfolios_data:\n            row_h = await self.session.execute(\n                select(holding_table).where(holding_table.c.portfolio_id == p_data.id),\n            )\n            holdings = [Holding(h.asset_id, h.quantity, h.average_cost) for h in row_h.fetchall()]\n            portfolios.append(\n                Portfolio(\n                    user_id=p_data.user_id,\n                    name=p_data.name,\n                    currency=p_data.currency,\n                    holdings=holdings,\n                    created_at=p_data.created_at,\n                ),\n            )\n        return portfolios\n\n    async def update(self, portfolio: Portfolio) -&gt; None:\n        stmt = (\n            sa_update(portfolio_table)\n            .where(portfolio_table.c.id == portfolio.id)\n            .values(\n                name=portfolio.name,\n                currency=portfolio.currency,\n            )\n        )\n        await self.session.execute(stmt)\n\n        stmt_del = sa_delete(holding_table).where(holding_table.c.portfolio_id == portfolio.id)\n        await self.session.execute(stmt_del)\n\n        for h in portfolio.holdings:\n            stmt_h = insert(holding_table).values(\n                id=uuid.uuid4(),\n                portfolio_id=portfolio.id,\n                asset_id=h.asset_id,\n                quantity=h.quantity,\n                average_cost=h.average_cost,\n            )\n            await self.session.execute(stmt_h)\n\n    async def delete(self, portfolio_id) -&gt; None:\n        stmt_h = sa_delete(holding_table).where(holding_table.c.portfolio_id == portfolio_id)\n        await self.session.execute(stmt_h)\n\n        stmt = sa_delete(portfolio_table).where(portfolio_table.c.id == portfolio_id)\n        await self.session.execute(stmt)\n\n    async def add_transaction(self, transaction: Transaction) -&gt; None:\n        stmt = insert(transaction_table).values(\n            id=transaction.id,\n            portfolio_id=transaction.portfolio_id,\n            asset_id=transaction.asset_id,\n            transaction_type=transaction.transaction_type,  # type: ignore\n            quantity=transaction.quantity,\n            price_per_unit=transaction.price_per_unit,\n            total_amount=transaction.total_amount,\n            executed_at=transaction.executed_at,\n            currency=transaction.currency,\n        )\n        await self.session.execute(stmt)\n</code></pre>"},{"location":"api/python/adapters/repository/#_3","title":"\u0414\u0435\u0442\u0430\u043b\u0438 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438","text":""},{"location":"api/python/adapters/repository/#_4","title":"\u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f\u043c\u0438","text":"<ul> <li>\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f</li> <li>\u0421\u043e\u0437\u0434\u0430\u0451\u0442 \u0437\u0430\u043f\u0438\u0441\u044c \u043e \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u0435</li> <li> <p>\u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442 \u0432\u0441\u0435 \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0430\u043a\u0442\u0438\u0432\u044b</p> </li> <li> <p>\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f</p> </li> <li>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u043f\u043e\u0438\u0441\u043a \u043f\u043e ID \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f \u0438 ID \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f</li> <li> <p>\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0430\u0433\u0440\u0435\u0433\u0430\u0442 <code>Portfolio</code> \u0441 \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u043c\u0438 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u044f\u043c\u0438</p> </li> <li> <p>\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f</p> </li> <li>\u0410\u0442\u043e\u043c\u0430\u0440\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f</li> <li>\u0423\u0434\u0430\u043b\u044f\u0435\u0442 \u0438 \u0437\u0430\u043d\u043e\u0432\u043e \u0441\u043e\u0437\u0434\u0430\u0451\u0442 \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0430\u043a\u0442\u0438\u0432\u044b</li> </ul>"},{"location":"api/python/adapters/repository/#_5","title":"\u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f\u043c\u0438","text":"<ul> <li>\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438</li> <li>\u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442 \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439 \u0441 \u0430\u043a\u0442\u0438\u0432\u0430\u043c\u0438</li> <li>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435 \u0442\u0438\u043f\u044b \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439</li> </ul>"},{"location":"api/python/adapters/repository/#_6","title":"\u041f\u0440\u0438\u043c\u0435\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":"<pre><code>from uuid import UUID\nfrom sqlalchemy.ext.asyncio import create_async_engine, AsyncSession\nfrom src.adapters.factory import SQLAlchemyPortfolioRepositoryFactory\nfrom src.domain.domain import Portfolio, Holding\n\n# \u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f\nengine = create_async_engine(\"postgresql+asyncpg://user:password@localhost/db\")\nasync_session = sessionmaker(engine, class_=AsyncSession, expire_on_commit=False)\n\n# \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f\nasync with async_session() as session:\n    factory = SQLAlchemyPortfolioRepositoryFactory()\n    repo = factory.create(session)\n\n    # \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f\n    portfolio = Portfolio(\n        user_id=UUID(\"...\"),\n        name=\"\u041c\u043e\u0439 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044c\",\n        currency=\"USD\",\n        holdings=[\n            Holding(asset_id=\"AAPL\", quantity=10, average_cost=150.5)\n        ]\n    )\n    await repo.add(portfolio)\n\n    # \u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f\n    portfolio = await repo.get_by_id(portfolio.id)\n</code></pre>"},{"location":"api/python/adapters/repository/#_7","title":"\u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438","text":"<ul> <li>\u0410\u0442\u043e\u043c\u0430\u0440\u043d\u043e\u0441\u0442\u044c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439</li> <li>\u0412\u0441\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 \u0440\u0430\u043c\u043a\u0430\u0445 \u043e\u0434\u043d\u043e\u0439 \u0441\u0435\u0441\u0441\u0438\u0438</li> <li> <p>\u042f\u0432\u043d\u043e\u0435 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f\u043c\u0438</p> </li> <li> <p>\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c</p> </li> <li>\u041f\u0430\u043a\u0435\u0442\u043d\u0430\u044f \u0432\u0441\u0442\u0430\u0432\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445</li> <li> <p>\u042d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0441 JOIN</p> </li> <li> <p>\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c</p> </li> <li>\u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u0434\u043e\u043c\u0435\u043d\u043d\u043e\u0439 \u043c\u043e\u0434\u0435\u043b\u0438</li> <li>\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043a\u043e\u043d\u043a\u0443\u0440\u0435\u043d\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u0430</li> </ul>"},{"location":"api/python/adapters/repository/#_8","title":"\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f","text":"<ul> <li>\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0430\u043a\u0442\u0438\u0432\u043d\u0430\u044f \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u0430\u044f \u0441\u0435\u0441\u0441\u0438\u044f SQLAlchemy</li> <li>\u041d\u0435\u0442 \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u043e\u0439 \u043f\u0430\u0433\u0438\u043d\u0430\u0446\u0438\u0438 \u0434\u043b\u044f \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u0432\u044b\u0431\u043e\u0440\u043e\u043a</li> <li>\u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u043f\u043e\u0434 \u0440\u0435\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u043c\u043e\u0434\u0435\u043b\u044c \u0434\u0430\u043d\u043d\u044b\u0445</li> </ul>"},{"location":"api/python/adapters/repository/#_9","title":"\u0421\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b","text":"<ul> <li>\u0424\u0430\u0431\u0440\u0438\u043a\u0430 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0435\u0432</li> <li>ORM-\u043c\u043e\u0434\u0435\u043b\u0438</li> <li>\u0414\u043e\u043c\u0435\u043d\u043d\u044b\u0435 \u043c\u043e\u0434\u0435\u043b\u0438</li> </ul>"},{"location":"api/python/adapters/vault_client/","title":"Vault Client","text":""},{"location":"api/python/adapters/vault_client/#_1","title":"\u041e\u0431\u0437\u043e\u0440","text":""},{"location":"api/python/adapters/vault_client/#src.adapters.vault_client.VaultClient","title":"<code>src.adapters.vault_client.VaultClient</code>","text":"<p>\u041a\u043b\u0438\u0435\u043d\u0442 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 HashiCorp Vault - \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439 \u0434\u043b\u044f \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0433\u043e \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432.</p> <p>\u041f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0441\u0435\u043a\u0440\u0435\u0442\u044b \u0438\u0437 Vault \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0442\u043e\u043a\u0435\u043d\u0430 \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438.</p> \u041f\u0440\u0438\u043c\u0435\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435 <ul> <li>\u0414\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0439 \u0438 \u0437\u0430\u043f\u0443\u0449\u0435\u043d\u043d\u044b\u0439 \u0441\u0435\u0440\u0432\u0435\u0440 Vault</li> <li>\u0422\u043e\u043a\u0435\u043d \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0438\u043c\u0435\u0442\u044c \u043f\u0440\u0430\u0432\u0430 \u043d\u0430 \u0447\u0442\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c\u044b\u0445 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432</li> <li>\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f KV Secrets Engine \u0432\u0435\u0440\u0441\u0438\u0438 2</li> </ul> Source code in <code>src/adapters/vault_client.py</code> <pre><code>class VaultClient:\n    \"\"\"\u041a\u043b\u0438\u0435\u043d\u0442 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 HashiCorp Vault - \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439 \u0434\u043b\u044f \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0433\u043e \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432.\n\n    \u041f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0441\u0435\u043a\u0440\u0435\u0442\u044b \u0438\u0437 Vault \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0442\u043e\u043a\u0435\u043d\u0430 \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438.\n\n    \u041f\u0440\u0438\u043c\u0435\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f:\n        # \u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430\n        vault = VaultClient(\n            addr='http://localhost:8200',  # \u0410\u0434\u0440\u0435\u0441 Vault \u0441\u0435\u0440\u0432\u0435\u0440\u0430\n            token_file='/path/to/token'    # \u0424\u0430\u0439\u043b \u0441 \u0442\u043e\u043a\u0435\u043d\u043e\u043c \u0434\u043e\u0441\u0442\u0443\u043f\u0430\n        )\n\n        # \u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0441\u0435\u043a\u0440\u0435\u0442\u0430\n        secret = vault.read_secret('\u043f\u0443\u0442\u044c/\u043a/\u0441\u0435\u043a\u0440\u0435\u0442\u0443')\n\n    \u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435:\n        - \u0414\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0439 \u0438 \u0437\u0430\u043f\u0443\u0449\u0435\u043d\u043d\u044b\u0439 \u0441\u0435\u0440\u0432\u0435\u0440 Vault\n        - \u0422\u043e\u043a\u0435\u043d \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0438\u043c\u0435\u0442\u044c \u043f\u0440\u0430\u0432\u0430 \u043d\u0430 \u0447\u0442\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c\u044b\u0445 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432\n        - \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f KV Secrets Engine \u0432\u0435\u0440\u0441\u0438\u0438 2\n    \"\"\"\n\n    def __init__(self, addr: str | None = None, token_file: str | None = None) -&gt; None:\n        \"\"\"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u043a\u043b\u0438\u0435\u043d\u0442 Vault \u0441 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f.\n\n        Args:\n            addr (str | None): URL \u0441\u0435\u0440\u0432\u0435\u0440\u0430 Vault. \u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d, \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d \u0438\u0437\n            \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f 'VAULT_ADDR'.\n            token_file (str | None): \u041f\u0443\u0442\u044c \u043a \u0444\u0430\u0439\u043b\u0443 \u0441 \u0442\u043e\u043a\u0435\u043d\u043e\u043c \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 Vault. \u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d,\n            \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d \u0438\u0437 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f 'VAULT_TOKEN_FILE'.\n\n        Raises:\n            ValueError: \u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u044b \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b addr/token_file \u0438 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435\n            \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442.\n\n        \"\"\"\n        self._addr = addr or os.environ.get(VAULT_ADDR_ENV_NAME)\n        self._token_file = token_file or os.environ.get(VAULT_TOKEN_FILE_ENV_NAME)\n        self._client = self._init_client()\n\n    def _init_client(self) -&gt; hvac.Client:\n        \"\"\"\u0421\u043e\u0437\u0434\u0430\u0435\u0442 \u0438 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442 \u043a\u043b\u0438\u0435\u043d\u0442 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 Vault.\n\n        Returns:\n            \u0410\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043a\u043b\u0438\u0435\u043d\u0442 Vault\n\n        Raises:\n            VaultError: \u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\n            VaultConnectionError: \u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443\n            VaultTokenError: \u0415\u0441\u043b\u0438 \u0432\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 \u0442\u043e\u043a\u0435\u043d\u043e\u043c\n            VaultAuthenticationError: \u0415\u0441\u043b\u0438 \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u043d\u0435 \u0443\u0434\u0430\u043b\u0430\u0441\u044c\n\n        \"\"\"\n        if not self._addr or not self._token_file:\n            logger.error(\n                f'\u041d\u0435 \u0437\u0430\u0434\u0430\u043d\u044b \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f {VAULT_ADDR_ENV_NAME} '\n                f'\u0438 {VAULT_TOKEN_FILE_ENV_NAME}',\n            )\n            raise VaultError(\n                f'\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f {VAULT_ADDR_ENV_NAME} \u0438 '\n                f'{VAULT_TOKEN_FILE_ENV_NAME} \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0437\u0430\u0434\u0430\u043d\u044b',\n            )\n\n        try:\n            with open(self._token_file) as f:\n                token = f.read().strip()\n\n            if not token:\n                logger.error('\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u0442\u043e\u043a\u0435\u043d\u0430 \u043f\u0440\u0438 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 Vault-\u043a\u043b\u0438\u0435\u043d\u0442\u0430')\n                raise VaultTokenError('\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c')\n\n            client = hvac.Client(url=self._addr, token=token)\n\n            if not client.is_authenticated():\n                logger.error('\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 \u0432 Vault-\u043a\u043b\u0438\u0435\u043d\u0442\u0435')\n                raise VaultAuthenticationError('\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 Vault')\n\n            logger.info('Vault-\u043a\u043b\u0438\u0435\u043d\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u043d')\n            return client\n\n        except FileNotFoundError as e:\n            logger.exception(f'\u0424\u0430\u0439\u043b \u0441 \u0442\u043e\u043a\u0435\u043d\u043e\u043c \u0434\u043b\u044f Vault-\u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d: {self._token_file}')\n            raise VaultTokenError(f'\u0424\u0430\u0439\u043b \u0441 \u0442\u043e\u043a\u0435\u043d\u043e\u043c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d: {self._token_file}') from e\n        except PermissionError as e:\n            logger.exception(f'\u041d\u0435\u0442 \u043f\u0440\u0430\u0432 \u043d\u0430 \u0447\u0442\u0435\u043d\u0438\u0435 \u0442\u043e\u043a\u0435\u043d\u0430 Vault-\u043a\u043b\u0438\u0435\u043d\u0442\u043e\u043c: {self._token_file}')\n            raise VaultPermissionError(f'\u041d\u0435\u0442 \u043f\u0440\u0430\u0432 \u043d\u0430 \u0447\u0442\u0435\u043d\u0438\u0435 \u0442\u043e\u043a\u0435\u043d\u0430: {self._token_file}') from e\n        except VaultError:\n            raise\n        except Exception as e:\n            if 'connection' in str(e).lower():\n                logger.exception(f'\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a Vault: {e}')\n                raise VaultConnectionError(f'\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a Vault: {e}') from e\n            logger.exception(f'\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 Vault: {e}')\n            raise VaultError(f'\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 Vault: {e}') from e\n\n    async def get_secret(self, path: str, key: str | None = None) -&gt; dict[str, Any]:  # type: ignore\n        \"\"\"\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u0441\u0435\u043a\u0440\u0435\u0442 \u0438\u0437 Vault \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c\u0443 \u043f\u0443\u0442\u0438.\n\n        \u041e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e \u043c\u043e\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c key - \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u044e\u0449\u0438\u0439 \u043a\u043b\u044e\u0447 \u043f\u043e \u043f\u0443\u0442\u0438\n\n        \u041f\u0440\u0438\u043c\u0435\u0440:\n            # \u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0441\u0435\u043a\u0440\u0435\u0442\u0430\n            secret = vault.read_secret('eebook/users/database')\n            # \u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442: {'username': 'admin', 'password': 's3cr3t'} # pragma: allowlist secret\n\n            # \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445\n            db_user = secret['username']\n            db_pass = secret['password']\n\n        Params:\n            path: \u041f\u0443\u0442\u044c \u043a \u0441\u0435\u043a\u0440\u0435\u0442\u0443 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 '\u043f\u0443\u0442\u044c/\u043a/\u0441\u0435\u043a\u0440\u0435\u0442\u0443'.\n                  \u0414\u043b\u044f KV v2 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u0440\u0435\u0444\u0438\u043a\u0441 'data/' \u043f\u0440\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438.\n            key: \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0435\u043a\u0440\u0435\u0442\u0430 (\u043f\u0440. db_port)\n\n        Returns:\n            \u0421\u043b\u043e\u0432\u0430\u0440\u044c \u0441 \u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u0441\u0435\u043a\u0440\u0435\u0442\u0430\n\n        Raises:\n            VaultSecretNotFoundError: \u0415\u0441\u043b\u0438 \u0441\u0435\u043a\u0440\u0435\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c\u0443 \u043f\u0443\u0442\u0438\n            VaultPermissionError: \u0415\u0441\u043b\u0438 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043f\u0440\u0430\u0432 \u0434\u043b\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0441\u0435\u043a\u0440\u0435\u0442\u0443\n            VaultError: \u041f\u0440\u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u043e\u0448\u0438\u0431\u043a\u0430\u0445 \u043f\u0440\u0438 \u0447\u0442\u0435\u043d\u0438\u0438 \u0441\u0435\u043a\u0440\u0435\u0442\u0430\n\n        \u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u044f:\n            - \u0414\u043b\u044f KV v2 \u0441\u0435\u043a\u0440\u0435\u0442\u044b \u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 '\u043f\u0443\u0442\u044c/\u043a/\u0441\u0435\u043a\u0440\u0435\u0442\u0443',\n              \u0430 \u043d\u0435 \u0432 \u043f\u043e\u043b\u043d\u043e\u043c \u043f\u0443\u0442\u0438 'secret/data/\u043f\u0443\u0442\u044c/\u043a/\u0441\u0435\u043a\u0440\u0435\u0442\u0443'\n            - \u041c\u0435\u0442\u043e\u0434 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u0432\u0435\u0440\u0441\u0438\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 KV v2\n\n        \"\"\"\n        try:\n            secret = self._client.secrets.kv.v2.read_secret_version(path=path)\n            data = secret['data']['data']\n            logger.debug('\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d \u0441\u0435\u043a\u0440\u0435\u0442 \u0438\u0437 Vault')\n\n            if key is not None:\n                if key not in data:\n                    logger.error(f'\u041a\u043b\u044e\u0447 \"{key}\" \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u0432 \u0441\u0435\u043a\u0440\u0435\u0442\u0435 \u043f\u043e \u043f\u0443\u0442\u0438: {path}')\n                    raise VaultSecretNotFoundError(\n                        f'\u041a\u043b\u044e\u0447 \"{key}\" \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u0432 \u0441\u0435\u043a\u0440\u0435\u0442\u0435 \u043f\u043e \u043f\u0443\u0442\u0438: {path}',\n                    )\n                return data[key]\n\n            return data\n        except VaultError:\n            raise\n\n        except Exception as e:\n            if '404' in str(e) or 'Not found' in str(e):\n                logger.exception(\n                    f'\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0438\u0442\u044c \u0441\u0435\u043a\u0440\u0435\u0442 \u0432 Vault \u043f\u043e \u043f\u0443\u0442\u0438: {path}',\n                )\n                raise VaultSecretNotFoundError(f'\u0421\u0435\u043a\u0440\u0435\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d: {path}') from e\n            logger.exception('\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0447\u0442\u0435\u043d\u0438\u0438 Vault-\u0441\u0435\u043a\u0440\u0435\u0442\u0430')\n            raise VaultError(f'\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0447\u0442\u0435\u043d\u0438\u0438 \u0441\u0435\u043a\u0440\u0435\u0442\u0430: {e}') from e\n</code></pre>"},{"location":"api/python/adapters/vault_client/#src.adapters.vault_client.VaultClient--_1","title":"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430","text":"<p>vault = VaultClient(     addr='http://localhost:8200',  # \u0410\u0434\u0440\u0435\u0441 Vault \u0441\u0435\u0440\u0432\u0435\u0440\u0430     token_file='/path/to/token'    # \u0424\u0430\u0439\u043b \u0441 \u0442\u043e\u043a\u0435\u043d\u043e\u043c \u0434\u043e\u0441\u0442\u0443\u043f\u0430 )</p>"},{"location":"api/python/adapters/vault_client/#src.adapters.vault_client.VaultClient--_2","title":"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0441\u0435\u043a\u0440\u0435\u0442\u0430","text":"<p>secret = vault.read_secret('\u043f\u0443\u0442\u044c/\u043a/\u0441\u0435\u043a\u0440\u0435\u0442\u0443')</p>"},{"location":"api/python/adapters/vault_client/#src.adapters.vault_client.VaultClient.__init__","title":"<code>__init__(addr=None, token_file=None)</code>","text":"<p>\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u043a\u043b\u0438\u0435\u043d\u0442 Vault \u0441 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f.</p> <p>Parameters:</p> Name Type Description Default <code>addr</code> <code>str | None</code> <p>URL \u0441\u0435\u0440\u0432\u0435\u0440\u0430 Vault. \u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d, \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d \u0438\u0437</p> <code>None</code> <code>token_file</code> <code>str | None</code> <p>\u041f\u0443\u0442\u044c \u043a \u0444\u0430\u0439\u043b\u0443 \u0441 \u0442\u043e\u043a\u0435\u043d\u043e\u043c \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 Vault. \u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d,</p> <code>None</code> <p>Raises:</p> Type Description <code>ValueError</code> <p>\u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u044b \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b addr/token_file \u0438 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435</p> Source code in <code>src/adapters/vault_client.py</code> <pre><code>def __init__(self, addr: str | None = None, token_file: str | None = None) -&gt; None:\n    \"\"\"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u043a\u043b\u0438\u0435\u043d\u0442 Vault \u0441 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f.\n\n    Args:\n        addr (str | None): URL \u0441\u0435\u0440\u0432\u0435\u0440\u0430 Vault. \u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d, \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d \u0438\u0437\n        \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f 'VAULT_ADDR'.\n        token_file (str | None): \u041f\u0443\u0442\u044c \u043a \u0444\u0430\u0439\u043b\u0443 \u0441 \u0442\u043e\u043a\u0435\u043d\u043e\u043c \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 Vault. \u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d,\n        \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d \u0438\u0437 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f 'VAULT_TOKEN_FILE'.\n\n    Raises:\n        ValueError: \u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u044b \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b addr/token_file \u0438 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435\n        \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442.\n\n    \"\"\"\n    self._addr = addr or os.environ.get(VAULT_ADDR_ENV_NAME)\n    self._token_file = token_file or os.environ.get(VAULT_TOKEN_FILE_ENV_NAME)\n    self._client = self._init_client()\n</code></pre>"},{"location":"api/python/adapters/vault_client/#src.adapters.vault_client.VaultClient.get_secret","title":"<code>get_secret(path, key=None)</code>  <code>async</code>","text":"<p>\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u0441\u0435\u043a\u0440\u0435\u0442 \u0438\u0437 Vault \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c\u0443 \u043f\u0443\u0442\u0438.</p> <p>\u041e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e \u043c\u043e\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c key - \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u044e\u0449\u0438\u0439 \u043a\u043b\u044e\u0447 \u043f\u043e \u043f\u0443\u0442\u0438</p> \u041f\u0440\u0438\u043c\u0435\u0440 <p>Parameters:</p> Name Type Description Default <code>path</code> <code>str</code> <p>\u041f\u0443\u0442\u044c \u043a \u0441\u0435\u043a\u0440\u0435\u0442\u0443 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 '\u043f\u0443\u0442\u044c/\u043a/\u0441\u0435\u043a\u0440\u0435\u0442\u0443'.   \u0414\u043b\u044f KV v2 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u0440\u0435\u0444\u0438\u043a\u0441 'data/' \u043f\u0440\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438.</p> required <code>key</code> <code>str | None</code> <p>\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0435\u043a\u0440\u0435\u0442\u0430 (\u043f\u0440. db_port)</p> <code>None</code> <p>Returns:</p> Type Description <code>dict[str, Any]</code> <p>\u0421\u043b\u043e\u0432\u0430\u0440\u044c \u0441 \u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u0441\u0435\u043a\u0440\u0435\u0442\u0430</p> <p>Raises:</p> Type Description <code>VaultSecretNotFoundError</code> <p>\u0415\u0441\u043b\u0438 \u0441\u0435\u043a\u0440\u0435\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c\u0443 \u043f\u0443\u0442\u0438</p> <code>VaultPermissionError</code> <p>\u0415\u0441\u043b\u0438 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043f\u0440\u0430\u0432 \u0434\u043b\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0441\u0435\u043a\u0440\u0435\u0442\u0443</p> <code>VaultError</code> <p>\u041f\u0440\u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u043e\u0448\u0438\u0431\u043a\u0430\u0445 \u043f\u0440\u0438 \u0447\u0442\u0435\u043d\u0438\u0438 \u0441\u0435\u043a\u0440\u0435\u0442\u0430</p> \u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u044f <ul> <li>\u0414\u043b\u044f KV v2 \u0441\u0435\u043a\u0440\u0435\u0442\u044b \u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 '\u043f\u0443\u0442\u044c/\u043a/\u0441\u0435\u043a\u0440\u0435\u0442\u0443',   \u0430 \u043d\u0435 \u0432 \u043f\u043e\u043b\u043d\u043e\u043c \u043f\u0443\u0442\u0438 'secret/data/\u043f\u0443\u0442\u044c/\u043a/\u0441\u0435\u043a\u0440\u0435\u0442\u0443'</li> <li>\u041c\u0435\u0442\u043e\u0434 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u0432\u0435\u0440\u0441\u0438\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 KV v2</li> </ul> Source code in <code>src/adapters/vault_client.py</code> <pre><code>async def get_secret(self, path: str, key: str | None = None) -&gt; dict[str, Any]:  # type: ignore\n    \"\"\"\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u0441\u0435\u043a\u0440\u0435\u0442 \u0438\u0437 Vault \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c\u0443 \u043f\u0443\u0442\u0438.\n\n    \u041e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e \u043c\u043e\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c key - \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u044e\u0449\u0438\u0439 \u043a\u043b\u044e\u0447 \u043f\u043e \u043f\u0443\u0442\u0438\n\n    \u041f\u0440\u0438\u043c\u0435\u0440:\n        # \u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0441\u0435\u043a\u0440\u0435\u0442\u0430\n        secret = vault.read_secret('eebook/users/database')\n        # \u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442: {'username': 'admin', 'password': 's3cr3t'} # pragma: allowlist secret\n\n        # \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445\n        db_user = secret['username']\n        db_pass = secret['password']\n\n    Params:\n        path: \u041f\u0443\u0442\u044c \u043a \u0441\u0435\u043a\u0440\u0435\u0442\u0443 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 '\u043f\u0443\u0442\u044c/\u043a/\u0441\u0435\u043a\u0440\u0435\u0442\u0443'.\n              \u0414\u043b\u044f KV v2 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u0440\u0435\u0444\u0438\u043a\u0441 'data/' \u043f\u0440\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438.\n        key: \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0435\u043a\u0440\u0435\u0442\u0430 (\u043f\u0440. db_port)\n\n    Returns:\n        \u0421\u043b\u043e\u0432\u0430\u0440\u044c \u0441 \u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u0441\u0435\u043a\u0440\u0435\u0442\u0430\n\n    Raises:\n        VaultSecretNotFoundError: \u0415\u0441\u043b\u0438 \u0441\u0435\u043a\u0440\u0435\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c\u0443 \u043f\u0443\u0442\u0438\n        VaultPermissionError: \u0415\u0441\u043b\u0438 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043f\u0440\u0430\u0432 \u0434\u043b\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0441\u0435\u043a\u0440\u0435\u0442\u0443\n        VaultError: \u041f\u0440\u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u043e\u0448\u0438\u0431\u043a\u0430\u0445 \u043f\u0440\u0438 \u0447\u0442\u0435\u043d\u0438\u0438 \u0441\u0435\u043a\u0440\u0435\u0442\u0430\n\n    \u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u044f:\n        - \u0414\u043b\u044f KV v2 \u0441\u0435\u043a\u0440\u0435\u0442\u044b \u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 '\u043f\u0443\u0442\u044c/\u043a/\u0441\u0435\u043a\u0440\u0435\u0442\u0443',\n          \u0430 \u043d\u0435 \u0432 \u043f\u043e\u043b\u043d\u043e\u043c \u043f\u0443\u0442\u0438 'secret/data/\u043f\u0443\u0442\u044c/\u043a/\u0441\u0435\u043a\u0440\u0435\u0442\u0443'\n        - \u041c\u0435\u0442\u043e\u0434 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u0432\u0435\u0440\u0441\u0438\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 KV v2\n\n    \"\"\"\n    try:\n        secret = self._client.secrets.kv.v2.read_secret_version(path=path)\n        data = secret['data']['data']\n        logger.debug('\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d \u0441\u0435\u043a\u0440\u0435\u0442 \u0438\u0437 Vault')\n\n        if key is not None:\n            if key not in data:\n                logger.error(f'\u041a\u043b\u044e\u0447 \"{key}\" \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u0432 \u0441\u0435\u043a\u0440\u0435\u0442\u0435 \u043f\u043e \u043f\u0443\u0442\u0438: {path}')\n                raise VaultSecretNotFoundError(\n                    f'\u041a\u043b\u044e\u0447 \"{key}\" \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u0432 \u0441\u0435\u043a\u0440\u0435\u0442\u0435 \u043f\u043e \u043f\u0443\u0442\u0438: {path}',\n                )\n            return data[key]\n\n        return data\n    except VaultError:\n        raise\n\n    except Exception as e:\n        if '404' in str(e) or 'Not found' in str(e):\n            logger.exception(\n                f'\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0438\u0442\u044c \u0441\u0435\u043a\u0440\u0435\u0442 \u0432 Vault \u043f\u043e \u043f\u0443\u0442\u0438: {path}',\n            )\n            raise VaultSecretNotFoundError(f'\u0421\u0435\u043a\u0440\u0435\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d: {path}') from e\n        logger.exception('\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0447\u0442\u0435\u043d\u0438\u0438 Vault-\u0441\u0435\u043a\u0440\u0435\u0442\u0430')\n        raise VaultError(f'\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0447\u0442\u0435\u043d\u0438\u0438 \u0441\u0435\u043a\u0440\u0435\u0442\u0430: {e}') from e\n</code></pre>"},{"location":"api/python/adapters/vault_client/#src.adapters.vault_client.VaultClient.get_secret--_1","title":"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0441\u0435\u043a\u0440\u0435\u0442\u0430","text":"<p>secret = vault.read_secret('eebook/users/database')</p>"},{"location":"api/python/adapters/vault_client/#src.adapters.vault_client.VaultClient.get_secret--username-admin-password-s3cr3t-pragma-allowlist-secret","title":"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442: {'username': 'admin', 'password': 's3cr3t'} # pragma: allowlist secret","text":""},{"location":"api/python/adapters/vault_client/#src.adapters.vault_client.VaultClient.get_secret--_2","title":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445","text":"<p>db_user = secret['username'] db_pass = secret['password']</p>"},{"location":"api/python/adapters/vault_client/#_2","title":"\u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438","text":"<ul> <li>\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0435 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0438 \u0438\u0437\u0432\u043b\u0435\u0447\u0435\u043d\u0438\u0435 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432</li> <li>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 KV Secrets Engine \u0432\u0435\u0440\u0441\u0438\u0438 2</li> <li>\u0413\u0438\u0431\u043a\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 \u0447\u0435\u0440\u0435\u0437 \u0442\u043e\u043a\u0435\u043d</li> <li>\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a \u0438 \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435</li> <li>\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0435 \u043f\u0443\u0442\u0435\u0439 \u043a \u0441\u0435\u043a\u0440\u0435\u0442\u0430\u043c</li> </ul>"},{"location":"api/python/adapters/vault_client/#_3","title":"\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":""},{"location":"api/python/adapters/vault_client/#_4","title":"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430","text":"<pre><code>from src.adapters.vault_client import VaultClient\n\n# \u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0441 \u044f\u0432\u043d\u044b\u043c \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432\nvault = VaultClient(\n    addr='http://localhost:8200',\n    token_file='/path/to/vault/token'\n)\n\n# \u0418\u043b\u0438 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f\n# export VAULT_ADDR='http://localhost:8200'\n# export VAULT_TOKEN_FILE='/path/to/vault/token'\nvault = VaultClient()\n</code></pre>"},{"location":"api/python/adapters/vault_client/#_5","title":"\u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0441\u0435\u043a\u0440\u0435\u0442\u0430\u043c\u0438","text":"<pre><code># \u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0432\u0441\u0435\u0433\u043e \u0441\u0435\u043a\u0440\u0435\u0442\u0430\nsecret = await vault.get_secret('eebook/users/database')\n# {'username': 'admin', 'password': 's3cr3t'}\n\n# \u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0438\u0437 \u0441\u0435\u043a\u0440\u0435\u0442\u0430\ndb_password = await vault.get_secret('eebook/users/database', 'password')\n# 's3cr3t'\n</code></pre>"},{"location":"api/python/adapters/vault_client/#_6","title":"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a","text":"<p>\u0412 \u043c\u043e\u0434\u0443\u043b\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u044b \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f:</p>"},{"location":"api/python/adapters/vault_client/#src.adapters.exceptions.vault_exceptions","title":"<code>src.adapters.exceptions.vault_exceptions</code>","text":""},{"location":"api/python/adapters/vault_client/#src.adapters.exceptions.vault_exceptions.VaultAuthenticationError","title":"<code>VaultAuthenticationError</code>","text":"<p>               Bases: <code>VaultError</code></p> <p>\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 \u0432 Vault.</p> Source code in <code>src/adapters/exceptions/vault_exceptions.py</code> <pre><code>class VaultAuthenticationError(VaultError):\n    \"\"\"\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 \u0432 Vault.\"\"\"\n\n    pass\n</code></pre>"},{"location":"api/python/adapters/vault_client/#src.adapters.exceptions.vault_exceptions.VaultConnectionError","title":"<code>VaultConnectionError</code>","text":"<p>               Bases: <code>VaultError</code></p> <p>\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a Vault.</p> Source code in <code>src/adapters/exceptions/vault_exceptions.py</code> <pre><code>class VaultConnectionError(VaultError):\n    \"\"\"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a Vault.\"\"\"\n\n    pass\n</code></pre>"},{"location":"api/python/adapters/vault_client/#src.adapters.exceptions.vault_exceptions.VaultError","title":"<code>VaultError</code>","text":"<p>               Bases: <code>Exception</code></p> <p>\u0411\u0430\u0437\u043e\u0432\u043e\u0435 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u043e\u0448\u0438\u0431\u043e\u043a Vault.</p> Source code in <code>src/adapters/exceptions/vault_exceptions.py</code> <pre><code>class VaultError(Exception):\n    \"\"\"\u0411\u0430\u0437\u043e\u0432\u043e\u0435 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u043e\u0448\u0438\u0431\u043e\u043a Vault.\"\"\"\n\n    pass\n</code></pre>"},{"location":"api/python/adapters/vault_client/#src.adapters.exceptions.vault_exceptions.VaultPermissionError","title":"<code>VaultPermissionError</code>","text":"<p>               Bases: <code>VaultError</code></p> <p>\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0430\u0432 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0440\u0435\u0441\u0443\u0440\u0441\u0443 Vault.</p> Source code in <code>src/adapters/exceptions/vault_exceptions.py</code> <pre><code>class VaultPermissionError(VaultError):\n    \"\"\"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0430\u0432 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0440\u0435\u0441\u0443\u0440\u0441\u0443 Vault.\"\"\"\n\n    pass\n</code></pre>"},{"location":"api/python/adapters/vault_client/#src.adapters.exceptions.vault_exceptions.VaultSecretNotFoundError","title":"<code>VaultSecretNotFoundError</code>","text":"<p>               Bases: <code>VaultError</code></p> <p>\u0417\u0430\u043f\u0440\u043e\u0448\u0435\u043d\u043d\u044b\u0439 \u0441\u0435\u043a\u0440\u0435\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u0432 Vault.</p> Source code in <code>src/adapters/exceptions/vault_exceptions.py</code> <pre><code>class VaultSecretNotFoundError(VaultError):\n    \"\"\"\u0417\u0430\u043f\u0440\u043e\u0448\u0435\u043d\u043d\u044b\u0439 \u0441\u0435\u043a\u0440\u0435\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u0432 Vault.\"\"\"\n\n    pass\n</code></pre>"},{"location":"api/python/adapters/vault_client/#src.adapters.exceptions.vault_exceptions.VaultTokenError","title":"<code>VaultTokenError</code>","text":"<p>               Bases: <code>VaultError</code></p> <p>\u041e\u0448\u0438\u0431\u043a\u0430, \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u0430\u044f \u0441 \u0442\u043e\u043a\u0435\u043d\u043e\u043c Vault.</p> Source code in <code>src/adapters/exceptions/vault_exceptions.py</code> <pre><code>class VaultTokenError(VaultError):\n    \"\"\"\u041e\u0448\u0438\u0431\u043a\u0430, \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u0430\u044f \u0441 \u0442\u043e\u043a\u0435\u043d\u043e\u043c Vault.\"\"\"\n\n    pass\n</code></pre>"},{"location":"api/python/adapters/vault_client/#_7","title":"\u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u043a \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044e","text":"<ul> <li>Python 3.8+</li> <li>\u041f\u0430\u043a\u0435\u0442 <code>hvac</code></li> <li>\u041d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0439 \u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0439 \u0441\u0435\u0440\u0432\u0435\u0440 HashiCorp Vault</li> <li>\u0414\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 \u0442\u043e\u043a\u0435\u043d \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0441 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u043c\u0438 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f\u043c\u0438</li> </ul>"},{"location":"api/python/adapters/vault_client/#_8","title":"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u044f","text":"<ul> <li>\u0414\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0439 \u0441\u0435\u0440\u0432\u0435\u0440 Vault</li> <li>\u0422\u043e\u043a\u0435\u043d \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0438\u043c\u0435\u0442\u044c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043f\u0440\u0430\u0432\u0430 \u043d\u0430 \u0447\u0442\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c\u044b\u0445 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432</li> <li>\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f KV Secrets Engine \u0432\u0435\u0440\u0441\u0438\u0438 2</li> <li>\u0412\u0441\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043b\u043e\u0433\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u0430\u0443\u0434\u0438\u0442\u0430</li> </ul>"},{"location":"api/python/adapters/vault_client/#_9","title":"\u0421\u043c. \u0442\u0430\u043a\u0436\u0435","text":"<ul> <li>HashiCorp Vault Documentation</li> <li>hvac Documentation</li> </ul>"},{"location":"api/python/config/loader/","title":"\u0417\u0430\u0433\u0440\u0443\u0437\u0447\u0438\u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c <code>loader</code> \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b \u0434\u043b\u044f \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0439 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u0438 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432 \u0438\u0437 \u0437\u0430\u0449\u0438\u0449\u0435\u043d\u043d\u043e\u0433\u043e \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430 \u0432 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u043f\u0430\u0442\u0442\u0435\u0440\u043d \"\u041f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432\" \u0434\u043b\u044f \u0430\u0431\u0441\u0442\u0440\u0430\u043a\u0446\u0438\u0438 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445.</p>"},{"location":"api/python/config/loader/#_2","title":"\u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438","text":"<ul> <li>\u0413\u0438\u0431\u043a\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432 \u0447\u0435\u0440\u0435\u0437 \u0430\u0431\u0441\u0442\u0440\u0430\u043a\u0442\u043d\u044b\u0439 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 <code>ISecretsProvider</code></li> <li>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u043f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440\u043e\u0432 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432 (\u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f Vault)</li> <li>\u041f\u043e\u0442\u043e\u043a\u043e\u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u0441 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u043c\u0438 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f</li> <li>\u0414\u0435\u0442\u0430\u043b\u044c\u043d\u043e\u0435 \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439</li> <li>\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a \u0441 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u043c\u0438 \u0442\u0438\u043f\u0430\u043c\u0438 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439</li> </ul>"},{"location":"api/python/config/loader/#api","title":"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f API","text":""},{"location":"api/python/config/loader/#settingsloader","title":"SettingsLoader","text":"<p>\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442 \u0441\u0435\u043a\u0440\u0435\u0442\u044b \u0438\u0437 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432 \u0432 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f.</p> Source code in <code>src/config/loader.py</code> <pre><code>class SettingsLoader:\n    \"\"\"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442 \u0441\u0435\u043a\u0440\u0435\u0442\u044b \u0438\u0437 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432 \u0432 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f.\"\"\"\n\n    def __init__(self, secrets_provider: ISecretsProvider | None = None) -&gt; None:\n        try:\n            self._sp = secrets_provider or VaultClient()\n            logger.info(f'{SettingsLoader.__name__} \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d')\n        except Exception as e:\n            logger.exception(f'\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 {SettingsLoader.__name__}')\n            raise SettingsLoaderInitializationError(\n                f'\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 {SettingsLoader.__name__}: {e}',\n            ) from e\n\n    async def load(self) -&gt; None:\n        \"\"\"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442 \u0441\u0435\u043a\u0440\u0435\u0442\u044b \u0438\u0437 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432 \u0432 env.\"\"\"\n        secret_paths = [\n            'eebook/portfolio',\n        ]\n        for path in secret_paths:\n            data = await self._sp.get_secret(path)\n            for key, value in data.items():\n                os.environ[key] = str(value)\n        logger.info('\u0421\u0435\u043a\u0440\u0435\u0442\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u044b \u0432 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435')\n</code></pre>"},{"location":"api/python/config/loader/#src.config.loader.SettingsLoader.load","title":"<code>load() -&gt; None</code>  <code>async</code>","text":"<p>\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442 \u0441\u0435\u043a\u0440\u0435\u0442\u044b \u0438\u0437 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432 \u0432 env.</p> Source code in <code>src/config/loader.py</code> <pre><code>async def load(self) -&gt; None:\n    \"\"\"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442 \u0441\u0435\u043a\u0440\u0435\u0442\u044b \u0438\u0437 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432 \u0432 env.\"\"\"\n    secret_paths = [\n        'eebook/portfolio',\n    ]\n    for path in secret_paths:\n        data = await self._sp.get_secret(path)\n        for key, value in data.items():\n            os.environ[key] = str(value)\n    logger.info('\u0421\u0435\u043a\u0440\u0435\u0442\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u044b \u0432 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435')\n</code></pre>"},{"location":"api/python/config/loader/#_3","title":"\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":""},{"location":"api/python/config/loader/#vault","title":"\u0411\u0430\u0437\u043e\u0432\u043e\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0441 Vault \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e","text":"<pre><code>from src.config.loader import SettingsLoader\n\n# \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u0433\u0440\u0443\u0437\u0447\u0438\u043a\u0430 \u0441 \u043f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440\u043e\u043c \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e (Vault)\nloader = SettingsLoader()\n\n# \u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432 \u0432 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f\nawait loader.load()\n\n# \u0422\u0435\u043f\u0435\u0440\u044c \u0441\u0435\u043a\u0440\u0435\u0442\u044b \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0447\u0435\u0440\u0435\u0437 os.environ\nimport os\nprint(os.environ['DATABASE_URL'])  # \u041f\u0440\u0438\u043c\u0435\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u043e\u0433\u043e \u0441\u0435\u043a\u0440\u0435\u0442\u0430\n</code></pre>"},{"location":"api/python/config/settings/","title":"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c <code>settings</code> \u0440\u0435\u0430\u043b\u0438\u0437\u0443\u0435\u0442 \u043f\u0430\u0442\u0442\u0435\u0440\u043d \"\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u043a\u0430\u043a \u043a\u043e\u0434\" \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c Pydantic, \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u044f \u0442\u0438\u043f\u043e\u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f.</p>"},{"location":"api/python/config/settings/#_2","title":"\u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438","text":"<ul> <li>\u0421\u0442\u0440\u043e\u0433\u0430\u044f \u0442\u0438\u043f\u0438\u0437\u0430\u0446\u0438\u044f \u0432\u0441\u0435\u0445 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a</li> <li>\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0438\u0437 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f</li> <li>\u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0430 \u044d\u0442\u0430\u043f\u0435 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438</li> <li>\u0412\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u043c\u044b\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439</li> <li>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u0440\u0430\u0441\u0448\u0438\u0440\u044f\u0435\u043c\u043e\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438</li> </ul>"},{"location":"api/python/config/settings/#api","title":"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f API","text":""},{"location":"api/python/config/settings/#settings","title":"\u041a\u043b\u0430\u0441\u0441 Settings","text":"<p>\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u043a\u043b\u0430\u0441\u0441 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041d\u0430\u0441\u043b\u0435\u0434\u0443\u0435\u0442\u0441\u044f \u043e\u0442 <code>pydantic.BaseSettings</code>.</p> <p>               Bases: <code>BaseSettings</code></p> <p>Pydantic-\u043c\u043e\u0434\u0435\u043b\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f.</p> Source code in <code>src/config/settings.py</code> <pre><code>class Settings(BaseSettings):\n    \"\"\"Pydantic-\u043c\u043e\u0434\u0435\u043b\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f.\"\"\"\n\n    FASTAPI_SECRET: str\n    POSTGRES_USER: str\n    POSTGRES_PASSWORD: str\n    POSTGRES_DB: str\n    POSTGRES_PORT: int\n    POSTGRES_HOST: str\n\n    class Config:\n        env_file_encoding = 'utf-8'\n        extra = 'allow'\n\n    @property\n    def postgres_uri(self) -&gt; str:\n        return (\n            f'postgresql+asyncpg://{self.POSTGRES_USER}:{self.POSTGRES_PASSWORD}'\n            f'@{self.POSTGRES_HOST}:{self.POSTGRES_PORT}/{self.POSTGRES_DB}'\n        )\n</code></pre>"},{"location":"api/python/config/settings/#_3","title":"\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":""},{"location":"api/python/config/settings/#_4","title":"\u0411\u0430\u0437\u043e\u0432\u043e\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435","text":"<pre><code>from src.config.settings import Settings\n\n# \u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a\nsettings = Settings()\n\n# \u0414\u043e\u0441\u0442\u0443\u043f \u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c\ndb_uri = settings.postgres_uri\nsecret_key = settings.FASTAPI_SECRET\n</code></pre>"},{"location":"api/python/config/settings/#_5","title":"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f","text":"<ol> <li>\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0444\u0430\u0439\u043b <code>.env</code> \u0432 \u043a\u043e\u0440\u043d\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0441 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u043c\u0438 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u043c\u0438</li> <li>\u0418\u043b\u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435</li> </ol> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0433\u043e <code>.env</code> \u0444\u0430\u0439\u043b\u0430: <pre><code>FASTAPI_SECRET=your-secret-key\nPOSTGRES_USER=user\nPOSTGRES_PASSWORD=password\nPOSTGRES_DB=dbname\nPOSTGRES_HOST=localhost\nPOSTGRES_PORT=5432\n</code></pre></p>"},{"location":"api/python/domain/domain/","title":"\u0414\u043e\u043c\u0435\u043d\u043d\u044b\u0439 \u0441\u043b\u043e\u0439 \u043f\u043e\u0440\u0442\u0444\u043e\u043b\u0438\u043e","text":""},{"location":"api/python/domain/domain/#_2","title":"\u041e\u0431\u0437\u043e\u0440","text":"<p>\u0414\u043e\u043c\u0435\u043d\u043d\u044b\u0439 \u0441\u043b\u043e\u0439 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043e\u0431\u043e\u0439 \u044f\u0434\u0440\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0435\u0435 \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0443 \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0438\u043d\u0432\u0435\u0441\u0442\u0438\u0446\u0438\u043e\u043d\u043d\u044b\u043c \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u0435\u043c. \u042d\u0442\u043e\u0442 \u0441\u043b\u043e\u0439 \u043d\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0432\u043d\u0435\u0448\u043d\u0438\u0445 \u0441\u0438\u0441\u0442\u0435\u043c \u0438 \u0444\u0440\u0435\u0439\u043c\u0432\u043e\u0440\u043a\u043e\u0432, \u0447\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442 \u0435\u0433\u043e \u0438\u0437\u043e\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u043c \u0438 \u043b\u0435\u0433\u043a\u043e \u0442\u0435\u0441\u0442\u0438\u0440\u0443\u0435\u043c\u044b\u043c.</p>"},{"location":"api/python/domain/domain/#_3","title":"\u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u043a\u043e\u043d\u0446\u0435\u043f\u0446\u0438\u0438","text":""},{"location":"api/python/domain/domain/#1","title":"1. \u0410\u0433\u0440\u0435\u0433\u0430\u0442\u044b","text":"<p>\u0410\u0433\u0440\u0435\u0433\u0430\u0442\u044b \u2014 \u044d\u0442\u043e \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0431\u043b\u043e\u043a\u0438 \u0434\u043e\u043c\u0435\u043d\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044e\u0442 \u0446\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u0438\u043d\u043a\u0430\u043f\u0441\u0443\u043b\u0438\u0440\u0443\u044e\u0442 \u0431\u0438\u0437\u043d\u0435\u0441-\u043f\u0440\u0430\u0432\u0438\u043b\u0430.</p>"},{"location":"api/python/domain/domain/#11-portfolio","title":"1.1. \u041f\u043e\u0440\u0442\u0444\u0435\u043b\u044c (Portfolio)","text":"<p>\u0426\u0435\u043d\u0442\u0440\u0430\u043b\u044c\u043d\u044b\u0439 \u0430\u0433\u0440\u0435\u0433\u0430\u0442, \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u044e\u0449\u0438\u0439 \u0438\u043d\u0432\u0435\u0441\u0442\u0438\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.</p> <p>\u0410\u0433\u0440\u0435\u0433\u0430\u0442-\u043a\u043e\u0440\u0435\u043d\u044c \u0438\u043d\u0432\u0435\u0441\u0442\u0438\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f.</p> <p>\u0423\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0432\u0441\u0435\u043c\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f\u043c\u0438 \u0441 \u0430\u043a\u0442\u0438\u0432\u0430\u043c\u0438 \u0438 \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0440\u0443\u0435\u0442 \u0441\u043e\u0431\u043b\u044e\u0434\u0435\u043d\u0438\u0435 \u0431\u0438\u0437\u043d\u0435\u0441-\u043f\u0440\u0430\u0432\u0438\u043b:</p> <ul> <li>\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0441\u0442\u044c \u0441\u0440\u0435\u0434\u043d\u0435\u0439 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u0438,</li> <li>\u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u0440\u043e\u0434\u0430\u0436\u0438 \u0431\u0435\u0437 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e\u0433\u043e \u043e\u0431\u044a\u0451\u043c\u0430,</li> <li>\u0446\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u044c \u0441\u043e\u0441\u0442\u0430\u0432\u0430 \u043f\u043e\u0437\u0438\u0446\u0438\u0439.</li> </ul> <p>\u0412\u0441\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u0434\u043e\u043b\u0436\u043d\u044b \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0447\u0435\u0440\u0435\u0437 \u043c\u0435\u0442\u043e\u0434 <code>execute_transaction</code>.</p> <p>Attributes:</p> Name Type Description <code>id</code> <code>UUID</code> <p>\u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f.</p> <code>user_id</code> <code>UUID</code> <p>\u0432\u043b\u0430\u0434\u0435\u043b\u0435\u0446 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f.</p> <code>name</code> <code>str</code> <p>\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \"\u041f\u0435\u043d\u0441\u0438\u043e\u043d\u043d\u044b\u0439\", \"\u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438\").</p> <code>currency</code> <code>str</code> <p>\u0431\u0430\u0437\u043e\u0432\u0430\u044f \u0432\u0430\u043b\u044e\u0442\u0430 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f (\u0432\u0441\u0435 \u0440\u0430\u0441\u0447\u0451\u0442\u044b \u043f\u0440\u0438\u0432\u043e\u0434\u044f\u0442\u0441\u044f \u043a \u043d\u0435\u0439).</p> <code>created_at</code> <code>datetime</code> <p>\u0434\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f.</p> <code>holdings</code> <code>List[Holding]</code> <p>\u0442\u0435\u043a\u0443\u0449\u0438\u0435 \u043f\u043e\u0437\u0438\u0446\u0438\u0438 \u043f\u043e \u0430\u043a\u0442\u0438\u0432\u0430\u043c.</p> Example <p>portfolio = Portfolio(user_id, \"\u0420\u043e\u0441\u0442\", \"RUB\") tx = Transaction(...) portfolio.execute_transaction(tx)</p> Source code in <code>src/domain/domain.py</code> <pre><code>class Portfolio:\n    \"\"\"\u0410\u0433\u0440\u0435\u0433\u0430\u0442-\u043a\u043e\u0440\u0435\u043d\u044c \u0438\u043d\u0432\u0435\u0441\u0442\u0438\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f.\n\n    \u0423\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0432\u0441\u0435\u043c\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f\u043c\u0438 \u0441 \u0430\u043a\u0442\u0438\u0432\u0430\u043c\u0438 \u0438 \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0440\u0443\u0435\u0442 \u0441\u043e\u0431\u043b\u044e\u0434\u0435\u043d\u0438\u0435 \u0431\u0438\u0437\u043d\u0435\u0441-\u043f\u0440\u0430\u0432\u0438\u043b:\n\n    - \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0441\u0442\u044c \u0441\u0440\u0435\u0434\u043d\u0435\u0439 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u0438,\n    - \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u0440\u043e\u0434\u0430\u0436\u0438 \u0431\u0435\u0437 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e\u0433\u043e \u043e\u0431\u044a\u0451\u043c\u0430,\n    - \u0446\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u044c \u0441\u043e\u0441\u0442\u0430\u0432\u0430 \u043f\u043e\u0437\u0438\u0446\u0438\u0439.\n\n    \u0412\u0441\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u0434\u043e\u043b\u0436\u043d\u044b \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442\u044c **\u0442\u043e\u043b\u044c\u043a\u043e** \u0447\u0435\u0440\u0435\u0437 \u043c\u0435\u0442\u043e\u0434 `execute_transaction`.\n\n    Attributes:\n        id (UUID): \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f.\n        user_id (UUID): \u0432\u043b\u0430\u0434\u0435\u043b\u0435\u0446 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f.\n        name (str): \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \"\u041f\u0435\u043d\u0441\u0438\u043e\u043d\u043d\u044b\u0439\", \"\u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438\").\n        currency (str): \u0431\u0430\u0437\u043e\u0432\u0430\u044f \u0432\u0430\u043b\u044e\u0442\u0430 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f (\u0432\u0441\u0435 \u0440\u0430\u0441\u0447\u0451\u0442\u044b \u043f\u0440\u0438\u0432\u043e\u0434\u044f\u0442\u0441\u044f \u043a \u043d\u0435\u0439).\n        created_at (datetime): \u0434\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f.\n        holdings (List[Holding]): \u0442\u0435\u043a\u0443\u0449\u0438\u0435 \u043f\u043e\u0437\u0438\u0446\u0438\u0438 \u043f\u043e \u0430\u043a\u0442\u0438\u0432\u0430\u043c.\n\n    Example:\n        portfolio = Portfolio(user_id, \"\u0420\u043e\u0441\u0442\", \"RUB\")\n        tx = Transaction(...)\n        portfolio.execute_transaction(tx)\n\n    \"\"\"\n\n    __slots__ = ('id', 'user_id', 'name', 'currency', 'created_at', 'holdings')\n\n    def __init__(\n        self,\n        user_id: uuid.UUID,\n        name: str,\n        currency: str,\n        created_at: datetime.datetime | None = None,\n        holdings: list[Holding] | None = None,\n    ) -&gt; None:\n        self.id = uuid.uuid4()\n        self.user_id = user_id\n        self.name = name.strip()\n        self.currency = currency\n        self.created_at = created_at or datetime.datetime.now(datetime.UTC)\n        self.holdings = list(holdings) if holdings is not None else []\n\n    def get_holding(self, asset_id: str) -&gt; Holding | None:\n        \"\"\"\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0443\u044e \u043f\u043e\u0437\u0438\u0446\u0438\u044e \u043f\u043e \u0430\u043a\u0442\u0438\u0432\u0443 \u0438\u043b\u0438 None, \u0435\u0441\u043b\u0438 \u0435\u0451 \u043d\u0435\u0442.\"\"\"\n        return next((h for h in self.holdings if h.asset_id == asset_id), None)\n\n    def execute_transaction(self, transaction: 'Transaction') -&gt; None:\n        \"\"\"\u041f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442 \u0444\u0438\u043d\u0430\u043d\u0441\u043e\u0432\u0443\u044e \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044e \u043a \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044e \u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u0442 \u0435\u0433\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435.\n\n        \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b\u0435 \u0442\u0438\u043f\u044b \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439:\n\n        - BUY: \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0435\u0442 \u043f\u043e\u0437\u0438\u0446\u0438\u044e, \u043f\u0435\u0440\u0435\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u0442 \u0441\u0440\u0435\u0434\u043d\u044e\u044e \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c.\n        - SELL: \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0435\u0442 \u043f\u043e\u0437\u0438\u0446\u0438\u044e; \u043f\u0440\u0438 \u043e\u0431\u043d\u0443\u043b\u0435\u043d\u0438\u0438 \u2014 \u0443\u0434\u0430\u043b\u044f\u0435\u0442 \u0437\u0430\u043f\u0438\u0441\u044c.\n        - DIVIDEND: \u0444\u0438\u043a\u0441\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u043a\u0430\u043a \u0444\u0430\u043a\u0442, \u043d\u043e \u043d\u0435 \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u0441\u043e\u0441\u0442\u0430\u0432 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f.\n\n        Raises:\n            TransactionMismatchError: \u0435\u0441\u043b\u0438 transaction.portfolio_id != self.id.\n            InsufficientHoldingsError: \u043f\u0440\u0438 \u043f\u043e\u043f\u044b\u0442\u043a\u0435 \u043f\u0440\u043e\u0434\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435, \u0447\u0435\u043c \u0435\u0441\u0442\u044c.\n            InvalidPortfolioOperationError: \u043f\u0440\u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u044f\u0445 \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0438.\n\n        Note:\n            \u041f\u043e\u0441\u043b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e\u0433\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044e\n            \u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u043c \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 \u0434\u043b\u044f \u0430\u0443\u0434\u0438\u0442\u0430.\n\n        \"\"\"\n        if transaction.portfolio_id != self.id:\n            raise TransactionMismatchError(\n                f'\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f {transaction.id} \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0441\u044f \u043a \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044e {transaction.portfolio_id}, '\n                f'\u043d\u043e \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0430 \u043a \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044e {self.id}',\n            )\n\n        if transaction.type == TransactionType.BUY:\n            self._handle_buy(transaction)\n        elif transaction.type == TransactionType.SELL:\n            self._handle_sell(transaction)\n        elif transaction.type == TransactionType.DIVIDEND:\n            # \u0414\u0438\u0432\u0438\u0434\u0435\u043d\u0434\u044b \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u044f\u044e\u0442 \u0441\u043e\u0441\u0442\u0430\u0432 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f \u2014 \u0442\u043e\u043b\u044c\u043a\u043e \u0444\u0438\u043a\u0441\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u043a\u0430\u043a \u0444\u0430\u043a\u0442.\n            # \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u044b\u0439 \u0430\u043d\u0430\u043b\u0438\u0437 \u2014 \u0432 \u0441\u0435\u0440\u0432\u0438\u0441\u0435 metrics.\n            pass\n        else:\n            raise InvalidPortfolioOperationError(\n                f'\u041d\u0435\u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b\u0439 \u0442\u0438\u043f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438: {transaction.type.name}',\n            )\n\n    def _handle_buy(self, transaction: 'Transaction') -&gt; None:\n        \"\"\"\u041e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u043f\u043e\u043a\u0443\u043f\u043a\u0443 \u0430\u043a\u0442\u0438\u0432\u0430.\"\"\"\n        holding = self.get_holding(transaction.asset_id)\n        if holding is None:\n            self.holdings.append(\n                Holding(\n                    asset_id=transaction.asset_id,\n                    quantity=transaction.quantity,\n                    average_cost=transaction.price_per_unit,\n                ),\n            )\n        else:\n            total_cost = (\n                holding.quantity * holding.average_cost\n                + transaction.quantity * transaction.price_per_unit\n            )\n            total_quantity = holding.quantity + transaction.quantity\n            holding.average_cost = total_cost / total_quantity\n            holding.quantity = total_quantity\n\n    def _handle_sell(self, transaction: 'Transaction') -&gt; None:\n        \"\"\"\u041e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u043f\u0440\u043e\u0434\u0430\u0436\u0443 \u0430\u043a\u0442\u0438\u0432\u0430.\"\"\"\n        holding = self.get_holding(transaction.asset_id)\n        if holding is None:\n            raise InsufficientHoldingsError(\n                asset_id=transaction.asset_id,\n                requested=float(transaction.quantity),\n                available=0.0,\n            )\n        if holding.quantity &lt; transaction.quantity:\n            raise InsufficientHoldingsError(\n                asset_id=transaction.asset_id,\n                requested=float(transaction.quantity),\n                available=float(holding.quantity),\n            )\n\n        holding.quantity -= transaction.quantity\n        if holding.quantity == 0:\n            self.holdings.remove(holding)\n\n    def __repr__(self) -&gt; str:\n        return f\"Portfolio(id={self.id}, name='{self.name}', holdings={len(self.holdings)} assets)\"\n</code></pre>"},{"location":"api/python/domain/domain/#src.domain.domain.Portfolio.execute_transaction","title":"<code>execute_transaction(transaction: Transaction) -&gt; None</code>","text":"<p>\u041f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442 \u0444\u0438\u043d\u0430\u043d\u0441\u043e\u0432\u0443\u044e \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044e \u043a \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044e \u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u0442 \u0435\u0433\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435.</p> <p>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b\u0435 \u0442\u0438\u043f\u044b \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439:</p> <ul> <li>BUY: \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0435\u0442 \u043f\u043e\u0437\u0438\u0446\u0438\u044e, \u043f\u0435\u0440\u0435\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u0442 \u0441\u0440\u0435\u0434\u043d\u044e\u044e \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c.</li> <li>SELL: \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0435\u0442 \u043f\u043e\u0437\u0438\u0446\u0438\u044e; \u043f\u0440\u0438 \u043e\u0431\u043d\u0443\u043b\u0435\u043d\u0438\u0438 \u2014 \u0443\u0434\u0430\u043b\u044f\u0435\u0442 \u0437\u0430\u043f\u0438\u0441\u044c.</li> <li>DIVIDEND: \u0444\u0438\u043a\u0441\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u043a\u0430\u043a \u0444\u0430\u043a\u0442, \u043d\u043e \u043d\u0435 \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u0441\u043e\u0441\u0442\u0430\u0432 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f.</li> </ul> <p>Raises:</p> Type Description <code>TransactionMismatchError</code> <p>\u0435\u0441\u043b\u0438 transaction.portfolio_id != self.id.</p> <code>InsufficientHoldingsError</code> <p>\u043f\u0440\u0438 \u043f\u043e\u043f\u044b\u0442\u043a\u0435 \u043f\u0440\u043e\u0434\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435, \u0447\u0435\u043c \u0435\u0441\u0442\u044c.</p> <code>InvalidPortfolioOperationError</code> <p>\u043f\u0440\u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u044f\u0445 \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0438.</p> Note <p>\u041f\u043e\u0441\u043b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e\u0433\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044e \u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u043c \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 \u0434\u043b\u044f \u0430\u0443\u0434\u0438\u0442\u0430.</p> Source code in <code>src/domain/domain.py</code> <pre><code>def execute_transaction(self, transaction: 'Transaction') -&gt; None:\n    \"\"\"\u041f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442 \u0444\u0438\u043d\u0430\u043d\u0441\u043e\u0432\u0443\u044e \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044e \u043a \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044e \u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u0442 \u0435\u0433\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435.\n\n    \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b\u0435 \u0442\u0438\u043f\u044b \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439:\n\n    - BUY: \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0435\u0442 \u043f\u043e\u0437\u0438\u0446\u0438\u044e, \u043f\u0435\u0440\u0435\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u0442 \u0441\u0440\u0435\u0434\u043d\u044e\u044e \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c.\n    - SELL: \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0435\u0442 \u043f\u043e\u0437\u0438\u0446\u0438\u044e; \u043f\u0440\u0438 \u043e\u0431\u043d\u0443\u043b\u0435\u043d\u0438\u0438 \u2014 \u0443\u0434\u0430\u043b\u044f\u0435\u0442 \u0437\u0430\u043f\u0438\u0441\u044c.\n    - DIVIDEND: \u0444\u0438\u043a\u0441\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u043a\u0430\u043a \u0444\u0430\u043a\u0442, \u043d\u043e \u043d\u0435 \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u0441\u043e\u0441\u0442\u0430\u0432 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f.\n\n    Raises:\n        TransactionMismatchError: \u0435\u0441\u043b\u0438 transaction.portfolio_id != self.id.\n        InsufficientHoldingsError: \u043f\u0440\u0438 \u043f\u043e\u043f\u044b\u0442\u043a\u0435 \u043f\u0440\u043e\u0434\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435, \u0447\u0435\u043c \u0435\u0441\u0442\u044c.\n        InvalidPortfolioOperationError: \u043f\u0440\u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u044f\u0445 \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0438.\n\n    Note:\n        \u041f\u043e\u0441\u043b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e\u0433\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044e\n        \u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u043c \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 \u0434\u043b\u044f \u0430\u0443\u0434\u0438\u0442\u0430.\n\n    \"\"\"\n    if transaction.portfolio_id != self.id:\n        raise TransactionMismatchError(\n            f'\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f {transaction.id} \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0441\u044f \u043a \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044e {transaction.portfolio_id}, '\n            f'\u043d\u043e \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0430 \u043a \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044e {self.id}',\n        )\n\n    if transaction.type == TransactionType.BUY:\n        self._handle_buy(transaction)\n    elif transaction.type == TransactionType.SELL:\n        self._handle_sell(transaction)\n    elif transaction.type == TransactionType.DIVIDEND:\n        # \u0414\u0438\u0432\u0438\u0434\u0435\u043d\u0434\u044b \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u044f\u044e\u0442 \u0441\u043e\u0441\u0442\u0430\u0432 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f \u2014 \u0442\u043e\u043b\u044c\u043a\u043e \u0444\u0438\u043a\u0441\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u043a\u0430\u043a \u0444\u0430\u043a\u0442.\n        # \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u044b\u0439 \u0430\u043d\u0430\u043b\u0438\u0437 \u2014 \u0432 \u0441\u0435\u0440\u0432\u0438\u0441\u0435 metrics.\n        pass\n    else:\n        raise InvalidPortfolioOperationError(\n            f'\u041d\u0435\u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b\u0439 \u0442\u0438\u043f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438: {transaction.type.name}',\n        )\n</code></pre>"},{"location":"api/python/domain/domain/#src.domain.domain.Portfolio.get_holding","title":"<code>get_holding(asset_id: str) -&gt; Holding | None</code>","text":"<p>\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0443\u044e \u043f\u043e\u0437\u0438\u0446\u0438\u044e \u043f\u043e \u0430\u043a\u0442\u0438\u0432\u0443 \u0438\u043b\u0438 None, \u0435\u0441\u043b\u0438 \u0435\u0451 \u043d\u0435\u0442.</p> Source code in <code>src/domain/domain.py</code> <pre><code>def get_holding(self, asset_id: str) -&gt; Holding | None:\n    \"\"\"\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0443\u044e \u043f\u043e\u0437\u0438\u0446\u0438\u044e \u043f\u043e \u0430\u043a\u0442\u0438\u0432\u0443 \u0438\u043b\u0438 None, \u0435\u0441\u043b\u0438 \u0435\u0451 \u043d\u0435\u0442.\"\"\"\n    return next((h for h in self.holdings if h.asset_id == asset_id), None)\n</code></pre>"},{"location":"api/python/domain/domain/#2","title":"2. \u0421\u0443\u0449\u043d\u043e\u0441\u0442\u0438","text":""},{"location":"api/python/domain/domain/#21-transaction","title":"2.1. \u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f (Transaction)","text":"<p>\u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0444\u0438\u043d\u0430\u043d\u0441\u043e\u0432\u0443\u044e \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044e \u0441 \u0430\u043a\u0442\u0438\u0432\u043e\u043c.</p> <p>\u0424\u0438\u043d\u0430\u043d\u0441\u043e\u0432\u0430\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u2014 \u0437\u0430\u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0444\u0430\u043a\u0442 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0441 \u0430\u043a\u0442\u0438\u0432\u043e\u043c.</p> <p>\u042f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 \u0434\u043b\u044f \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u0430 Portfolio \u0438 \u043d\u0435 \u0432\u0445\u043e\u0434\u0438\u0442 \u0432 \u0435\u0433\u043e \u0441\u043e\u0441\u0442\u0430\u0432. \u041f\u0440\u0438\u043c\u0435\u0440\u044b: \u043f\u043e\u043a\u0443\u043f\u043a\u0430 \u0430\u043a\u0446\u0438\u0439, \u043f\u0440\u043e\u0434\u0430\u0436\u0430 \u043e\u0431\u043b\u0438\u0433\u0430\u0446\u0438\u0439, \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0434\u0438\u0432\u0438\u0434\u0435\u043d\u0434\u043e\u0432.</p> <p>Attributes:</p> Name Type Description <code>id</code> <code>UUID</code> <p>\u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 (\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438).</p> <code>portfolio_id</code> <code>UUID</code> <p>\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f, \u043a \u043a\u043e\u0442\u043e\u0440\u043e\u043c\u0443 \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0441\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f.</p> <code>asset_id</code> <code>str</code> <p>\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0430\u043a\u0442\u0438\u0432\u0430 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \"NASDAQ:AAPL\").</p> <code>type</code> <code>TransactionType</code> <p>\u0442\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 (BUY, SELL, DIVIDEND \u0438 \u0434\u0440.).</p> <code>quantity</code> <code>Decimal</code> <p>\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0435\u0434\u0438\u043d\u0438\u0446 \u0430\u043a\u0442\u0438\u0432\u0430.</p> <code>price_per_unit</code> <code>Decimal</code> <p>\u0446\u0435\u043d\u0430 \u0437\u0430 \u0435\u0434\u0438\u043d\u0438\u0446\u0443 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438.</p> <code>total_amount</code> <code>Decimal</code> <p>\u043e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438.</p> <code>executed_at</code> <code>datetime</code> <p>\u0434\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f.</p> <code>currency</code> <code>str</code> <p>\u0432\u0430\u043b\u044e\u0442\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \"USD\", \"RUB\").</p> Note <p>\u041f\u043e\u0441\u043b\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u043a Portfolio \u043e\u043d\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442\u0441\u044f \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e \u043a\u0430\u043a \u043d\u0435\u0438\u0437\u043c\u0435\u043d\u044f\u0435\u043c\u044b\u0439 \u0444\u0430\u043a\u0442 \u0434\u043b\u044f \u0430\u0443\u0434\u0438\u0442\u0430 \u0438 \u0440\u0430\u0441\u0447\u0451\u0442\u043e\u0432.</p> Source code in <code>src/domain/domain.py</code> <pre><code>class Transaction:\n    \"\"\"\u0424\u0438\u043d\u0430\u043d\u0441\u043e\u0432\u0430\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u2014 \u0437\u0430\u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0444\u0430\u043a\u0442 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0441 \u0430\u043a\u0442\u0438\u0432\u043e\u043c.\n\n    \u042f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 \u0434\u043b\u044f \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u0430 Portfolio \u0438 \u043d\u0435 \u0432\u0445\u043e\u0434\u0438\u0442 \u0432 \u0435\u0433\u043e \u0441\u043e\u0441\u0442\u0430\u0432.\n    \u041f\u0440\u0438\u043c\u0435\u0440\u044b: \u043f\u043e\u043a\u0443\u043f\u043a\u0430 \u0430\u043a\u0446\u0438\u0439, \u043f\u0440\u043e\u0434\u0430\u0436\u0430 \u043e\u0431\u043b\u0438\u0433\u0430\u0446\u0438\u0439, \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0434\u0438\u0432\u0438\u0434\u0435\u043d\u0434\u043e\u0432.\n\n    Attributes:\n        id (UUID): \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 (\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438).\n        portfolio_id (UUID): \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f, \u043a \u043a\u043e\u0442\u043e\u0440\u043e\u043c\u0443 \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0441\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f.\n        asset_id (str): \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0430\u043a\u0442\u0438\u0432\u0430 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \"NASDAQ:AAPL\").\n        type (TransactionType): \u0442\u0438\u043f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 (BUY, SELL, DIVIDEND \u0438 \u0434\u0440.).\n        quantity (Decimal): \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0435\u0434\u0438\u043d\u0438\u0446 \u0430\u043a\u0442\u0438\u0432\u0430.\n        price_per_unit (Decimal): \u0446\u0435\u043d\u0430 \u0437\u0430 \u0435\u0434\u0438\u043d\u0438\u0446\u0443 \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438.\n        total_amount (Decimal): \u043e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438.\n        executed_at (datetime): \u0434\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f.\n        currency (str): \u0432\u0430\u043b\u044e\u0442\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \"USD\", \"RUB\").\n\n    Note:\n        \u041f\u043e\u0441\u043b\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u043a Portfolio \u043e\u043d\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442\u0441\u044f \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\n        \u043a\u0430\u043a \u043d\u0435\u0438\u0437\u043c\u0435\u043d\u044f\u0435\u043c\u044b\u0439 \u0444\u0430\u043a\u0442 \u0434\u043b\u044f \u0430\u0443\u0434\u0438\u0442\u0430 \u0438 \u0440\u0430\u0441\u0447\u0451\u0442\u043e\u0432.\n\n    \"\"\"\n\n    __slots__ = (\n        'id',\n        'portfolio_id',\n        'asset_id',\n        'type',\n        'quantity',\n        'price_per_unit',\n        'total_amount',\n        'executed_at',\n        'currency',\n        'transaction_type',\n    )\n\n    def __init__(\n        self,\n        portfolio_id: uuid.UUID,\n        asset_id: str,\n        transaction_type: TransactionType,\n        quantity: Decimal,\n        price_per_unit: Decimal,\n        total_amount: Decimal,\n        executed_at: datetime.datetime,\n        currency: str,\n    ) -&gt; None:\n        if quantity &lt;= 0:\n            raise InvalidTransactionDataError('\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0432 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c')\n        if price_per_unit &lt; 0:\n            raise InvalidTransactionDataError('\u0426\u0435\u043d\u0430 \u0437\u0430 \u0435\u0434\u0438\u043d\u0438\u0446\u0443 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0439')\n        if total_amount &lt; 0:\n            raise InvalidTransactionDataError('\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0439')\n\n        self.id = uuid.uuid4()\n        self.portfolio_id = portfolio_id\n        self.asset_id = asset_id\n        self.type = transaction_type\n        self.quantity = quantity\n        self.price_per_unit = price_per_unit\n        self.total_amount = total_amount\n        self.executed_at = executed_at\n        self.currency = currency\n\n    def __repr__(self) -&gt; str:\n        return (\n            f\"Transaction(id={self.id}, type={self.type.name}, asset='{self.asset_id}', \"\n            f'qty={self.quantity}, price={self.price_per_unit})'\n        )\n</code></pre>"},{"location":"api/python/domain/domain/#22-holding","title":"2.2. \u041f\u043e\u0437\u0438\u0446\u0438\u044f (Holding)","text":"<p>\u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0442\u0435\u043a\u0443\u0449\u0443\u044e \u043f\u043e\u0437\u0438\u0446\u0438\u044e \u043f\u043e \u0430\u043a\u0442\u0438\u0432\u0443 \u0432 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u0435.</p> <p>\u041f\u043e\u0437\u0438\u0446\u0438\u044f \u043f\u043e \u0444\u0438\u043d\u0430\u043d\u0441\u043e\u0432\u043e\u043c\u0443 \u0430\u043a\u0442\u0438\u0432\u0443 \u0432 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u0435.</p> <p>\u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043e\u0432\u043e\u043a\u0443\u043f\u043d\u043e\u0441\u0442\u044c \u0435\u0434\u0438\u043d\u0438\u0446 \u043e\u0434\u043d\u043e\u0433\u043e \u0430\u043a\u0442\u0438\u0432\u0430 (\u0430\u043a\u0446\u0438\u0438, \u043e\u0431\u043b\u0438\u0433\u0430\u0446\u0438\u0438 \u0438 \u0442.\u0434.), \u043f\u0440\u0438\u043e\u0431\u0440\u0435\u0442\u0451\u043d\u043d\u044b\u0445 \u0432 \u0440\u0430\u0437\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f, \u043d\u043e \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0451\u043d\u043d\u044b\u0445 \u0432 \u043e\u0434\u043d\u0443 \u0437\u0430\u043f\u0438\u0441\u044c \u0441 \u0443\u0441\u0440\u0435\u0434\u043d\u0451\u043d\u043d\u043e\u0439 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c\u044e \u043f\u043e\u043a\u0443\u043f\u043a\u0438.</p> <p>Attributes:</p> Name Type Description <code>asset_id</code> <code>str</code> <p>\u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0430\u043a\u0442\u0438\u0432\u0430 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \"MOEX:SBER\" \u0438\u043b\u0438 ISIN).</p> <code>quantity</code> <code>Decimal</code> <p>\u0442\u0435\u043a\u0443\u0449\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0435\u0434\u0438\u043d\u0438\u0446 \u0430\u043a\u0442\u0438\u0432\u0430 \u0432 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u0435.</p> <code>average_cost</code> <code>Decimal</code> <p>\u0441\u0440\u0435\u0434\u043d\u044f\u044f \u0446\u0435\u043d\u0430 \u043f\u043e\u043a\u0443\u043f\u043a\u0438 \u043e\u0434\u043d\u043e\u0439 \u0435\u0434\u0438\u043d\u0438\u0446\u044b \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f.</p> Note <p>\u041e\u0431\u044a\u0435\u043a\u0442 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0447\u0430\u0441\u0442\u044c\u044e \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u0430 Portfolio \u0438 \u043d\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c\u0441\u044f \u0438\u043b\u0438 \u0438\u0437\u043c\u0435\u043d\u044f\u0442\u044c\u0441\u044f \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e \u0438\u0437\u0432\u043d\u0435.</p> Source code in <code>src/domain/domain.py</code> <pre><code>class Holding:\n    \"\"\"\u041f\u043e\u0437\u0438\u0446\u0438\u044f \u043f\u043e \u0444\u0438\u043d\u0430\u043d\u0441\u043e\u0432\u043e\u043c\u0443 \u0430\u043a\u0442\u0438\u0432\u0443 \u0432 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u0435.\n\n    \u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043e\u0432\u043e\u043a\u0443\u043f\u043d\u043e\u0441\u0442\u044c \u0435\u0434\u0438\u043d\u0438\u0446 \u043e\u0434\u043d\u043e\u0433\u043e \u0430\u043a\u0442\u0438\u0432\u0430 (\u0430\u043a\u0446\u0438\u0438, \u043e\u0431\u043b\u0438\u0433\u0430\u0446\u0438\u0438 \u0438 \u0442.\u0434.),\n    \u043f\u0440\u0438\u043e\u0431\u0440\u0435\u0442\u0451\u043d\u043d\u044b\u0445 \u0432 \u0440\u0430\u0437\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f, \u043d\u043e \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0451\u043d\u043d\u044b\u0445 \u0432 \u043e\u0434\u043d\u0443 \u0437\u0430\u043f\u0438\u0441\u044c\n    \u0441 \u0443\u0441\u0440\u0435\u0434\u043d\u0451\u043d\u043d\u043e\u0439 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c\u044e \u043f\u043e\u043a\u0443\u043f\u043a\u0438.\n\n    Attributes:\n        asset_id (str): \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0430\u043a\u0442\u0438\u0432\u0430 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \"MOEX:SBER\" \u0438\u043b\u0438 ISIN).\n        quantity (Decimal): \u0442\u0435\u043a\u0443\u0449\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0435\u0434\u0438\u043d\u0438\u0446 \u0430\u043a\u0442\u0438\u0432\u0430 \u0432 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u0435.\n        average_cost (Decimal): \u0441\u0440\u0435\u0434\u043d\u044f\u044f \u0446\u0435\u043d\u0430 \u043f\u043e\u043a\u0443\u043f\u043a\u0438 \u043e\u0434\u043d\u043e\u0439 \u0435\u0434\u0438\u043d\u0438\u0446\u044b \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f.\n\n    Note:\n        \u041e\u0431\u044a\u0435\u043a\u0442 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0447\u0430\u0441\u0442\u044c\u044e \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u0430 Portfolio \u0438 \u043d\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c\u0441\u044f\n        \u0438\u043b\u0438 \u0438\u0437\u043c\u0435\u043d\u044f\u0442\u044c\u0441\u044f \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e \u0438\u0437\u0432\u043d\u0435.\n\n    \"\"\"\n\n    __slots__ = ('asset_id', 'quantity', 'average_cost')\n\n    def __init__(self, asset_id: str, quantity: Decimal, average_cost: Decimal) -&gt; None:\n        if quantity &lt; 0:\n            raise InvalidTransactionDataError('\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0430\u043a\u0442\u0438\u0432\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c')\n        if average_cost &lt; 0:\n            raise InvalidTransactionDataError('\u0421\u0440\u0435\u0434\u043d\u044f\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0439')\n\n        self.asset_id = asset_id\n        self.quantity = quantity\n        self.average_cost = average_cost\n\n    def __repr__(self) -&gt; str:\n        return (\n            f\"Holding(asset_id='{self.asset_id}', \"\n            f'quantity={self.quantity}, '\n            f'average_cost={self.average_cost})'\n        )\n</code></pre>"},{"location":"api/python/domain/domain/#-","title":"\u0411\u0438\u0437\u043d\u0435\u0441-\u043f\u0440\u0430\u0432\u0438\u043b\u0430","text":""},{"location":"api/python/domain/domain/#_4","title":"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439","text":"<p>\u0412\u0441\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u044f\u0442 \u0447\u0435\u0440\u0435\u0437 \u043c\u0435\u0442\u043e\u0434 <code>execute_transaction</code>, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0440\u0443\u0435\u0442 \u0441\u043e\u0431\u043b\u044e\u0434\u0435\u043d\u0438\u0435 \u0431\u0438\u0437\u043d\u0435\u0441-\u043f\u0440\u0430\u0432\u0438\u043b:</p> <ol> <li> <p>\u041f\u043e\u043a\u0443\u043f\u043a\u0430 \u0430\u043a\u0442\u0438\u0432\u0430 (BUY)</p> </li> <li> <p>\u0421\u043e\u0437\u0434\u0430\u0451\u0442 \u043d\u043e\u0432\u0443\u044e \u0438\u043b\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u0442 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0443\u044e \u043f\u043e\u0437\u0438\u0446\u0438\u044e</p> </li> <li>\u041f\u0435\u0440\u0435\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u0442 \u0441\u0440\u0435\u0434\u043d\u044e\u044e \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0430\u043a\u0442\u0438\u0432\u0430</li> <li> <p>\u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0435\u0442 \u043e\u0431\u0449\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0430\u043a\u0442\u0438\u0432\u043e\u0432</p> </li> <li> <p>\u041f\u0440\u043e\u0434\u0430\u0436\u0430 \u0430\u043a\u0442\u0438\u0432\u0430 (SELL)</p> </li> <li> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e\u0441\u0442\u044c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0430\u043a\u0442\u0438\u0432\u043e\u0432</p> </li> <li>\u0423\u043c\u0435\u043d\u044c\u0448\u0430\u0435\u0442 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0430\u043a\u0442\u0438\u0432\u043e\u0432 \u0432 \u043f\u043e\u0437\u0438\u0446\u0438\u0438</li> <li> <p>\u0423\u0434\u0430\u043b\u044f\u0435\u0442 \u043f\u043e\u0437\u0438\u0446\u0438\u044e \u043f\u0440\u0438 \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u0438 \u043d\u0443\u043b\u044f</p> </li> <li> <p>\u0414\u0438\u0432\u0438\u0434\u0435\u043d\u0434\u044b (DIVIDEND)</p> </li> <li>\u0424\u0438\u043a\u0441\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u043a\u0430\u043a \u0444\u0430\u043a\u0442</li> <li>\u041d\u0435 \u0432\u043b\u0438\u044f\u044e\u0442 \u043d\u0430 \u0441\u043e\u0441\u0442\u0430\u0432 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f</li> </ol>"},{"location":"api/python/domain/domain/#_5","title":"\u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f","text":"<p>\u0412\u0441\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0432\u0430\u043b\u0438\u0434\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u043d\u0430 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0431\u0438\u0437\u043d\u0435\u0441-\u043f\u0440\u0430\u0432\u0438\u043b\u0430\u043c:</p> <ul> <li>\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0430\u043a\u0442\u0438\u0432\u043e\u0432 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c</li> <li>\u0426\u0435\u043d\u0430 \u0437\u0430 \u0435\u0434\u0438\u043d\u0438\u0446\u0443 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0439</li> <li>\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043f\u0440\u043e\u0434\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u0430\u043a\u0442\u0438\u0432\u043e\u0432, \u0447\u0435\u043c \u0435\u0441\u0442\u044c \u0432 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u0435</li> <li>\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f \u0434\u043e\u043b\u0436\u043d\u0430 \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u044c\u0441\u044f \u043a \u0442\u043e\u043c\u0443 \u0436\u0435 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044e, \u043a \u043a\u043e\u0442\u043e\u0440\u043e\u043c\u0443 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f</li> </ul>"},{"location":"api/python/domain/domain/#_6","title":"\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":""},{"location":"api/python/domain/domain/#_7","title":"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f","text":"<pre><code>user_id = uuid.uuid4()\nportfolio = Portfolio(\n    user_id=user_id,\n    name=\"\u041c\u043e\u0439 \u043f\u0435\u0440\u0432\u044b\u0439 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044c\",\n    currency=\"RUB\"\n)\n</code></pre>"},{"location":"api/python/domain/domain/#_8","title":"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438","text":"<pre><code>try:\n    transaction = Transaction(\n        portfolio_id=portfolio.id,\n        asset_id=\"MOEX:SBER\",\n        transaction_type=TransactionType.BUY,\n        quantity=Decimal(\"10\"),\n        price_per_unit=Decimal(\"250.50\"),\n        total_amount=Decimal(\"2505.00\"),\n        executed_at=datetime.utcnow(),\n        currency=\"RUB\"\n    )\n\n    portfolio.execute_transaction(transaction)\nexcept InvalidTransactionDataError as e:\n    print(f\"\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438: {e}\")\n</code></pre>"},{"location":"api/python/domain/domain/#_9","title":"\u0418\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f","text":"<p>\u0414\u043e\u043c\u0435\u043d\u043d\u044b\u0439 \u0441\u043b\u043e\u0439 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043e\u0448\u0438\u0431\u043e\u043a \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0438:</p>"},{"location":"api/python/domain/domain/#src.domain.exceptions.InsufficientHoldingsError","title":"<code>InsufficientHoldingsError</code>","text":"<p>               Bases: <code>InvalidPortfolioOperationError</code></p> <p>\u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0430\u043a\u0446\u0438\u0439 \u0434\u043b\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043f\u0440\u043e\u0434\u0430\u0436\u0438.</p> Source code in <code>src/domain/exceptions.py</code> <pre><code>class InsufficientHoldingsError(InvalidPortfolioOperationError):\n    \"\"\"\u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0430\u043a\u0446\u0438\u0439 \u0434\u043b\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043f\u0440\u043e\u0434\u0430\u0436\u0438.\"\"\"\n\n    def __init__(self, asset_id: str, requested: float, available: float):\n        message = (\n            f\"\u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0430\u043a\u0446\u0438\u0439 \u0434\u043b\u044f \u043f\u0440\u043e\u0434\u0430\u0436\u0438 \u0430\u043a\u0442\u0438\u0432\u0430 '{asset_id}'. \"\n            f'\u0417\u0430\u043f\u0440\u043e\u0448\u0435\u043d\u043e: {requested}, \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e: {available}'\n        )\n        super().__init__(message, asset_id=asset_id)\n        self.requested = requested\n        self.available = available\n</code></pre>"},{"location":"api/python/domain/domain/#src.domain.exceptions.InvalidPortfolioOperationError","title":"<code>InvalidPortfolioOperationError</code>","text":"<p>               Bases: <code>PortfolioDomainError</code></p> <p>\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u043d\u0430\u0434 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u0435\u043c \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0430 \u0438\u0437-\u0437\u0430 \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u044f \u0431\u0438\u0437\u043d\u0435\u0441-\u043f\u0440\u0430\u0432\u0438\u043b.</p> Source code in <code>src/domain/exceptions.py</code> <pre><code>class InvalidPortfolioOperationError(PortfolioDomainError):\n    \"\"\"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u043d\u0430\u0434 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u0435\u043c \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0430 \u0438\u0437-\u0437\u0430 \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u044f \u0431\u0438\u0437\u043d\u0435\u0441-\u043f\u0440\u0430\u0432\u0438\u043b.\"\"\"\n\n    def __init__(self, message: str, asset_id: str | None = None):\n        self.asset_id = asset_id\n        super().__init__(message)\n</code></pre>"},{"location":"api/python/domain/domain/#src.domain.exceptions.InvalidTransactionDataError","title":"<code>InvalidTransactionDataError</code>","text":"<p>               Bases: <code>PortfolioDomainError</code></p> <p>\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 (\u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0446\u0435\u043d\u0430, \u043d\u0443\u043b\u0435\u0432\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0438 \u0442.\u0434.).</p> Source code in <code>src/domain/exceptions.py</code> <pre><code>class InvalidTransactionDataError(PortfolioDomainError):\n    \"\"\"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 (\u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0446\u0435\u043d\u0430, \u043d\u0443\u043b\u0435\u0432\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0438 \u0442.\u0434.).\"\"\"\n\n    pass\n</code></pre>"},{"location":"api/python/domain/domain/#src.domain.exceptions.PortfolioDomainError","title":"<code>PortfolioDomainError</code>","text":"<p>               Bases: <code>Exception</code></p> <p>\u0411\u0430\u0437\u043e\u0432\u043e\u0435 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u043e\u0448\u0438\u0431\u043e\u043a \u0432 \u0434\u043e\u043c\u0435\u043d\u0435 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f.</p> Source code in <code>src/domain/exceptions.py</code> <pre><code>class PortfolioDomainError(Exception):\n    \"\"\"\u0411\u0430\u0437\u043e\u0432\u043e\u0435 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u043e\u0448\u0438\u0431\u043e\u043a \u0432 \u0434\u043e\u043c\u0435\u043d\u0435 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f.\"\"\"\n\n    pass\n</code></pre>"},{"location":"api/python/domain/domain/#src.domain.exceptions.TransactionMismatchError","title":"<code>TransactionMismatchError</code>","text":"<p>               Bases: <code>PortfolioDomainError</code></p> <p>\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f \u043d\u0435 \u043f\u0440\u0438\u043d\u0430\u0434\u043b\u0435\u0436\u0438\u0442 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c\u0443 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044e.</p> Source code in <code>src/domain/exceptions.py</code> <pre><code>class TransactionMismatchError(PortfolioDomainError):\n    \"\"\"\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f \u043d\u0435 \u043f\u0440\u0438\u043d\u0430\u0434\u043b\u0435\u0436\u0438\u0442 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c\u0443 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044e.\"\"\"\n\n    pass\n</code></pre>"},{"location":"api/python/entity/models/","title":"\u041c\u043e\u0434\u0435\u043b\u0438 \u0434\u0430\u043d\u043d\u044b\u0445","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c <code>models</code> \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 Pydantic-\u043c\u043e\u0434\u0435\u043b\u0438 \u0434\u043b\u044f \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u0438 \u0438 \u0441\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u0432 API \u0438 \u0441\u0435\u0440\u0432\u0438\u0441\u043d\u043e\u043c \u0441\u043b\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f.</p>"},{"location":"api/python/entity/models/#_2","title":"\u041e\u0431\u0437\u043e\u0440","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043c\u043e\u0434\u0435\u043b\u0438 \u0434\u043b\u044f:</p> <ul> <li>\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f</li> <li>\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f</li> <li>\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438</li> </ul>"},{"location":"api/python/entity/models/#_3","title":"\u041c\u043e\u0434\u0435\u043b\u0438","text":""},{"location":"api/python/entity/models/#createportfolio","title":"CreatePortfolio","text":"<p>\u041c\u043e\u0434\u0435\u043b\u044c \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f.</p>"},{"location":"api/python/entity/models/#updateportfolio","title":"UpdatePortfolio","text":"<p>\u041c\u043e\u0434\u0435\u043b\u044c \u0434\u043b\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0433\u043e \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f.</p>"},{"location":"api/python/entity/models/#addtransaction","title":"AddTransaction","text":"<p>\u041c\u043e\u0434\u0435\u043b\u044c \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 \u0432 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044c.</p>"},{"location":"api/python/entity/models/#_4","title":"\u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u0438","text":"<ol> <li>\u0422\u0438\u043f\u044b \u0434\u0430\u043d\u043d\u044b\u0445</li> <li><code>UUID</code> \u0434\u043b\u044f \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u043e\u0432</li> <li><code>Decimal</code> \u0434\u043b\u044f \u0444\u0438\u043d\u0430\u043d\u0441\u043e\u0432\u044b\u0445 \u0432\u0435\u043b\u0438\u0447\u0438\u043d</li> <li> <p><code>datetime</code> \u0434\u043b\u044f \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u043c\u0435\u0442\u043e\u043a</p> </li> <li> <p>\u0412\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0435 \u0432\u0430\u043b\u0438\u0434\u0430\u0442\u043e\u0440\u044b</p> </li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0444\u043e\u0440\u043c\u0430\u0442\u0430 UUID</li> <li>\u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u0447\u0438\u0441\u043b\u043e\u0432\u044b\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0442\u0438\u043f\u043e\u0432 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439</li> </ol>"},{"location":"api/python/entity/models/#_5","title":"\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":""},{"location":"api/python/entity/models/#_6","title":"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f","text":"<pre><code>from uuid import uuid4\nfrom src.entity.models import CreatePortfolio\n\n# \u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438\nportfolio_data = CreatePortfolio(\n    user_id=uuid4(),\n    name=\"\u041c\u043e\u0439 \u0438\u043d\u0432\u0435\u0441\u0442\u0438\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044c\",\n    currency=\"USD\"\n)\n</code></pre>"},{"location":"api/python/entity/models/#_7","title":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438","text":"<pre><code>from decimal import Decimal\nfrom datetime import datetime, timezone\nfrom src.entity.models import AddTransaction\nfrom src.domain.enums import TransactionType\n\ntransaction = AddTransaction(\n    portfolio_id=uuid4(),\n    asset_id=\"AAPL\",\n    transaction_type=TransactionType.BUY,\n    quantity=Decimal(\"10\"),\n    price_per_unit=Decimal(\"150.50\"),\n    total_amount=Decimal(\"1505.00\"),\n    executed_at=datetime.now(timezone.utc),\n    currency=\"USD\"\n)\n</code></pre>"},{"location":"api/python/entity/models/#_8","title":"\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f","text":"<ul> <li>\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0445 \u043f\u043e\u043b\u0435\u0439 \u043d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0430</li> <li>\u041d\u0435\u0442 \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u0438 \u0431\u0438\u0437\u043d\u0435\u0441-\u043f\u0440\u0430\u0432\u0438\u043b (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u0432\u0430\u043b\u044e\u0442\u044b)</li> <li>\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0445 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0435\u0439</li> </ul>"},{"location":"api/python/entity/models/#_9","title":"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438","text":"<ol> <li>\u0414\u043b\u044f \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044f \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u0438 \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c <code>@validator</code> \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440 Pydantic</li> <li>\u0414\u043b\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u043e\u043b\u0435\u0439 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 <code>Field</code> \u0441 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435\u043c</li> <li>\u0414\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0411\u0414 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u0443\u0439\u0442\u0435 \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u043c\u043e\u0434\u0435\u043b\u0438</li> </ol>"},{"location":"api/python/entity/models/#_10","title":"\u0421\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b","text":"<ul> <li>\u0414\u043e\u043c\u0435\u043d\u043d\u044b\u0435 \u043c\u043e\u0434\u0435\u043b\u0438</li> <li>\u0420\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0439 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f</li> <li>\u0421\u0435\u0440\u0432\u0438\u0441\u043d\u044b\u0439 \u0441\u043b\u043e\u0439</li> </ul>"},{"location":"api/python/entrypoints/fastapi_app/","title":"FastAPI \u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c <code>fastapi_app</code> \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0444\u0430\u0431\u0440\u0438\u043a\u0443 \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0430 FastAPI \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u042d\u0442\u043e \u043e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0442\u043e\u0447\u043a\u0430 \u0432\u0445\u043e\u0434\u0430 \u0432\u0435\u0431-\u0441\u0435\u0440\u0432\u0438\u0441\u0430.</p>"},{"location":"api/python/entrypoints/fastapi_app/#_1","title":"\u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438","text":"<ul> <li>\u0424\u0430\u0431\u0440\u0438\u0447\u043d\u044b\u0439 \u043c\u0435\u0442\u043e\u0434 \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f</li> <li>\u0426\u0435\u043d\u0442\u0440\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f</li> <li>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u0436\u0438\u0437\u043d\u0435\u043d\u043d\u043e\u0433\u043e \u0446\u0438\u043a\u043b\u0430 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f</li> <li>\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f API</li> <li>\u041c\u043e\u0434\u0443\u043b\u044c\u043d\u0430\u044f \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430</li> </ul>"},{"location":"api/python/entrypoints/fastapi_app/#api","title":"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f API","text":""},{"location":"api/python/entrypoints/fastapi_app/#create_app","title":"create_app","text":"<p>\u0424\u0430\u0431\u0440\u0438\u0447\u043d\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0430 FastAPI.</p> Source code in <code>src/entrypoints/fastapi_app.py</code> <pre><code>def create_app() -&gt; FastAPI:\n    app = FastAPI(\n        title='eebook-portfolio',\n        description='API \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f\u043c\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 eebook',\n        version='0.1.0',\n        docs_url='/api/docs',\n        redoc_url='/api/redoc',\n        openapi_url='/api/openapi.json',\n        lifespan=lifespan,\n    )\n\n    app.include_router(endpoints.router)\n\n    return app\n</code></pre>"},{"location":"api/python/entrypoints/fastapi_app/#_2","title":"\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":""},{"location":"api/python/entrypoints/fastapi_app/#_3","title":"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f","text":"<pre><code>from src.entrypoints.fastapi_app import create_app\n\n# \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0430 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f\napp = create_app()\n\n# \u0417\u0430\u043f\u0443\u0441\u043a \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e uvicorn (\u0435\u0441\u043b\u0438 \u0444\u0430\u0439\u043b \u0437\u0430\u043f\u0443\u0449\u0435\u043d \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e)\nif __name__ == \"__main__\":\n    import uvicorn\n    uvicorn.run(\"src.entrypoints.fastapi_app:app\", host=\"0.0.0.0\", port=8000, reload=True)\n</code></pre>"},{"location":"api/python/entrypoints/fastapi_app/#_4","title":"\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f","text":"<p>\u041f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043c\u043e\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b:</p> <pre><code>app = FastAPI(\n    title=\"eebook\",\n    description=\"API \u0443\u0447\u0435\u0442\u0430 \u0438\u043d\u0432\u0435\u0441\u0442\u0438\u0446\u0438\u0439 eebook\",\n    version=\"0.1.0\",\n    docs_url=\"/api/docs\",\n    redoc_url=\"/api/redoc\",\n    openapi_url=\"/api/openapi.json\",\n    lifespan=lifespan\n)\n</code></pre>"},{"location":"api/python/entrypoints/api/endpoints/","title":"API Endpoints","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c <code>endpoints.py</code> \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 API-\u044d\u043d\u0434\u043f\u043e\u0438\u043d\u0442\u044b \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c FastAPI. \u042d\u0442\u043e\u0442 \u0444\u0430\u0439\u043b \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0442\u043e\u0447\u043a\u043e\u0439 \u0432\u0445\u043e\u0434\u0430 \u0434\u043b\u044f \u0432\u0441\u0435\u0445 HTTP-\u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432.</p>"},{"location":"api/python/entrypoints/api/endpoints/#api","title":"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f API","text":"<p>API \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0445 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u043e\u0432 FastAPI:</p>"},{"location":"api/python/entrypoints/api/endpoints/#swagger-ui","title":"Swagger UI","text":"<p>\u0418\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u0430\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443: <pre><code>/docs\n</code></pre></p> <p>\u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438: - \u0418\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0435 \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 API - \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 - \u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0438 \u043e\u0442\u0432\u0435\u0442\u043e\u0432 - \u041f\u043e\u0434\u0441\u0432\u0435\u0442\u043a\u0430 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\u0430</p>"},{"location":"api/python/entrypoints/api/endpoints/#redoc","title":"ReDoc","text":"<p>\u0410\u043b\u044c\u0442\u0435\u0440\u043d\u0430\u0442\u0438\u0432\u043d\u0430\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443: <pre><code>/redoc\n</code></pre></p> <p>\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430: - \u0427\u0438\u0441\u0442\u044b\u0439 \u0438 \u043f\u043e\u043d\u044f\u0442\u043d\u044b\u0439 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 - \u0423\u0434\u043e\u0431\u043d\u0430\u044f \u043d\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u044f - \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u0438\u0437 OpenAPI \u0441\u0445\u0435\u043c\u044b</p>"},{"location":"api/python/entrypoints/api/endpoints/#_1","title":"\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u043c\u043e\u0434\u0443\u043b\u044f","text":"<ul> <li>\u0420\u043e\u0443\u0442\u0435\u0440: \u0412\u0441\u0435 \u044d\u043d\u0434\u043f\u043e\u0438\u043d\u0442\u044b \u0441\u0433\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u043f\u043e\u0434 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043e\u043c <code>/eebook-users</code></li> <li>\u0417\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438: \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0432\u043d\u0435\u0434\u0440\u0435\u043d\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439 FastAPI</li> <li>\u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f: \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0438 \u043e\u0442\u0432\u0435\u0442\u043e\u0432</li> </ul>"},{"location":"api/python/entrypoints/api/endpoints/#_2","title":"\u041f\u0440\u0438\u043c\u0435\u0440 \u044d\u043d\u0434\u043f\u043e\u0438\u043d\u0442\u0430","text":"<pre><code>@router.get('/health')\nasync def health(settings: Settings = Depends(get_settings)):\n    return {\n        'status': 'ok',\n        'database': 'connected' if settings.POSTGRES_HOST else 'disconnected',\n    }\n</code></pre>"},{"location":"api/python/entrypoints/api/endpoints/#_3","title":"\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f","text":"<p>\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435: - \u0410\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u0439 \u0442\u0438\u043f\u043e\u0432 - Docstrings - Pydantic \u043c\u043e\u0434\u0435\u043b\u0435\u0439 - \u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u044d\u043d\u0434\u043f\u043e\u0438\u043d\u0442\u043e\u0432</p>"},{"location":"api/python/infrastructure/lifespan/","title":"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0436\u0438\u0437\u043d\u0435\u043d\u043d\u044b\u043c \u0446\u0438\u043a\u043b\u043e\u043c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c <code>lifespan</code> \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0436\u0438\u0437\u043d\u0435\u043d\u043d\u044b\u043c \u0446\u0438\u043a\u043b\u043e\u043c FastAPI \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044f \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0443\u044e \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0438 \u043e\u0441\u0432\u043e\u0431\u043e\u0436\u0434\u0435\u043d\u0438\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432.</p>"},{"location":"api/python/infrastructure/lifespan/#_2","title":"\u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438","text":"<ul> <li>\u0410\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e\u0435 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0436\u0438\u0437\u043d\u0435\u043d\u043d\u044b\u043c \u0446\u0438\u043a\u043b\u043e\u043c</li> <li>\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u0430\u044f \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0438 \u043e\u0441\u0432\u043e\u0431\u043e\u0436\u0434\u0435\u043d\u0438\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432</li> <li>\u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0441 \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439 \u0431\u0443\u0442\u0441\u0442\u0440\u0430\u043f\u043f\u0438\u043d\u0433\u0430</li> <li>\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a \u043f\u0440\u0438 \u0441\u0442\u0430\u0440\u0442\u0435 \u0438 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u0438</li> </ul>"},{"location":"api/python/infrastructure/lifespan/#api","title":"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f API","text":""},{"location":"api/python/infrastructure/lifespan/#lifespan","title":"lifespan","text":"<p>\u0410\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u0439 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u044b\u0439 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0436\u0438\u0437\u043d\u0435\u043d\u043d\u044b\u043c \u0446\u0438\u043a\u043b\u043e\u043c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f.</p> Source code in <code>src/infrastructure/lifespan.py</code> <pre><code>@asynccontextmanager\nasync def lifespan(app: FastAPI) -&gt; AsyncIterator[None]:\n    try:\n        await bootstrap()\n        yield\n    finally:\n        engine = get_engine()\n        await engine.dispose()\n</code></pre>"},{"location":"api/python/infrastructure/lifespan/#_3","title":"\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":""},{"location":"api/python/infrastructure/lifespan/#fastapi","title":"\u0411\u0430\u0437\u043e\u0432\u043e\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0441 FastAPI","text":"<pre><code>from fastapi import FastAPI\nfrom src.infrastructure.lifespan import lifespan\n\n# \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0441 \u043a\u0430\u0441\u0442\u043e\u043c\u043d\u044b\u043c \u0436\u0438\u0437\u043d\u0435\u043d\u043d\u044b\u043c \u0446\u0438\u043a\u043b\u043e\u043c\napp = FastAPI(lifespan=lifespan)\n\n# \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043e\u0432...\n@app.get(\"/\")\nasync def root():\n    return {\"message\": \"\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442\"}\n</code></pre>"},{"location":"api/python/infrastructure/lifespan/#_4","title":"\u041a\u0430\u0441\u0442\u043e\u043c\u0438\u0437\u0430\u0446\u0438\u044f \u0436\u0438\u0437\u043d\u0435\u043d\u043d\u043e\u0433\u043e \u0446\u0438\u043a\u043b\u0430","text":"<pre><code>from contextlib import asynccontextmanager\nfrom fastapi import FastAPI\nfrom src.infrastructure.lifespan import lifespan as base_lifespan\n\n@asynccontextmanager\nasync def custom_lifespan(app: FastAPI):\n    # \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0435\u0440\u0435\u0434 \u0437\u0430\u043f\u0443\u0441\u043a\u043e\u043c\n    print(\"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f...\")\n\n    # \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u0437\u043e\u0432\u043e\u0433\u043e \u0436\u0438\u0437\u043d\u0435\u043d\u043d\u043e\u0433\u043e \u0446\u0438\u043a\u043b\u0430\n    async with base_lifespan(app) as manager:\n        # \u041a\u043e\u0434 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u043b\u0435 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f\n        print(\"\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0433\u043e\u0442\u043e\u0432\u043e \u043a \u0440\u0430\u0431\u043e\u0442\u0435\")\n        try:\n            yield manager\n        finally:\n            # \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043e\u0447\u0438\u0441\u0442\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u0438\n            print(\"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043e\u0447\u0438\u0441\u0442\u043a\u0430...\")\n\napp = FastAPI(lifespan=custom_lifespan)\n</code></pre>"},{"location":"api/python/infrastructure/database/engine/","title":"\u0414\u0432\u0438\u0436\u043e\u043a \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c <code>engine</code> \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u043c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435\u043c \u043a \u0431\u0430\u0437\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c SQLAlchemy.</p>"},{"location":"api/python/infrastructure/database/engine/#_2","title":"\u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438","text":"<ul> <li>\u041b\u0435\u043d\u0438\u0432\u0430\u044f \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0434\u0432\u0438\u0436\u043a\u0430 \u0411\u0414</li> <li>\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0443\u043b\u043e\u043c \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439</li> <li>\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f</li> <li>\u041a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0444\u0430\u0431\u0440\u0438\u043a\u0438 \u0441\u0435\u0441\u0441\u0438\u0439</li> <li>\u0410\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u0439 API</li> </ul>"},{"location":"api/python/infrastructure/database/engine/#api","title":"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f API","text":""},{"location":"api/python/infrastructure/database/engine/#get_engine","title":"get_engine","text":"<p>\u0424\u0430\u0431\u0440\u0438\u0447\u043d\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0438 \u043a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e\u0433\u043e \u0434\u0432\u0438\u0436\u043a\u0430 SQLAlchemy.</p> <p>\u041b\u0435\u043d\u0438\u0432\u0430\u044f \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f engine. \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u044b \u0434\u043e \u0432\u044b\u0437\u043e\u0432\u0430.</p> <p>Returns:</p> Name Type Description <code>AsyncEngine</code> <code>AsyncEngine</code> <p>\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u0439 \u0434\u0432\u0438\u0436\u043e\u043a SQLAlchemy</p> <p>Raises:</p> Type Description <code>DatabaseConnectionError</code> <p>\u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0411\u0414</p> Source code in <code>src/infrastructure/database/engine.py</code> <pre><code>@lru_cache\ndef get_engine() -&gt; AsyncEngine:\n    \"\"\"\u041b\u0435\u043d\u0438\u0432\u0430\u044f \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f engine. \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u044b \u0434\u043e \u0432\u044b\u0437\u043e\u0432\u0430.\n\n    Returns:\n        AsyncEngine: \u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u0439 \u0434\u0432\u0438\u0436\u043e\u043a SQLAlchemy\n\n    Raises:\n        DatabaseConnectionError: \u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0411\u0414\n\n    \"\"\"\n    settings = get_settings()\n\n    try:\n        engine = create_async_engine(\n            settings.postgres_uri,\n            pool_size=5,\n            max_overflow=10,\n            pool_timeout=30,\n            pool_pre_ping=True,\n            pool_recycle=300,\n            connect_args={'command_timeout': 10},\n        )\n        logger.info('\u0410\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u0439 \u0434\u0432\u0438\u0436\u043e\u043a \u0411\u0414 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d')\n        return engine\n\n    except sa_exceptions.TimeoutError as e:\n        logger.exception('\u0422\u0430\u0439\u043c\u0430\u0443\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0411\u0414')\n        raise DatabaseTimeoutError(f'\u0422\u0430\u0439\u043c\u0430\u0443\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0411\u0414: {str(e)}') from e\n    except sa_exceptions.ArgumentError as e:\n        logger.exception('\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0411\u0414:')\n        raise DatabaseArgumentError(f'\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0411\u0414: {str(e)}') from e\n    except sa_exceptions.SQLAlchemyError as e:\n        logger.exception('\u041e\u0448\u0438\u0431\u043a\u0430 SQLAlchemy \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0434\u0432\u0438\u0436\u043a\u0430')\n        raise DatabaseConnectionError(f'\u041e\u0448\u0438\u0431\u043a\u0430 SQLAlchemy \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0434\u0432\u0438\u0436\u043a\u0430: {str(e)}') from e\n    except Exception as e:\n        error_msg = f'\u041d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0434\u0432\u0438\u0436\u043a\u0430 \u0411\u0414: {str(e)}'\n        logger.critical(error_msg, exc_info=True)\n        raise DatabaseConnectionError(error_msg) from e\n</code></pre>"},{"location":"api/python/infrastructure/database/engine/#get_session_factory","title":"get_session_factory","text":"<p>\u0424\u0430\u0431\u0440\u0438\u043a\u0430 \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u0445 \u0441\u0435\u0441\u0441\u0438\u0439 \u0441 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c\u0438 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e.</p> <p>\u041b\u0435\u043d\u0438\u0432\u0430\u044f \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e\u0439 session factory.</p> Source code in <code>src/infrastructure/database/engine.py</code> <pre><code>@lru_cache\ndef get_session_factory() -&gt; async_sessionmaker[AsyncSession]:\n    \"\"\"\u041b\u0435\u043d\u0438\u0432\u0430\u044f \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e\u0439 session factory.\"\"\"\n    engine = get_engine()\n    return async_sessionmaker(\n        bind=engine,\n        expire_on_commit=False,\n    )  # type: ignore\n</code></pre>"},{"location":"api/python/infrastructure/database/engine/#_3","title":"\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":""},{"location":"api/python/infrastructure/database/engine/#_4","title":"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0434\u0432\u0438\u0436\u043a\u0430 \u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0441\u0435\u0441\u0441\u0438\u0438","text":"<pre><code>from src.infrastructure.database.engine import get_engine, get_session_factory\n\n# \u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0434\u0432\u0438\u0436\u043a\u0430 (\u043a\u044d\u0448\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u0438 \u043f\u0435\u0440\u0432\u043e\u043c \u0432\u044b\u0437\u043e\u0432\u0435)\nengine = get_engine()\n\n# \u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0444\u0430\u0431\u0440\u0438\u043a\u0438 \u0441\u0435\u0441\u0441\u0438\u0439 (\u043a\u044d\u0448\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u0438 \u043f\u0435\u0440\u0432\u043e\u043c \u0432\u044b\u0437\u043e\u0432\u0435)\nsession_factory = get_session_factory()\n\n# \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0441\u0435\u0441\u0441\u0438\u0438\nasync with session_factory() as session:\n    # \u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0431\u0430\u0437\u043e\u0439 \u0434\u0430\u043d\u043d\u044b\u0445\n    result = await session.execute(\"SELECT 1\")\n    print(await result.scalar())\n</code></pre>"},{"location":"api/python/infrastructure/database/migrations/migrations/","title":"\u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u0439 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c <code>migrations</code> \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0432\u0435\u0440\u0441\u0438\u044f\u043c\u0438 \u0441\u0445\u0435\u043c\u044b \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c Alembic.</p>"},{"location":"api/python/infrastructure/database/migrations/migrations/#_2","title":"\u041e\u0431\u0437\u043e\u0440","text":"<p>\u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u0439 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442:</p> <ul> <li>\u0423\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f\u043c\u0438 \u0441\u0445\u0435\u043c\u044b \u0411\u0414</li> <li>\u041e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439</li> <li>\u041f\u0440\u0438\u043c\u0435\u043d\u044f\u0442\u044c \u0438 \u043e\u0442\u043a\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u0438</li> <li>\u0420\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0441 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u043c\u0438 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f\u043c\u0438</li> </ul>"},{"location":"api/python/infrastructure/database/migrations/migrations/#_3","title":"\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430","text":"<pre><code>migrations/\n\u251c\u2500\u2500 env.py          # \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0444\u0430\u0439\u043b \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438\n\u251c\u2500\u2500 script.py.mako  # \u0428\u0430\u0431\u043b\u043e\u043d \u0434\u043b\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u0439\n\u2514\u2500\u2500 versions/       # \u0424\u0430\u0439\u043b\u044b \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u0439\n</code></pre>"},{"location":"api/python/infrastructure/database/migrations/migrations/#_4","title":"\u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b","text":""},{"location":"api/python/infrastructure/database/migrations/migrations/#envpy","title":"env.py","text":"<p>\u0413\u043b\u0430\u0432\u043d\u044b\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u0439. \u0421\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043b\u043e\u0433\u0438\u043a\u0443 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0411\u0414 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u0439.</p>"},{"location":"api/python/infrastructure/database/migrations/migrations/#src.infrastructure.database.migrations.env.get_sync_uri","title":"<code>get_sync_uri()</code>","text":"<p>\u041e\u0431\u0435\u0440\u0442\u043a\u0430 \u0434\u043b\u044f \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u0438, \u0447\u0442\u043e\u0431\u044b \u043c\u043e\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u0432 sync-\u043a\u043e\u0434\u0435.</p> Source code in <code>src/infrastructure/database/migrations/env.py</code> <pre><code>def get_sync_uri() -&gt; str:\n    \"\"\"\u041e\u0431\u0435\u0440\u0442\u043a\u0430 \u0434\u043b\u044f \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u0438, \u0447\u0442\u043e\u0431\u044b \u043c\u043e\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u0432 sync-\u043a\u043e\u0434\u0435.\"\"\"\n    return asyncio.get_event_loop().run_until_complete(init_settings_and_get_uri())\n</code></pre>"},{"location":"api/python/infrastructure/database/migrations/migrations/#src.infrastructure.database.migrations.env.init_settings_and_get_uri","title":"<code>init_settings_and_get_uri()</code>  <code>async</code>","text":"<p>\u041f\u043e\u0434\u0433\u0440\u0443\u0436\u0430\u0435\u0442 \u0441\u0435\u043a\u0440\u0435\u0442\u044b \u0438\u0437 Vault \u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 PostgreSQL URI.</p> Source code in <code>src/infrastructure/database/migrations/env.py</code> <pre><code>async def init_settings_and_get_uri() -&gt; str:\n    \"\"\"\u041f\u043e\u0434\u0433\u0440\u0443\u0436\u0430\u0435\u0442 \u0441\u0435\u043a\u0440\u0435\u0442\u044b \u0438\u0437 Vault \u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 PostgreSQL URI.\"\"\"\n    loader = SettingsLoader()\n    await loader.load()\n    settings = get_settings()\n    return settings.postgres_uri.replace('+asyncpg', '')\n</code></pre>"},{"location":"api/python/infrastructure/database/migrations/migrations/#scriptpymako","title":"script.py.mako","text":"<p>\u0428\u0430\u0431\u043b\u043e\u043d \u0434\u043b\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u043d\u043e\u0432\u044b\u0445 \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u0439. \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443 \u0438 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0444\u0430\u0439\u043b\u043e\u0432 \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u0439.</p>"},{"location":"api/python/infrastructure/database/migrations/migrations/#_5","title":"\u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u044f\u043c\u0438","text":""},{"location":"api/python/infrastructure/database/migrations/migrations/#_6","title":"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0439 \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u0438","text":"<pre><code>alembic revision -m \"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439\"\n</code></pre>"},{"location":"api/python/infrastructure/database/migrations/migrations/#_7","title":"\u041f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u0439","text":"<pre><code># \u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0432\u0441\u0435 \u043d\u0435\u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0451\u043d\u043d\u044b\u0435 \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u0438\nalembic upgrade head\n\n# \u041e\u0442\u043a\u0430\u0442 \u043d\u0430 \u043e\u0434\u043d\u0443 \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u044e\nalembic downgrade -1\n\n# \u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u0443\u044e \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u044e\nalembic upgrade &lt;revision&gt;\n</code></pre>"},{"location":"api/python/infrastructure/database/migrations/migrations/#_8","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f","text":"<pre><code># \u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0443\u044e \u0440\u0435\u0432\u0438\u0437\u0438\u044e\nalembic current\n\n# \u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u0439\nalembic history\n\n# \u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043d\u0435\u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d\u043d\u044b\u0435 \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u0438\nalembic heads\n</code></pre>"},{"location":"api/python/infrastructure/database/migrations/migrations/#_9","title":"\u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438","text":"<ol> <li>\u0410\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u0430\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a</li> <li>\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432 \u0438\u0437 Vault</li> <li> <p>\u0410\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 URI \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f</p> </li> <li> <p>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u043e\u0444\u0444\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c\u0430</p> </li> <li>\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u044b \u0431\u0435\u0437 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0411\u0414</li> <li> <p>\u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f SQL-\u0441\u043a\u0440\u0438\u043f\u0442\u043e\u0432</p> </li> <li> <p>\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c</p> </li> <li>\u0427\u0442\u0435\u043d\u0438\u0435 \u0443\u0447\u0451\u0442\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438\u0437 \u0437\u0430\u0449\u0438\u0449\u0451\u043d\u043d\u043e\u0433\u043e \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430</li> <li>\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u0445\u0430\u0440\u0434\u043a\u043e\u0434\u0430 \u0447\u0443\u0432\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445</li> </ol>"},{"location":"api/python/infrastructure/database/migrations/migrations/#_10","title":"\u041f\u0440\u0438\u043c\u0435\u0440 \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u0438","text":"<pre><code>\"\"\"create_user_table\n\nRevision ID: 123456789abc\nRevises: \nCreate Date: 2023-01-01 12:00:00.000000\n\n\"\"\"\nfrom alembic import op\nimport sqlalchemy as sa\n\n\ndef upgrade():\n    op.create_table(\n        'users',\n        sa.Column('id', sa.UUID(), nullable=False),\n        sa.Column('email', sa.String(), nullable=False),\n        sa.Column('hashed_password', sa.String(), nullable=False),\n        sa.PrimaryKeyConstraint('id')\n    )\n\n\ndef downgrade():\n    op.drop_table('users')\n</code></pre>"},{"location":"api/python/infrastructure/database/migrations/migrations/#_11","title":"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438","text":"<ol> <li>\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u0439</li> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043f\u043e\u043d\u044f\u0442\u043d\u044b\u0435 \u043e\u043f\u0438\u0441\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0438\u043c\u0435\u043d\u0430</li> <li> <p>\u0423\u043a\u0430\u0437\u044b\u0432\u0430\u0439\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0437\u0430\u0434\u0430\u0447\u0438 \u0438\u0437 \u0442\u0440\u0435\u043a\u0435\u0440\u0430 (\u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c)</p> </li> <li> <p>\u0420\u0430\u0431\u043e\u0442\u0430 \u0432 \u043a\u043e\u043c\u0430\u043d\u0434\u0435</p> </li> <li>\u0421\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0438\u0440\u0443\u0439\u0442\u0435 \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u0438 \u0447\u0435\u0440\u0435\u0437 \u0441\u0438\u0441\u0442\u0435\u043c\u0443 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044f \u0432\u0435\u0440\u0441\u0438\u0439</li> <li> <p>\u0420\u0435\u0448\u0430\u0439\u0442\u0435 \u043a\u043e\u043d\u0444\u043b\u0438\u043a\u0442\u044b \u043d\u0435\u043c\u0435\u0434\u043b\u0435\u043d\u043d\u043e</p> </li> <li> <p>\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c</p> </li> <li>\u041d\u0435 \u0445\u0440\u0430\u043d\u0438\u0442\u0435 \u0447\u0443\u0432\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u044f\u0445</li> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438</li> </ol>"},{"location":"api/python/infrastructure/database/migrations/migrations/#_12","title":"\u041e\u0442\u043b\u0430\u0434\u043a\u0430","text":"<p>\u0414\u043b\u044f \u043e\u0442\u043b\u0430\u0434\u043a\u0438 \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u0439 \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c:</p> <pre><code># \u0412\u044b\u0432\u043e\u0434 SQL \u0431\u0435\u0437 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f\nalembic upgrade --sql\n\n# \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0435 \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\nalembic -x debug=true upgrade head\n</code></pre>"},{"location":"api/python/infrastructure/database/migrations/migrations/#_13","title":"\u0421\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b","text":"<ul> <li>\u0414\u0432\u0438\u0436\u043e\u043a \u0411\u0414</li> <li>ORM-\u043c\u043e\u0434\u0435\u043b\u0438</li> <li>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f</li> </ul>"},{"location":"api/python/infrastructure/logging/logging/","title":"\u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c <code>logging</code> \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0446\u0435\u043d\u0442\u0440\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u0443\u044e \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u043b\u044f \u0432\u0441\u0435\u0433\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f.</p>"},{"location":"api/python/infrastructure/logging/logging/#_2","title":"\u041e\u0431\u0437\u043e\u0440","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442:</p> <ul> <li>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0443 \u0444\u043e\u0440\u043c\u0430\u0442\u0430 \u043b\u043e\u0433\u043e\u0432</li> <li>\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0443\u0440\u043e\u0432\u043d\u0435\u043c \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</li> <li>\u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044e \u0441 Uvicorn</li> <li>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443 \u0432\u044b\u0432\u043e\u0434\u0430 \u0432 \u043a\u043e\u043d\u0441\u043e\u043b\u044c</li> </ul>"},{"location":"api/python/infrastructure/logging/logging/#_3","title":"\u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b","text":""},{"location":"api/python/infrastructure/logging/logging/#configure_logging","title":"configure_logging","text":"<p>\u0424\u0443\u043d\u043a\u0446\u0438\u044f \u0434\u043b\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043a\u043e\u0440\u043d\u0435\u0432\u043e\u0433\u043e \u043b\u043e\u0433\u0433\u0435\u0440\u0430 \u0438 \u043b\u043e\u0433\u0433\u0435\u0440\u043e\u0432 Uvicorn.</p> <p>\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043b\u043e\u0433\u0433\u0435\u0440\u0430 \u0434\u043b\u044f \u0432\u0441\u0435\u0433\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f.</p> Source code in <code>src/infrastructure/logging/logger.py</code> <pre><code>def configure_logging(\n    level: Literal['DEBUG', 'INFO', 'WARNING', 'ERROR', 'CRITICAL'] = 'INFO',\n) -&gt; None:\n    \"\"\"\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043b\u043e\u0433\u0433\u0435\u0440\u0430 \u0434\u043b\u044f \u0432\u0441\u0435\u0433\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f.\"\"\"\n    fmt = '[{asctime}] {levelname} {name}: {message}'\n    formatter = logging.Formatter(fmt, style='{', datefmt='%Y-%m-%d %H:%M:%S')\n\n    console_handler = logging.StreamHandler(sys.stdout)\n    console_handler.setFormatter(formatter)\n\n    root_logger = logging.getLogger()\n    root_logger.setLevel(level)\n\n    root_logger.handlers.clear()\n    root_logger.addHandler(console_handler)\n\n    for uv_logger_name in ('uvicorn', 'uvicorn.error', 'uvicorn.access'):\n        uv_logger = logging.getLogger(uv_logger_name)\n        uv_logger.handlers.clear()\n        uv_logger.addHandler(console_handler)\n        uv_logger.setLevel(level)\n</code></pre>"},{"location":"api/python/infrastructure/logging/logging/#_4","title":"\u0424\u043e\u0440\u043c\u0430\u0442 \u043b\u043e\u0433\u043e\u0432","text":"<p>\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0444\u043e\u0440\u043c\u0430\u0442: <pre><code>[2023-11-10 14:15:23] INFO module.name: \u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043b\u043e\u0433\u0430\n</code></pre></p> <p>\u0413\u0434\u0435:</p> <ul> <li><code>2023-11-10 14:15:23</code> - \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f \u043c\u0435\u0442\u043a\u0430</li> <li><code>INFO</code> - \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</li> <li><code>module.name</code> - \u0438\u043c\u044f \u043c\u043e\u0434\u0443\u043b\u044f, \u0441\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0435 \u043b\u043e\u0433\u0433\u0435\u0440\u043e\u043c</li> <li><code>\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043b\u043e\u0433\u0430</code> - \u0442\u0435\u043a\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f</li> </ul>"},{"location":"api/python/infrastructure/logging/logging/#_5","title":"\u0423\u0440\u043e\u0432\u043d\u0438 \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f","text":"<p>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0435 \u0443\u0440\u043e\u0432\u043d\u0438 \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f Python:</p> <ul> <li><code>DEBUG</code> - \u043e\u0442\u043b\u0430\u0434\u043e\u0447\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f</li> <li><code>INFO</code> - \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f</li> <li><code>WARNING</code> - \u043f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044f</li> <li><code>ERROR</code> - \u043e\u0448\u0438\u0431\u043a\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f</li> <li><code>CRITICAL</code> - \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043e\u0448\u0438\u0431\u043a\u0438</li> </ul>"},{"location":"api/python/infrastructure/logging/logging/#_6","title":"\u041f\u0440\u0438\u043c\u0435\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":"<pre><code>from src.infrastructure.logging.logger import configure_logging\n\n# \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0441 \u0443\u0440\u043e\u0432\u043d\u0435\u043c DEBUG\nconfigure_logging(level='DEBUG')\n\n# \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0432 \u043a\u043e\u0434\u0435\nimport logging\nlogger = logging.getLogger(__name__)\n\ndef some_function():\n    logger.debug('\u041e\u0442\u043b\u0430\u0434\u043e\u0447\u043d\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435')\n    logger.info('\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435')\n    logger.warning('\u041f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435')\n    logger.error('\u041e\u0448\u0438\u0431\u043a\u0430')\n    logger.critical('\u041a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430')\n</code></pre>"},{"location":"api/python/infrastructure/logging/logging/#uvicorn","title":"\u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0441 Uvicorn","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442 \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043b\u044f Uvicorn, \u0447\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442:</p> <ul> <li>\u0423\u043d\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0444\u043e\u0440\u043c\u0430\u0442 \u043b\u043e\u0433\u043e\u0432</li> <li>\u0423\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0443\u0440\u043e\u0432\u043d\u0435\u043c \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u043b\u044f \u0432\u0441\u0435\u0433\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f</li> <li>\u0418\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u0434\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043b\u043e\u0433\u043e\u0432</li> </ul>"},{"location":"api/python/infrastructure/logging/logging/#_7","title":"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438","text":"<ol> <li>\u0412\u044b\u0431\u043e\u0440 \u0443\u0440\u043e\u0432\u043d\u044f \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</li> <li><code>DEBUG</code> - \u0434\u043b\u044f \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438</li> <li><code>INFO</code> - \u0434\u043b\u044f \u043f\u0440\u043e\u0434\u0430\u043a\u0448\u043d-\u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f</li> <li> <p><code>WARNING</code> \u0438 \u0432\u044b\u0448\u0435 - \u0434\u043b\u044f \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0430 \u043e\u0448\u0438\u0431\u043e\u043a</p> </li> <li> <p>\u0418\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043b\u043e\u0433\u0433\u0435\u0440\u043e\u0432    \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 <code>__name__</code> \u0434\u043b\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0438\u043c\u0435\u043d\u0438 \u043c\u043e\u0434\u0443\u043b\u044f:    <pre><code>logger = logging.getLogger(__name__)\n</code></pre></p> </li> <li> <p>\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043b\u043e\u0433\u0438    \u0414\u043b\u044f \u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0435\u0432 \u043c\u043e\u0436\u043d\u043e \u0440\u0430\u0441\u0448\u0438\u0440\u0438\u0442\u044c \u0444\u043e\u0440\u043c\u0430\u0442 \u043b\u043e\u0433\u043e\u0432, \u0434\u043e\u0431\u0430\u0432\u0438\u0432 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e:    <pre><code>logger.info('\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430', extra={\n    'user_id': user_id,\n    'request_id': request_id\n})\n</code></pre></p> </li> </ol>"},{"location":"api/python/infrastructure/logging/logging/#_8","title":"\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438","text":"<p>\u0414\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432 (\u0444\u0430\u0439\u043b\u044b, \u0432\u043d\u0435\u0448\u043d\u0438\u0435 \u0441\u0435\u0440\u0432\u0438\u0441\u044b) \u043c\u043e\u0436\u043d\u043e \u043c\u043e\u0434\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>configure_logging</code>:</p> <pre><code>def configure_logging(level='INFO'):\n    # \u0421\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0430\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f...\n\n    # \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u043e\u0432\u043e\u0433\u043e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\n    file_handler = logging.FileHandler('app.log')\n    file_handler.setFormatter(formatter)\n    root_logger.addHandler(file_handler)\n</code></pre>"},{"location":"api/python/infrastructure/logging/logging/#_9","title":"\u0421\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b","text":"<ul> <li>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f</li> <li>\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a</li> <li>\u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433</li> </ul>"},{"location":"api/python/service_layer/dependencies/","title":"\u0417\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u0441\u0435\u0440\u0432\u0438\u0441\u043d\u043e\u0433\u043e \u0441\u043b\u043e\u044f","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c <code>dependencies</code> \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0444\u0430\u0431\u0440\u0438\u043a\u0438 \u0438 \u043f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440\u044b \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439 \u0434\u043b\u044f \u0441\u0435\u0440\u0432\u0438\u0441\u043d\u043e\u0433\u043e \u0441\u043b\u043e\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u043f\u0430\u0442\u0442\u0435\u0440\u043d \u0432\u043d\u0435\u0434\u0440\u0435\u043d\u0438\u044f \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439.</p>"},{"location":"api/python/service_layer/dependencies/#_2","title":"\u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438","text":"<ul> <li>\u041a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0447\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0445 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439</li> <li>\u0410\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u0430\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439</li> <li>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u0435\u0434\u0438\u043d\u0438\u0446\u044b \u0440\u0430\u0431\u043e\u0442\u044b (Unit of Work)</li> <li>\u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0441 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f\u043c\u0438 \u0438 \u0441\u0435\u0440\u0432\u0438\u0441\u0430\u043c\u0438</li> <li>\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0436\u0438\u0437\u043d\u0435\u043d\u043d\u044b\u043c \u0446\u0438\u043a\u043b\u043e\u043c \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439</li> </ul>"},{"location":"api/python/service_layer/dependencies/#api","title":"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f API","text":""},{"location":"api/python/service_layer/portfolio_service/","title":"\u0421\u0435\u0440\u0432\u0438\u0441 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f\u043c\u0438","text":"<p>\u0421\u0435\u0440\u0432\u0438\u0441 <code>PortfolioService</code> \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0443 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0438\u043d\u0432\u0435\u0441\u0442\u0438\u0446\u0438\u043e\u043d\u043d\u044b\u043c\u0438 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f\u043c\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439.</p>"},{"location":"api/python/service_layer/portfolio_service/#_2","title":"\u041e\u0431\u0437\u043e\u0440","text":"<p>\u0421\u0435\u0440\u0432\u0438\u0441 \u0440\u0435\u0430\u043b\u0438\u0437\u0443\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438:</p> <ul> <li>\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f\u043c\u0438</li> <li>\u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f\u043c\u0438 \u0430\u043a\u0442\u0438\u0432\u043e\u0432</li> <li>\u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u0431\u0438\u0437\u043d\u0435\u0441-\u043f\u0440\u0430\u0432\u0438\u043b</li> <li>\u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u043c \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u043c</li> </ul>"},{"location":"api/python/service_layer/portfolio_service/#_3","title":"\u0418\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b","text":""},{"location":"api/python/service_layer/portfolio_service/#abcportfolioservice","title":"ABCPortfolioService","text":"<p>\u0410\u0431\u0441\u0442\u0440\u0430\u043a\u0442\u043d\u044b\u0439 \u0431\u0430\u0437\u043e\u0432\u044b\u0439 \u043a\u043b\u0430\u0441\u0441, \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0449\u0438\u0439 \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f\u043c\u0438.</p> <p>               Bases: <code>ABC</code></p> Source code in <code>src/service_layer/portfolio_service.py</code> <pre><code>class ABCPortfolioService(abc.ABC):\n    @abc.abstractmethod\n    async def add(self, portfolio: Portfolio) -&gt; None:\n        raise NotImplementedError\n\n    @abc.abstractmethod\n    async def get_by_id(self, portfolio_id: UUID) -&gt; Portfolio | None:\n        raise NotImplementedError\n\n    @abc.abstractmethod\n    async def get_by_user_id(self, user_id: UUID) -&gt; list[Portfolio]:\n        raise NotImplementedError\n\n    @abc.abstractmethod\n    async def update(self, portfolio: Portfolio) -&gt; None:\n        raise NotImplementedError\n\n    @abc.abstractmethod\n    async def delete(self, portfolio_id: UUID) -&gt; None:\n        raise NotImplementedError\n\n    @abc.abstractmethod\n    async def add_transaction(self, transaction: Transaction) -&gt; None:\n        raise NotImplementedError\n</code></pre>"},{"location":"api/python/service_layer/portfolio_service/#_4","title":"\u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f","text":""},{"location":"api/python/service_layer/portfolio_service/#portfolioservice","title":"PortfolioService","text":"<p>\u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0441\u0435\u0440\u0432\u0438\u0441\u0430 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u0435\u0439.</p> <p>               Bases: <code>ABCPortfolioService</code></p> Source code in <code>src/service_layer/portfolio_service.py</code> <pre><code>class PortfolioService(ABCPortfolioService):\n    def __init__(self, repo: AbstractPortfolioRepository, user_service: ABCUserService) -&gt; None:\n        self._repo = repo\n        self._user_service = user_service\n\n    async def add(self, portfolio: Portfolio) -&gt; None:\n        user = await self._user_service.get_by_id(portfolio.user_id)\n        if user is None:\n            raise ValueError('User not found')\n\n        await self._repo.add(portfolio)\n\n    async def get_by_id(self, portfolio_id: UUID) -&gt; Portfolio | None:\n        return await self._repo.get_by_id(portfolio_id)\n\n    async def get_by_user_id(self, user_id: UUID) -&gt; list[Portfolio]:\n        return await self._repo.get_by_user_id(user_id)\n\n    async def update(self, portfolio: Portfolio) -&gt; None:\n        await self._repo.update(portfolio)\n\n    async def delete(self, portfolio_id: UUID) -&gt; None:\n        await self._repo.delete(portfolio_id)\n\n    async def add_transaction(self, transaction: Transaction) -&gt; None:\n        await self._repo.add_transaction(transaction)\n</code></pre>"},{"location":"api/python/service_layer/portfolio_service/#-","title":"\u0411\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0430","text":""},{"location":"api/python/service_layer/portfolio_service/#_5","title":"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f","text":"<ol> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f</li> <li>\u0421\u043e\u0437\u0434\u0430\u0451\u0442 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044c</li> <li>\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438</li> </ol>"},{"location":"api/python/service_layer/portfolio_service/#_6","title":"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f\u043c\u0438","text":"<ul> <li>\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439 \u043a\u0443\u043f\u043b\u0438/\u043f\u0440\u043e\u0434\u0430\u0436\u0438 \u0430\u043a\u0442\u0438\u0432\u043e\u0432</li> <li>\u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u0441\u0440\u0435\u0434\u0441\u0442\u0432</li> <li>\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0440\u0435\u0434\u043d\u0435\u0439 \u0446\u0435\u043d\u044b \u0430\u043a\u0442\u0438\u0432\u0430</li> </ul>"},{"location":"api/python/service_layer/portfolio_service/#_7","title":"\u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f","text":"<ul> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u0440\u0430\u0432 \u0434\u043e\u0441\u0442\u0443\u043f\u0430</li> <li>\u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u0432\u0430\u043b\u044e\u0442\u043d\u044b\u0445 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u0441\u0440\u0435\u0434\u0441\u0442\u0432</li> </ul>"},{"location":"api/python/service_layer/portfolio_service/#_8","title":"\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":"<pre><code>from uuid import UUID\nfrom src.domain.domain import Portfolio, Transaction\nfrom src.service_layer.portfolio_service import PortfolioService\n\n# \u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0441\u0435\u0440\u0432\u0438\u0441\u0430\nportfolio_service = PortfolioService(repo, user_service)\n\n# \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f\nportfolio = Portfolio(\n    user_id=UUID(\"...\"),\n    name=\"\u041c\u043e\u0439 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044c\",\n    currency=\"USD\"\n)\nawait portfolio_service.add(portfolio)\n\n# \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438\ntransaction = Transaction(\n    portfolio_id=portfolio.id,\n    asset_id=\"AAPL\",\n    transaction_type=\"BUY\",\n    quantity=10,\n    price_per_unit=150.50,\n    total_amount=1505.00\n)\nawait portfolio_service.add_transaction(transaction)\n</code></pre>"},{"location":"api/python/service_layer/portfolio_service/#_9","title":"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a","text":"<p>\u0421\u0435\u0440\u0432\u0438\u0441 \u043c\u043e\u0436\u0435\u0442 \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f:</p> <ul> <li><code>ValueError</code> - \u043f\u0440\u0438 \u043f\u043e\u043f\u044b\u0442\u043a\u0435 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044c \u0434\u043b\u044f \u043d\u0435\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f</li> <li><code>InsufficientFundsError</code> - \u043f\u0440\u0438 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043a\u0435 \u0441\u0440\u0435\u0434\u0441\u0442\u0432 \u0434\u043b\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438</li> <li><code>ValidationError</code> - \u043f\u0440\u0438 \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0438 \u0431\u0438\u0437\u043d\u0435\u0441-\u043f\u0440\u0430\u0432\u0438\u043b</li> </ul>"},{"location":"api/python/service_layer/portfolio_service/#_10","title":"\u041a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","text":"<p>\u0414\u043b\u044f \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435:</p> <ul> <li>\u0427\u0430\u0441\u0442\u043e \u0437\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c\u044b\u0445 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u0435\u0439</li> <li>\u0422\u0435\u043a\u0443\u0449\u0438\u0445 \u043a\u043e\u0442\u0438\u0440\u043e\u0432\u043e\u043a \u0430\u043a\u0442\u0438\u0432\u043e\u0432</li> <li>\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432 \u0440\u0430\u0441\u0447\u0451\u0442\u043e\u0432</li> </ul>"},{"location":"api/python/service_layer/portfolio_service/#_11","title":"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u043f\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044e","text":"<ol> <li> <p>\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u043e\u043d\u043d\u043e\u0441\u0442\u044c    \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 Unit of Work \u0434\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0430\u0442\u043e\u043c\u0430\u0440\u043d\u043e\u0441\u0442\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439:    <pre><code>async with uow:\n    await portfolio_service.add(portfolio)\n    await uow.commit()\n</code></pre></p> </li> <li> <p>\u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f</p> </li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0439\u0442\u0435 \u0432\u0445\u043e\u0434\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u0435\u0440\u0435\u0434 \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0435\u0439 \u0432 \u0441\u0435\u0440\u0432\u0438\u0441</li> <li> <p>\u041e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0439\u0442\u0435 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 API</p> </li> <li> <p>\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c</p> </li> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043f\u0430\u0433\u0438\u043d\u0430\u0446\u0438\u044e \u0434\u043b\u044f \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u0441\u043f\u0438\u0441\u043a\u043e\u0432</li> <li>\u041f\u0440\u0438\u043c\u0435\u043d\u044f\u0439\u0442\u0435 select_related \u0434\u043b\u044f \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0445 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0435\u0439</li> </ol>"},{"location":"api/python/service_layer/portfolio_service/#_12","title":"\u0421\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b","text":"<ul> <li>\u0420\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0439 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f</li> <li>\u0421\u0435\u0440\u0432\u0438\u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439</li> <li>Unit of Work</li> <li>\u0414\u043e\u043c\u0435\u043d\u043d\u044b\u0435 \u043c\u043e\u0434\u0435\u043b\u0438</li> </ul>"},{"location":"api/python/service_layer/uow/","title":"Unit of Work (\u0415\u0434\u0438\u043d\u0438\u0446\u0430 \u0440\u0430\u0431\u043e\u0442\u044b)","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c <code>uow</code> \u0440\u0435\u0430\u043b\u0438\u0437\u0443\u0435\u0442 \u043f\u0430\u0442\u0442\u0435\u0440\u043d Unit of Work \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f\u043c\u0438 \u0438 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0446\u0438\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439 \u0441 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f\u043c\u0438.</p>"},{"location":"api/python/service_layer/uow/#_1","title":"\u041e\u0431\u0437\u043e\u0440","text":"<p>Unit of Work (UoW) \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442:</p> <ul> <li>\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0436\u0438\u0437\u043d\u0435\u043d\u043d\u044b\u043c \u0446\u0438\u043a\u043b\u043e\u043c \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439</li> <li>\u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0446\u0438\u044e \u0440\u0430\u0431\u043e\u0442\u044b \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0435\u0432</li> <li>\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u043e\u0442\u043a\u0430\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439 \u043f\u0440\u0438 \u043e\u0448\u0438\u0431\u043a\u0430\u0445</li> <li>\u0415\u0434\u0438\u043d\u0443\u044e \u0442\u043e\u0447\u043a\u0443 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439</li> </ul>"},{"location":"api/python/service_layer/uow/#_2","title":"\u0410\u0431\u0441\u0442\u0440\u0430\u043a\u0446\u0438\u0438","text":""},{"location":"api/python/service_layer/uow/#abstractunitofwork","title":"AbstractUnitOfWork","text":"<p>\u0411\u0430\u0437\u043e\u0432\u044b\u0439 \u0430\u0431\u0441\u0442\u0440\u0430\u043a\u0442\u043d\u044b\u0439 \u043a\u043b\u0430\u0441\u0441, \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0449\u0438\u0439 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 Unit of Work.</p> <p>               Bases: <code>ABC</code></p> <p>\u0410\u0431\u0441\u0442\u0440\u0430\u043a\u0442\u043d\u044b\u0439 \u0431\u0430\u0437\u043e\u0432\u044b\u0439 \u043a\u043b\u0430\u0441\u0441 Unit of Work (\u0415\u0434\u0438\u043d\u0438\u0446\u0430 \u0440\u0430\u0431\u043e\u0442\u044b).</p> <p>\u041f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f\u043c\u0438 \u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f\u043c.</p> \u0410\u0442\u0440\u0438\u0431\u0443\u0442\u044b <p>users: \u0420\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0439 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438.</p> Source code in <code>src/service_layer/uow.py</code> <pre><code>class AbstractUnitOfWork(abc.ABC):\n    \"\"\"\u0410\u0431\u0441\u0442\u0440\u0430\u043a\u0442\u043d\u044b\u0439 \u0431\u0430\u0437\u043e\u0432\u044b\u0439 \u043a\u043b\u0430\u0441\u0441 Unit of Work (\u0415\u0434\u0438\u043d\u0438\u0446\u0430 \u0440\u0430\u0431\u043e\u0442\u044b).\n\n    \u041f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f\u043c\u0438 \u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f\u043c.\n\n    \u0410\u0442\u0440\u0438\u0431\u0443\u0442\u044b:\n        users: \u0420\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0439 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438.\n    \"\"\"\n\n    portfolio: AbstractPortfolioRepository\n\n    async def __aenter__(self) -&gt; 'AbstractUnitOfWork':\n        \"\"\"\u0412\u0445\u043e\u0434 \u0432 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u044b\u0439 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440.\n\n        Returns:\n            AbstractUnitOfWork: \u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 Unit of Work.\n\n        \"\"\"\n        return self\n\n    async def __aexit__(self, *args) -&gt; None:\n        \"\"\"\u0412\u044b\u0445\u043e\u0434 \u0438\u0437 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u043e\u0433\u043e \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430 \u0441 \u043e\u0442\u043a\u0430\u0442\u043e\u043c \u043d\u0435\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0445 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439.\n\n        Args:\n            *args: \u0410\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u044b \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f, \u0435\u0441\u043b\u0438 \u043e\u043d\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u043e \u0432 \u0431\u043b\u043e\u043a\u0435 with.\n\n        \"\"\"\n        await self.rollback()\n\n    async def commit(self) -&gt; None:\n        \"\"\"\u0424\u0438\u043a\u0441\u0438\u0440\u0443\u0435\u0442 \u0432\u0441\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 \u0440\u0430\u043c\u043a\u0430\u0445 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0435\u0434\u0438\u043d\u0438\u0446\u044b \u0440\u0430\u0431\u043e\u0442\u044b.\n\n        Raises:\n            Exception: \u0415\u0441\u043b\u0438 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0444\u0438\u043a\u0441\u0430\u0446\u0438\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439.\n\n        \"\"\"\n        await self._commit()\n\n    @abc.abstractmethod\n    async def _commit(self) -&gt; None:\n        \"\"\"\u0410\u0431\u0441\u0442\u0440\u0430\u043a\u0442\u043d\u044b\u0439 \u043c\u0435\u0442\u043e\u0434 \u0434\u043b\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0444\u0438\u043a\u0441\u0430\u0446\u0438\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439.\n\n        \u0414\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d \u0432 \u043f\u043e\u0434\u043a\u043b\u0430\u0441\u0441\u0430\u0445 \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438.\n\n        Raises:\n            NotImplementedError: \u0415\u0441\u043b\u0438 \u043c\u0435\u0442\u043e\u0434 \u043d\u0435 \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d \u0432 \u043f\u043e\u0434\u043a\u043b\u0430\u0441\u0441\u0435.\n\n        \"\"\"\n        raise NotImplementedError\n\n    @abc.abstractmethod\n    async def rollback(self) -&gt; None:\n        \"\"\"\u0410\u0431\u0441\u0442\u0440\u0430\u043a\u0442\u043d\u044b\u0439 \u043c\u0435\u0442\u043e\u0434 \u0434\u043b\u044f \u043e\u0442\u043a\u0430\u0442\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439.\n\n        \u0414\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d \u0432 \u043f\u043e\u0434\u043a\u043b\u0430\u0441\u0441\u0430\u0445 \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438.\n\n        Raises:\n            NotImplementedError: \u0415\u0441\u043b\u0438 \u043c\u0435\u0442\u043e\u0434 \u043d\u0435 \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d \u0432 \u043f\u043e\u0434\u043a\u043b\u0430\u0441\u0441\u0435.\n\n        \"\"\"\n        raise NotImplementedError\n</code></pre>"},{"location":"api/python/service_layer/uow/#src.service_layer.uow.AbstractUnitOfWork.__aenter__","title":"<code>__aenter__()</code>  <code>async</code>","text":"<p>\u0412\u0445\u043e\u0434 \u0432 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u044b\u0439 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440.</p> <p>Returns:</p> Name Type Description <code>AbstractUnitOfWork</code> <code>AbstractUnitOfWork</code> <p>\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 Unit of Work.</p> Source code in <code>src/service_layer/uow.py</code> <pre><code>async def __aenter__(self) -&gt; 'AbstractUnitOfWork':\n    \"\"\"\u0412\u0445\u043e\u0434 \u0432 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u044b\u0439 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440.\n\n    Returns:\n        AbstractUnitOfWork: \u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 Unit of Work.\n\n    \"\"\"\n    return self\n</code></pre>"},{"location":"api/python/service_layer/uow/#src.service_layer.uow.AbstractUnitOfWork.__aexit__","title":"<code>__aexit__(*args)</code>  <code>async</code>","text":"<p>\u0412\u044b\u0445\u043e\u0434 \u0438\u0437 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u043e\u0433\u043e \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430 \u0441 \u043e\u0442\u043a\u0430\u0442\u043e\u043c \u043d\u0435\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0445 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439.</p> <p>Parameters:</p> Name Type Description Default <code>*args</code> <p>\u0410\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u044b \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f, \u0435\u0441\u043b\u0438 \u043e\u043d\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u043e \u0432 \u0431\u043b\u043e\u043a\u0435 with.</p> <code>()</code> Source code in <code>src/service_layer/uow.py</code> <pre><code>async def __aexit__(self, *args) -&gt; None:\n    \"\"\"\u0412\u044b\u0445\u043e\u0434 \u0438\u0437 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u043e\u0433\u043e \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430 \u0441 \u043e\u0442\u043a\u0430\u0442\u043e\u043c \u043d\u0435\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0445 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439.\n\n    Args:\n        *args: \u0410\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u044b \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f, \u0435\u0441\u043b\u0438 \u043e\u043d\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u043e \u0432 \u0431\u043b\u043e\u043a\u0435 with.\n\n    \"\"\"\n    await self.rollback()\n</code></pre>"},{"location":"api/python/service_layer/uow/#src.service_layer.uow.AbstractUnitOfWork.commit","title":"<code>commit()</code>  <code>async</code>","text":"<p>\u0424\u0438\u043a\u0441\u0438\u0440\u0443\u0435\u0442 \u0432\u0441\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 \u0440\u0430\u043c\u043a\u0430\u0445 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0435\u0434\u0438\u043d\u0438\u0446\u044b \u0440\u0430\u0431\u043e\u0442\u044b.</p> <p>Raises:</p> Type Description <code>Exception</code> <p>\u0415\u0441\u043b\u0438 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0444\u0438\u043a\u0441\u0430\u0446\u0438\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439.</p> Source code in <code>src/service_layer/uow.py</code> <pre><code>async def commit(self) -&gt; None:\n    \"\"\"\u0424\u0438\u043a\u0441\u0438\u0440\u0443\u0435\u0442 \u0432\u0441\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 \u0440\u0430\u043c\u043a\u0430\u0445 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0435\u0434\u0438\u043d\u0438\u0446\u044b \u0440\u0430\u0431\u043e\u0442\u044b.\n\n    Raises:\n        Exception: \u0415\u0441\u043b\u0438 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0444\u0438\u043a\u0441\u0430\u0446\u0438\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439.\n\n    \"\"\"\n    await self._commit()\n</code></pre>"},{"location":"api/python/service_layer/uow/#src.service_layer.uow.AbstractUnitOfWork.rollback","title":"<code>rollback()</code>  <code>abstractmethod</code> <code>async</code>","text":"<p>\u0410\u0431\u0441\u0442\u0440\u0430\u043a\u0442\u043d\u044b\u0439 \u043c\u0435\u0442\u043e\u0434 \u0434\u043b\u044f \u043e\u0442\u043a\u0430\u0442\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439.</p> <p>\u0414\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d \u0432 \u043f\u043e\u0434\u043a\u043b\u0430\u0441\u0441\u0430\u0445 \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438.</p> <p>Raises:</p> Type Description <code>NotImplementedError</code> <p>\u0415\u0441\u043b\u0438 \u043c\u0435\u0442\u043e\u0434 \u043d\u0435 \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d \u0432 \u043f\u043e\u0434\u043a\u043b\u0430\u0441\u0441\u0435.</p> Source code in <code>src/service_layer/uow.py</code> <pre><code>@abc.abstractmethod\nasync def rollback(self) -&gt; None:\n    \"\"\"\u0410\u0431\u0441\u0442\u0440\u0430\u043a\u0442\u043d\u044b\u0439 \u043c\u0435\u0442\u043e\u0434 \u0434\u043b\u044f \u043e\u0442\u043a\u0430\u0442\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439.\n\n    \u0414\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d \u0432 \u043f\u043e\u0434\u043a\u043b\u0430\u0441\u0441\u0430\u0445 \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438.\n\n    Raises:\n        NotImplementedError: \u0415\u0441\u043b\u0438 \u043c\u0435\u0442\u043e\u0434 \u043d\u0435 \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d \u0432 \u043f\u043e\u0434\u043a\u043b\u0430\u0441\u0441\u0435.\n\n    \"\"\"\n    raise NotImplementedError\n</code></pre>"},{"location":"api/python/service_layer/uow/#_3","title":"\u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438","text":""},{"location":"api/python/service_layer/uow/#sqlalchemyunitofwork","title":"SqlAlchemyUnitOfWork","text":"<p>\u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f UoW \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 SQLAlchemy.</p> <p>               Bases: <code>AbstractUnitOfWork</code></p> <p>Unit of Work \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 SQLAlchemy.</p> <p>\u041e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0435\u0441\u0441\u0438\u044f\u043c\u0438 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f\u043c\u0438 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c SQLAlchemy.</p> Source code in <code>src/service_layer/uow.py</code> <pre><code>class SqlAlchemyUnitOfWork(AbstractUnitOfWork):\n    \"\"\"Unit of Work \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 SQLAlchemy.\n\n    \u041e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0435\u0441\u0441\u0438\u044f\u043c\u0438 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f\u043c\u0438\n    \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c SQLAlchemy.\n    \"\"\"\n\n    def __init__(\n        self,\n        session_factory: async_sessionmaker[AsyncSession],\n        repo_factory: ABCPortfolioRepositoryFactory,\n    ) -&gt; None:\n        \"\"\"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f SqlAlchemyUnitOfWork.\n\n        Args:\n            session_factory: \u0424\u0430\u0431\u0440\u0438\u043a\u0430 \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u0445 \u0441\u0435\u0441\u0441\u0438\u0439 SQLAlchemy.\n            repo_factory: \u0424\u0430\u0434\u0440\u0438\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0434\u0430\u043d\u043d\u044b\u043c\u0438\n\n        \"\"\"\n        self.session_factory = session_factory\n        self.repo_factory = repo_factory\n\n    async def __aenter__(self) -&gt; 'AbstractUnitOfWork':\n        \"\"\"\u0412\u0445\u043e\u0434 \u0432 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u044b\u0439 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440.\n\n        \u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u0441\u0435\u0441\u0441\u0438\u044e \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0438.\n\n        Returns:\n            SqlAlchemyUnitOfWork: \u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 Unit of Work.\n\n        \"\"\"\n        self.session: AsyncSession = self.session_factory()\n        self.portfolio = self.repo_factory.create(self.session)\n        return await super().__aenter__()\n\n    async def __aexit__(self, exc_type, exc_val, exc_tb) -&gt; None:\n        \"\"\"\u0412\u044b\u0445\u043e\u0434 \u0438\u0437 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u043e\u0433\u043e \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430.\n\n        \u041f\u0440\u0438 \u0432\u043e\u0437\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u0438 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u043e\u0442\u043a\u0430\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439,\n        \u0438\u043d\u0430\u0447\u0435 \u0444\u0438\u043a\u0441\u0438\u0440\u0443\u0435\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f. \u0412 \u043b\u044e\u0431\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0437\u0430\u043a\u0440\u044b\u0432\u0430\u0435\u0442 \u0441\u0435\u0441\u0441\u0438\u044e.\n\n        Args:\n            exc_type: \u0422\u0438\u043f \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f, \u0435\u0441\u043b\u0438 \u043e\u043d\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u043e, \u0438\u043d\u0430\u0447\u0435 None.\n            exc_val: \u042d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f, \u0435\u0441\u043b\u0438 \u043e\u043d\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u043e, \u0438\u043d\u0430\u0447\u0435 None.\n            exc_tb: \u0422\u0440\u0430\u0441\u0441\u0438\u0440\u043e\u0432\u043a\u0430 \u0441\u0442\u0435\u043a\u0430, \u0435\u0441\u043b\u0438 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u043e, \u0438\u043d\u0430\u0447\u0435 None.\n\n        \"\"\"\n        if exc_type:\n            await self.rollback()\n        else:\n            await self._commit()\n        await self.session.close()\n\n    async def _commit(self) -&gt; None:\n        \"\"\"\u0424\u0438\u043a\u0441\u0438\u0440\u0443\u0435\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 \u0431\u0430\u0437\u0435 \u0434\u0430\u043d\u043d\u044b\u0445.\n\n        Raises:\n            SQLAlchemyError: \u0415\u0441\u043b\u0438 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0444\u0438\u043a\u0441\u0430\u0446\u0438\u0438 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438.\n\n        \"\"\"\n        await self.session.commit()\n\n    async def rollback(self) -&gt; None:\n        \"\"\"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u043e\u0442\u043a\u0430\u0442 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438.\n\n        \u041e\u0442\u043c\u0435\u043d\u044f\u0435\u0442 \u0432\u0441\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f, \u0441\u0434\u0435\u043b\u0430\u043d\u043d\u044b\u0435 \u0432 \u0440\u0430\u043c\u043a\u0430\u0445 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0441\u0435\u0441\u0441\u0438\u0438.\n        \"\"\"\n        await self.session.rollback()\n</code></pre>"},{"location":"api/python/service_layer/uow/#src.service_layer.uow.SqlAlchemyUnitOfWork.__aenter__","title":"<code>__aenter__()</code>  <code>async</code>","text":"<p>\u0412\u0445\u043e\u0434 \u0432 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u044b\u0439 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440.</p> <p>\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u0441\u0435\u0441\u0441\u0438\u044e \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0438.</p> <p>Returns:</p> Name Type Description <code>SqlAlchemyUnitOfWork</code> <code>AbstractUnitOfWork</code> <p>\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 Unit of Work.</p> Source code in <code>src/service_layer/uow.py</code> <pre><code>async def __aenter__(self) -&gt; 'AbstractUnitOfWork':\n    \"\"\"\u0412\u0445\u043e\u0434 \u0432 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u044b\u0439 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440.\n\n    \u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u0441\u0435\u0441\u0441\u0438\u044e \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0438.\n\n    Returns:\n        SqlAlchemyUnitOfWork: \u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 Unit of Work.\n\n    \"\"\"\n    self.session: AsyncSession = self.session_factory()\n    self.portfolio = self.repo_factory.create(self.session)\n    return await super().__aenter__()\n</code></pre>"},{"location":"api/python/service_layer/uow/#src.service_layer.uow.SqlAlchemyUnitOfWork.__aexit__","title":"<code>__aexit__(exc_type, exc_val, exc_tb)</code>  <code>async</code>","text":"<p>\u0412\u044b\u0445\u043e\u0434 \u0438\u0437 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u043e\u0433\u043e \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430.</p> <p>\u041f\u0440\u0438 \u0432\u043e\u0437\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u0438 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u043e\u0442\u043a\u0430\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439, \u0438\u043d\u0430\u0447\u0435 \u0444\u0438\u043a\u0441\u0438\u0440\u0443\u0435\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f. \u0412 \u043b\u044e\u0431\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0437\u0430\u043a\u0440\u044b\u0432\u0430\u0435\u0442 \u0441\u0435\u0441\u0441\u0438\u044e.</p> <p>Parameters:</p> Name Type Description Default <code>exc_type</code> <p>\u0422\u0438\u043f \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f, \u0435\u0441\u043b\u0438 \u043e\u043d\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u043e, \u0438\u043d\u0430\u0447\u0435 None.</p> required <code>exc_val</code> <p>\u042d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f, \u0435\u0441\u043b\u0438 \u043e\u043d\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u043e, \u0438\u043d\u0430\u0447\u0435 None.</p> required <code>exc_tb</code> <p>\u0422\u0440\u0430\u0441\u0441\u0438\u0440\u043e\u0432\u043a\u0430 \u0441\u0442\u0435\u043a\u0430, \u0435\u0441\u043b\u0438 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u043e, \u0438\u043d\u0430\u0447\u0435 None.</p> required Source code in <code>src/service_layer/uow.py</code> <pre><code>async def __aexit__(self, exc_type, exc_val, exc_tb) -&gt; None:\n    \"\"\"\u0412\u044b\u0445\u043e\u0434 \u0438\u0437 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u043e\u0433\u043e \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430.\n\n    \u041f\u0440\u0438 \u0432\u043e\u0437\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u0438 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u043e\u0442\u043a\u0430\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439,\n    \u0438\u043d\u0430\u0447\u0435 \u0444\u0438\u043a\u0441\u0438\u0440\u0443\u0435\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f. \u0412 \u043b\u044e\u0431\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0437\u0430\u043a\u0440\u044b\u0432\u0430\u0435\u0442 \u0441\u0435\u0441\u0441\u0438\u044e.\n\n    Args:\n        exc_type: \u0422\u0438\u043f \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f, \u0435\u0441\u043b\u0438 \u043e\u043d\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u043e, \u0438\u043d\u0430\u0447\u0435 None.\n        exc_val: \u042d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f, \u0435\u0441\u043b\u0438 \u043e\u043d\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u043e, \u0438\u043d\u0430\u0447\u0435 None.\n        exc_tb: \u0422\u0440\u0430\u0441\u0441\u0438\u0440\u043e\u0432\u043a\u0430 \u0441\u0442\u0435\u043a\u0430, \u0435\u0441\u043b\u0438 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u043e, \u0438\u043d\u0430\u0447\u0435 None.\n\n    \"\"\"\n    if exc_type:\n        await self.rollback()\n    else:\n        await self._commit()\n    await self.session.close()\n</code></pre>"},{"location":"api/python/service_layer/uow/#src.service_layer.uow.SqlAlchemyUnitOfWork.__init__","title":"<code>__init__(session_factory, repo_factory)</code>","text":"<p>\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f SqlAlchemyUnitOfWork.</p> <p>Parameters:</p> Name Type Description Default <code>session_factory</code> <code>async_sessionmaker[AsyncSession]</code> <p>\u0424\u0430\u0431\u0440\u0438\u043a\u0430 \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u0445 \u0441\u0435\u0441\u0441\u0438\u0439 SQLAlchemy.</p> required <code>repo_factory</code> <code>ABCPortfolioRepositoryFactory</code> <p>\u0424\u0430\u0434\u0440\u0438\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0434\u0430\u043d\u043d\u044b\u043c\u0438</p> required Source code in <code>src/service_layer/uow.py</code> <pre><code>def __init__(\n    self,\n    session_factory: async_sessionmaker[AsyncSession],\n    repo_factory: ABCPortfolioRepositoryFactory,\n) -&gt; None:\n    \"\"\"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f SqlAlchemyUnitOfWork.\n\n    Args:\n        session_factory: \u0424\u0430\u0431\u0440\u0438\u043a\u0430 \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u0445 \u0441\u0435\u0441\u0441\u0438\u0439 SQLAlchemy.\n        repo_factory: \u0424\u0430\u0434\u0440\u0438\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0434\u0430\u043d\u043d\u044b\u043c\u0438\n\n    \"\"\"\n    self.session_factory = session_factory\n    self.repo_factory = repo_factory\n</code></pre>"},{"location":"api/python/service_layer/uow/#src.service_layer.uow.SqlAlchemyUnitOfWork.rollback","title":"<code>rollback()</code>  <code>async</code>","text":"<p>\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u043e\u0442\u043a\u0430\u0442 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438.</p> <p>\u041e\u0442\u043c\u0435\u043d\u044f\u0435\u0442 \u0432\u0441\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f, \u0441\u0434\u0435\u043b\u0430\u043d\u043d\u044b\u0435 \u0432 \u0440\u0430\u043c\u043a\u0430\u0445 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0441\u0435\u0441\u0441\u0438\u0438.</p> Source code in <code>src/service_layer/uow.py</code> <pre><code>async def rollback(self) -&gt; None:\n    \"\"\"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u043e\u0442\u043a\u0430\u0442 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438.\n\n    \u041e\u0442\u043c\u0435\u043d\u044f\u0435\u0442 \u0432\u0441\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f, \u0441\u0434\u0435\u043b\u0430\u043d\u043d\u044b\u0435 \u0432 \u0440\u0430\u043c\u043a\u0430\u0445 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0441\u0435\u0441\u0441\u0438\u0438.\n    \"\"\"\n    await self.session.rollback()\n</code></pre>"},{"location":"api/python/service_layer/uow/#_4","title":"\u041f\u0440\u0438\u043d\u0446\u0438\u043f \u0440\u0430\u0431\u043e\u0442\u044b","text":""},{"location":"api/python/service_layer/uow/#_5","title":"\u0416\u0438\u0437\u043d\u0435\u043d\u043d\u044b\u0439 \u0446\u0438\u043a\u043b \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438","text":"<pre><code>sequenceDiagram\n    participant Client\n    participant UoW\n    participant Session\n\n    Client-&gt;&gt;UoW: \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 UoW\n    UoW-&gt;&gt;Session: \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0441\u0435\u0441\u0441\u0438\u0438\n    Client-&gt;&gt;UoW: \u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f\u043c\u0438\n    alt \u0423\u0441\u043f\u0435\u0448\u043d\u043e\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\n        Client-&gt;&gt;UoW: commit()\n        UoW-&gt;&gt;Session: commit()\n    else \u041e\u0448\u0438\u0431\u043a\u0430\n        UoW-&gt;&gt;Session: rollback()\n    end\n    UoW-&gt;&gt;Session: \u0417\u0430\u043a\u0440\u044b\u0442\u0438\u0435 \u0441\u0435\u0441\u0441\u0438\u0438\n</code></pre>"},{"location":"api/python/service_layer/uow/#_6","title":"\u041f\u0440\u0438\u043c\u0435\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":"<pre><code>from sqlalchemy.ext.asyncio import create_async_engine, async_sessionmaker\nfrom src.service_layer.uow import SqlAlchemyUnitOfWork\nfrom src.adapters.factory import SQLAlchemyPortfolioRepositoryFactory\n\n# \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f\nengine = create_async_engine(\"postgresql+asyncpg://user:pass@localhost/db\")\nsession_factory = async_sessionmaker(engine, expire_on_commit=False)\nrepo_factory = SQLAlchemyPortfolioRepositoryFactory()\n\n# \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 UoW\nasync with SqlAlchemyUnitOfWork(session_factory, repo_factory) as uow:\n    # \u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f\u043c\u0438 \u0447\u0435\u0440\u0435\u0437 uow.portfolio\n    portfolio = await uow.portfolio.get_by_id(portfolio_id)\n\n    # \u0412\u043d\u0435\u0441\u0435\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439\n    portfolio.name = \"\u041e\u0431\u043d\u043e\u0432\u043b\u0451\u043d\u043d\u044b\u0439 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044c\"\n\n    # \u0424\u0438\u043a\u0441\u0430\u0446\u0438\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439\n    await uow.commit()\n</code></pre>"},{"location":"api/python/service_layer/uow/#_7","title":"\u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438","text":""},{"location":"api/python/service_layer/uow/#_8","title":"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0435\u0441\u0441\u0438\u044f\u043c\u0438","text":"<ul> <li>\u041a\u0430\u0436\u0434\u044b\u0439 UoW \u0441\u043e\u0437\u0434\u0430\u0451\u0442 \u043d\u043e\u0432\u0443\u044e \u0441\u0435\u0441\u0441\u0438\u044e</li> <li>\u0421\u0435\u0441\u0441\u0438\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0437\u0430\u043a\u0440\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u0440\u0438 \u0432\u044b\u0445\u043e\u0434\u0435 \u0438\u0437 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430</li> <li>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0445 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439</li> </ul>"},{"location":"api/python/service_layer/uow/#_9","title":"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a","text":"<ul> <li>\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u043e\u0442\u043a\u0430\u0442 \u043f\u0440\u0438 \u0432\u043e\u0437\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u0438 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f</li> <li>\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u044f\u0432\u043d\u043e\u0433\u043e \u0432\u044b\u0437\u043e\u0432\u0430 rollback()</li> <li>\u041b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u0448\u0438\u0431\u043e\u043a \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439</li> </ul>"},{"location":"api/python/service_layer/uow/#_10","title":"\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c","text":"<ul> <li>\u041b\u0435\u043d\u0438\u0432\u0430\u044f \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0435\u0432</li> <li>\u042d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0435 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f\u043c\u0438</li> <li>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u043f\u0443\u043b\u0438\u043d\u0433\u0430 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439</li> </ul>"},{"location":"api/python/service_layer/uow/#_11","title":"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438","text":"<ol> <li>\u041e\u0431\u043b\u0430\u0441\u0442\u044c \u0432\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u0438</li> <li>\u0421\u043e\u0437\u0434\u0430\u0432\u0430\u0439\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 UoW \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u0431\u0438\u0437\u043d\u0435\u0441-\u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438</li> <li> <p>\u041d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0439\u0442\u0435 UoW \u043c\u0435\u0436\u0434\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u043c\u0438</p> </li> <li> <p>\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439 <pre><code>try:\n    async with uow:\n        # ... \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0441 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f\u043c\u0438\n        await uow.commit()\nexcept Exception as e:\n    logger.error(f\"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438: {e}\")\n    raise\n</code></pre></p> </li> <li> <p>\u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435</p> </li> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043c\u043e\u043a\u0438 \u0434\u043b\u044f \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u0442\u0435\u0441\u0442\u043e\u0432</li> <li>\u041f\u0440\u0438\u043c\u0435\u043d\u044f\u0439\u0442\u0435 \u0444\u0438\u043a\u0441\u0442\u0443\u0440\u044b \u0434\u043b\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 UoW</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0439\u0442\u0435 \u043e\u0442\u043a\u0430\u0442 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439</li> </ol>"},{"location":"api/python/service_layer/uow/#_12","title":"\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438","text":"<p>\u0414\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u043e\u0432\u044b\u0445 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0435\u0432:</p> <ol> <li>\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0430\u0442\u0440\u0438\u0431\u0443\u0442 \u0432 <code>AbstractUnitOfWork</code></li> <li>\u0420\u0435\u0430\u043b\u0438\u0437\u0443\u0439\u0442\u0435 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u0432 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 UoW</li> <li>\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e</li> </ol>"},{"location":"api/python/service_layer/uow/#_13","title":"\u0421\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b","text":"<ul> <li>\u0420\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0439 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f</li> <li>\u0424\u0430\u0431\u0440\u0438\u043a\u0430 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0435\u0432</li> <li>\u0421\u0435\u0440\u0432\u0438\u0441 \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f</li> </ul>"},{"location":"api/python/service_layer/users_service/","title":"\u0421\u0435\u0440\u0432\u0438\u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c <code>users_service</code> \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0447\u0435\u0440\u0435\u0437 \u0432\u043d\u0435\u0448\u043d\u0438\u0439 \u043c\u0438\u043a\u0440\u043e\u0441\u0435\u0440\u0432\u0438\u0441.</p>"},{"location":"api/python/service_layer/users_service/#_2","title":"\u041e\u0431\u0437\u043e\u0440","text":"<p>\u0421\u0435\u0440\u0432\u0438\u0441 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442:</p> <ul> <li>\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u043f\u043e ID</li> <li>\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0441\u0435\u0442\u0435\u0432\u044b\u0445 \u043e\u0448\u0438\u0431\u043e\u043a</li> <li>\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u044b \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432</li> <li>\u041a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432</li> </ul>"},{"location":"api/python/service_layer/users_service/#_3","title":"\u0418\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b","text":""},{"location":"api/python/service_layer/users_service/#abcuserservice","title":"ABCUserService","text":"<p>\u0410\u0431\u0441\u0442\u0440\u0430\u043a\u0442\u043d\u044b\u0439 \u0431\u0430\u0437\u043e\u0432\u044b\u0439 \u043a\u043b\u0430\u0441\u0441, \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0449\u0438\u0439 \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438.</p> <p>               Bases: <code>ABC</code></p> Source code in <code>src/service_layer/users_service.py</code> <pre><code>class ABCUserService(abc.ABC):\n    @abc.abstractmethod\n    async def get_by_id(self, user_id: UUID) -&gt; dict:\n        raise NotImplementedError\n</code></pre>"},{"location":"api/python/service_layer/users_service/#_4","title":"\u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f","text":""},{"location":"api/python/service_layer/users_service/#userservice","title":"UserService","text":"<p>\u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0441\u0435\u0440\u0432\u0438\u0441\u0430 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0432\u043d\u0435\u0448\u043d\u0438\u043c API \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439.</p> <p>               Bases: <code>ABCUserService</code></p> Source code in <code>src/service_layer/users_service.py</code> <pre><code>class UserService(ABCUserService):\n    def __init__(self, base_url: str, max_retries: int = 3) -&gt; None:\n        self._base_url = base_url.rstrip('/')\n        self._max_retries = max_retries\n\n    @_RETRY_POLICY\n    async def get_by_id(self, user_id: UUID) -&gt; dict:\n        \"\"\"\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043f\u043e \u0435\u0433\u043e \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0443 \u0438\u0437 \u0432\u043d\u0435\u0448\u043d\u0435\u0433\u043e \u043c\u0438\u043a\u0440\u043e\u0441\u0435\u0440\u0432\u0438\u0441\u0430.\n\n        \u041c\u0435\u0442\u043e\u0434 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 HTTP-\u0437\u0430\u043f\u0440\u043e\u0441 \u043a \u0432\u043d\u0435\u0448\u043d\u0435\u043c\u0443 \u0441\u0435\u0440\u0432\u0438\u0441\u0443 \u0441 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u043c\u0438\n        \u043f\u043e\u043f\u044b\u0442\u043a\u0430\u043c\u0438 \u043f\u0440\u0438 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0441\u0431\u043e\u044f\u0445 (\u0442\u0430\u0439\u043c\u0430\u0443\u0442\u044b, 5xx \u043e\u0448\u0438\u0431\u043a\u0438). \u041f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 retry\n        \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 tenacity.\n\n        Args:\n            user_id (UUID): \u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.\n\n        Returns:\n            dict: JSON-\u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f, \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0451\u043d\u043d\u043e\u0435 \u0432\u043d\u0435\u0448\u043d\u0438\u043c \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u043c.\n\n        Raises:\n            UserNotFoundError: \u0415\u0441\u043b\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d (HTTP 404).\n            UserServiceUnavailableError: \u0415\u0441\u043b\u0438 \u0441\u0435\u0440\u0432\u0438\u0441 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d (\u0442\u0430\u0439\u043c\u0430\u0443\u0442, 5xx \u0438 \u0442.\u043f.).\n            UserServiceError: \u041f\u0440\u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u043d\u0435\u043e\u0436\u0438\u0434\u0430\u043d\u043d\u044b\u0445 \u043e\u0448\u0438\u0431\u043a\u0430\u0445 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, 400, 401).\n\n        Example:\n            &gt;&gt;&gt; service = UserService(base_url=\"https://api.example.com\")\n            &gt;&gt;&gt; try:\n            ...     user = await service.get_by_id(UUID(\"123e4567-e89b-12d3-a456-426614174000\"))\n            ...     print(user[\"name\"])\n            ... except UserNotFoundError:\n            ...     print(\"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442\")\n\n        Note:\n            \u041c\u0435\u0442\u043e\u0434 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 retry-\u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c (tenacity) \u0438 \u043d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\n            \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0445 \u0432\u044b\u0437\u043e\u0432\u043e\u0432 \u0441\u043e \u0441\u0442\u043e\u0440\u043e\u043d\u044b \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043f\u0440\u0438 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u043e\u0448\u0438\u0431\u043a\u0430\u0445.\n\n        \"\"\"\n        try:\n            async with httpx.AsyncClient(base_url=self._base_url, timeout=5.0) as client:\n                resp = await client.get(f'/api/v1/users/{user_id}')\n\n                if resp.status_code == 200:\n                    return resp.json()\n                elif resp.status_code == 404:\n                    raise UserNotFoundError(f'\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 ID {user_id} \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d')\n                elif resp.status_code &gt;= 500:\n                    raise UserServiceUnavailableError(\n                        f'User service \u0432\u0435\u0440\u043d\u0443\u043b {resp.status_code}: {resp.text}',\n                    )\n                else:\n                    raise UserServiceError(\n                        f'\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0441\u0442\u0430\u0442\u0443\u0441 {resp.status_code}'\n                        f' \u0434\u043b\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f {user_id}: {resp.text}',\n                    )\n\n        except httpx.TimeoutException as e:\n            logger.warning('\u0422\u0430\u0439\u043c\u0430\u0443\u0442 \u043f\u0440\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f %s: %s', user_id, e)\n            raise UserServiceUnavailableError('\u0422\u0430\u0439\u043c\u0430\u0443\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u0430') from e\n\n        except httpx.NetworkError as e:\n            logger.exception('\u0421\u0435\u0442\u0435\u0432\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f %s: %s', user_id, e)\n            raise UserServiceUnavailableError('\u0421\u0435\u0442\u0435\u0432\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430') from e\n\n        except httpx.HTTPStatusError as e:\n            logger.exception('\u041e\u0448\u0438\u0431\u043a\u0430 HTTP-\u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u043f\u0440\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f %s: %s', user_id, e)\n            raise UserServiceError('\u041e\u0448\u0438\u0431\u043a\u0430 HTTP-\u043e\u0442\u0432\u0435\u0442\u0430') from e\n</code></pre>"},{"location":"api/python/service_layer/users_service/#src.service_layer.users_service.UserService.get_by_id","title":"<code>get_by_id(user_id)</code>  <code>async</code>","text":"<p>\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043f\u043e \u0435\u0433\u043e \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0443 \u0438\u0437 \u0432\u043d\u0435\u0448\u043d\u0435\u0433\u043e \u043c\u0438\u043a\u0440\u043e\u0441\u0435\u0440\u0432\u0438\u0441\u0430.</p> <p>\u041c\u0435\u0442\u043e\u0434 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 HTTP-\u0437\u0430\u043f\u0440\u043e\u0441 \u043a \u0432\u043d\u0435\u0448\u043d\u0435\u043c\u0443 \u0441\u0435\u0440\u0432\u0438\u0441\u0443 \u0441 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u043c\u0438 \u043f\u043e\u043f\u044b\u0442\u043a\u0430\u043c\u0438 \u043f\u0440\u0438 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0441\u0431\u043e\u044f\u0445 (\u0442\u0430\u0439\u043c\u0430\u0443\u0442\u044b, 5xx \u043e\u0448\u0438\u0431\u043a\u0438). \u041f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 retry \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 tenacity.</p> <p>Parameters:</p> Name Type Description Default <code>user_id</code> <code>UUID</code> <p>\u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.</p> required <p>Returns:</p> Name Type Description <code>dict</code> <code>dict</code> <p>JSON-\u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f, \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0451\u043d\u043d\u043e\u0435 \u0432\u043d\u0435\u0448\u043d\u0438\u043c \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u043c.</p> <p>Raises:</p> Type Description <code>UserNotFoundError</code> <p>\u0415\u0441\u043b\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d (HTTP 404).</p> <code>UserServiceUnavailableError</code> <p>\u0415\u0441\u043b\u0438 \u0441\u0435\u0440\u0432\u0438\u0441 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d (\u0442\u0430\u0439\u043c\u0430\u0443\u0442, 5xx \u0438 \u0442.\u043f.).</p> <code>UserServiceError</code> <p>\u041f\u0440\u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u043d\u0435\u043e\u0436\u0438\u0434\u0430\u043d\u043d\u044b\u0445 \u043e\u0448\u0438\u0431\u043a\u0430\u0445 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, 400, 401).</p> Example <p>service = UserService(base_url=\"https://api.example.com\") try: ...     user = await service.get_by_id(UUID(\"123e4567-e89b-12d3-a456-426614174000\")) ...     print(user[\"name\"]) ... except UserNotFoundError: ...     print(\"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442\")</p> Note <p>\u041c\u0435\u0442\u043e\u0434 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 retry-\u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c (tenacity) \u0438 \u043d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0445 \u0432\u044b\u0437\u043e\u0432\u043e\u0432 \u0441\u043e \u0441\u0442\u043e\u0440\u043e\u043d\u044b \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043f\u0440\u0438 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u043e\u0448\u0438\u0431\u043a\u0430\u0445.</p> Source code in <code>src/service_layer/users_service.py</code> <pre><code>@_RETRY_POLICY\nasync def get_by_id(self, user_id: UUID) -&gt; dict:\n    \"\"\"\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043f\u043e \u0435\u0433\u043e \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0443 \u0438\u0437 \u0432\u043d\u0435\u0448\u043d\u0435\u0433\u043e \u043c\u0438\u043a\u0440\u043e\u0441\u0435\u0440\u0432\u0438\u0441\u0430.\n\n    \u041c\u0435\u0442\u043e\u0434 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 HTTP-\u0437\u0430\u043f\u0440\u043e\u0441 \u043a \u0432\u043d\u0435\u0448\u043d\u0435\u043c\u0443 \u0441\u0435\u0440\u0432\u0438\u0441\u0443 \u0441 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u043c\u0438\n    \u043f\u043e\u043f\u044b\u0442\u043a\u0430\u043c\u0438 \u043f\u0440\u0438 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0441\u0431\u043e\u044f\u0445 (\u0442\u0430\u0439\u043c\u0430\u0443\u0442\u044b, 5xx \u043e\u0448\u0438\u0431\u043a\u0438). \u041f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 retry\n    \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 tenacity.\n\n    Args:\n        user_id (UUID): \u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.\n\n    Returns:\n        dict: JSON-\u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f, \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0451\u043d\u043d\u043e\u0435 \u0432\u043d\u0435\u0448\u043d\u0438\u043c \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u043c.\n\n    Raises:\n        UserNotFoundError: \u0415\u0441\u043b\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d (HTTP 404).\n        UserServiceUnavailableError: \u0415\u0441\u043b\u0438 \u0441\u0435\u0440\u0432\u0438\u0441 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d (\u0442\u0430\u0439\u043c\u0430\u0443\u0442, 5xx \u0438 \u0442.\u043f.).\n        UserServiceError: \u041f\u0440\u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u043d\u0435\u043e\u0436\u0438\u0434\u0430\u043d\u043d\u044b\u0445 \u043e\u0448\u0438\u0431\u043a\u0430\u0445 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, 400, 401).\n\n    Example:\n        &gt;&gt;&gt; service = UserService(base_url=\"https://api.example.com\")\n        &gt;&gt;&gt; try:\n        ...     user = await service.get_by_id(UUID(\"123e4567-e89b-12d3-a456-426614174000\"))\n        ...     print(user[\"name\"])\n        ... except UserNotFoundError:\n        ...     print(\"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442\")\n\n    Note:\n        \u041c\u0435\u0442\u043e\u0434 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 retry-\u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c (tenacity) \u0438 \u043d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\n        \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0445 \u0432\u044b\u0437\u043e\u0432\u043e\u0432 \u0441\u043e \u0441\u0442\u043e\u0440\u043e\u043d\u044b \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043f\u0440\u0438 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u043e\u0448\u0438\u0431\u043a\u0430\u0445.\n\n    \"\"\"\n    try:\n        async with httpx.AsyncClient(base_url=self._base_url, timeout=5.0) as client:\n            resp = await client.get(f'/api/v1/users/{user_id}')\n\n            if resp.status_code == 200:\n                return resp.json()\n            elif resp.status_code == 404:\n                raise UserNotFoundError(f'\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 ID {user_id} \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d')\n            elif resp.status_code &gt;= 500:\n                raise UserServiceUnavailableError(\n                    f'User service \u0432\u0435\u0440\u043d\u0443\u043b {resp.status_code}: {resp.text}',\n                )\n            else:\n                raise UserServiceError(\n                    f'\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0441\u0442\u0430\u0442\u0443\u0441 {resp.status_code}'\n                    f' \u0434\u043b\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f {user_id}: {resp.text}',\n                )\n\n    except httpx.TimeoutException as e:\n        logger.warning('\u0422\u0430\u0439\u043c\u0430\u0443\u0442 \u043f\u0440\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f %s: %s', user_id, e)\n        raise UserServiceUnavailableError('\u0422\u0430\u0439\u043c\u0430\u0443\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u0430') from e\n\n    except httpx.NetworkError as e:\n        logger.exception('\u0421\u0435\u0442\u0435\u0432\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f %s: %s', user_id, e)\n        raise UserServiceUnavailableError('\u0421\u0435\u0442\u0435\u0432\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430') from e\n\n    except httpx.HTTPStatusError as e:\n        logger.exception('\u041e\u0448\u0438\u0431\u043a\u0430 HTTP-\u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u043f\u0440\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f %s: %s', user_id, e)\n        raise UserServiceError('\u041e\u0448\u0438\u0431\u043a\u0430 HTTP-\u043e\u0442\u0432\u0435\u0442\u0430') from e\n</code></pre>"},{"location":"api/python/service_layer/users_service/#_5","title":"\u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438","text":""},{"location":"api/python/service_layer/users_service/#_6","title":"\u041f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0445 \u043f\u043e\u043f\u044b\u0442\u043e\u043a","text":"<p>\u0421\u0435\u0440\u0432\u0438\u0441 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0435\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043f\u0440\u0438 \u0432\u043e\u0437\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u0438 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u043e\u0448\u0438\u0431\u043e\u043a:</p> <ul> <li>\u042d\u043a\u0441\u043f\u043e\u043d\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u0430\u044f \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430 \u043c\u0435\u0436\u0434\u0443 \u043f\u043e\u043f\u044b\u0442\u043a\u0430\u043c\u0438</li> <li>\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 3 \u043f\u043e\u043f\u044b\u0442\u043a\u0438</li> <li>\u041f\u043e\u0432\u0442\u043e\u0440 \u043f\u0440\u0438 \u0442\u0430\u0439\u043c\u0430\u0443\u0442\u0430\u0445 \u0438 5xx \u043e\u0448\u0438\u0431\u043a\u0430\u0445</li> </ul>"},{"location":"api/python/service_layer/users_service/#_7","title":"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a","text":"<pre><code>graph TD\n    A[\u0417\u0430\u043f\u0440\u043e\u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f] --&gt; B{\u0423\u0441\u043f\u0435\u0445?}\n    B --&gt;|\u0414\u0430| C[\u0412\u043e\u0437\u0432\u0440\u0430\u0442 \u0434\u0430\u043d\u043d\u044b\u0445]\n    B --&gt;|\u041d\u0435\u0442| D{\u0422\u0438\u043f \u043e\u0448\u0438\u0431\u043a\u0438?}\n    D --&gt;|404| E[UserNotFoundError]\n    D --&gt;|5xx| F[UserServiceUnavailableError]\n    D --&gt;|\u0422\u0430\u0439\u043c\u0430\u0443\u0442| F\n    D --&gt;|\u0421\u0435\u0442\u0435\u0432\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430| F\n    D --&gt;|\u0414\u0440\u0443\u0433\u0430\u044f| G[UserServiceError]\n</code></pre>"},{"location":"api/python/service_layer/users_service/#_8","title":"\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":""},{"location":"api/python/service_layer/users_service/#_9","title":"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f","text":"<pre><code>from uuid import UUID\nfrom src.service_layer.users_service import UserService\n\n# \u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0441\u0435\u0440\u0432\u0438\u0441\u0430\nuser_service = UserService(\n    base_url=\"https://users-api.example.com\",\n    max_retries=3\n)\n\n# \u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\nasync def get_user_profile(user_id: UUID):\n    try:\n        user = await user_service.get_by_id(user_id)\n        return {\n            'id': user['id'],\n            'name': user['name'],\n            'email': user['email']\n        }\n    except UserNotFoundError:\n        return None\n    except UserServiceUnavailableError as e:\n        logger.error(f\"\u0421\u0435\u0440\u0432\u0438\u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d: {e}\")\n        raise\n</code></pre>"},{"location":"api/python/service_layer/users_service/#_10","title":"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u043f\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044e","text":"<ol> <li>\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f</li> <li>\u0421\u043e\u0437\u0434\u0430\u0432\u0430\u0439\u0442\u0435 \u043e\u0434\u0438\u043d \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u043d\u0430 \u0432\u0441\u0451 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435</li> <li> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 DI \u0434\u043b\u044f \u0432\u043d\u0435\u0434\u0440\u0435\u043d\u0438\u044f \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439</p> </li> <li> <p>\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a <pre><code>try:\n    user = await user_service.get_by_id(user_id)\nexcept UserNotFoundError:\n    # \u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\n    pass\nexcept UserServiceUnavailableError:\n    # \u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438\n    pass\n</code></pre></p> </li> <li> <p>\u041a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 <pre><code>from functools import lru_cache\n\nclass CachedUserService(UserService):\n    @lru_cache(maxsize=1000)\n    async def get_by_id(self, user_id: UUID) -&gt; dict:\n        return await super().get_by_id(user_id)\n</code></pre></p> </li> </ol>"},{"location":"api/python/service_layer/users_service/#_11","title":"\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c","text":"<ul> <li>\u0422\u0430\u0439\u043c\u0430\u0443\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u0430: 5 \u0441\u0435\u043a\u0443\u043d\u0434</li> <li>\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u043f\u044b\u0442\u043e\u043a: 3</li> <li>\u042d\u043a\u0441\u043f\u043e\u043d\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u0430\u044f \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430 \u043c\u0435\u0436\u0434\u0443 \u043f\u043e\u043f\u044b\u0442\u043a\u0430\u043c\u0438</li> <li>Keep-alive \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f</li> </ul>"},{"location":"api/python/service_layer/users_service/#_12","title":"\u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433","text":"<p>\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c\u044b\u0435 \u043c\u0435\u0442\u0440\u0438\u043a\u0438:</p> <ul> <li>\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432</li> <li>\u0412\u0440\u0435\u043c\u044f \u043e\u0442\u0432\u0435\u0442\u0430</li> <li>\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0448\u0438\u0431\u043e\u043a \u043f\u043e \u0442\u0438\u043f\u0430\u043c</li> <li>\u0420\u0430\u0437\u043c\u0435\u0440 \u043a\u044d\u0448\u0430 (\u0435\u0441\u043b\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f)</li> </ul>"},{"location":"api/python/service_layer/users_service/#_13","title":"\u0421\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b","text":"<ul> <li>\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a</li> <li>Unit of Work</li> <li>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f</li> </ul>"},{"location":"architecture/components/","title":"\u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 eebook-users","text":""},{"location":"architecture/components/#1","title":"1. \u041e\u0431\u0437\u043e\u0440 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u044b","text":"<p>\u041f\u0440\u043e\u0435\u043a\u0442 \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d \u043f\u043e \u043f\u0440\u0438\u043d\u0446\u0438\u043f\u0430\u043c \u0447\u0438\u0441\u0442\u043e\u0439 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u044b \u0441 \u0447\u0451\u0442\u043a\u0438\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435\u043c \u043d\u0430 \u0441\u043b\u043e\u0438:</p> <pre><code>src/\n\u251c\u2500\u2500 adapters/               # \u0410\u0434\u0430\u043f\u0442\u0435\u0440\u044b \u0434\u043b\u044f \u0432\u043d\u0435\u0448\u043d\u0438\u0445 \u0441\u0438\u0441\u0442\u0435\u043c \u0438 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\n\u2502   \u251c\u2500\u2500 interfaces.py       # \u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u044b \u0434\u043b\u044f \u0432\u043d\u0435\u0448\u043d\u0438\u0445 \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u0432\n\u2502   \u251c\u2500\u2500 password_hasher.py  # \u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0445\u0435\u0448\u0435\u0440\u0430 \u043f\u0430\u0440\u043e\u043b\u0435\u0439\n\u2502   \u251c\u2500\u2500 repository.py       # \u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0435\u0432\n\u2502   \u251c\u2500\u2500 orm.py              # ORM-\u043c\u043e\u0434\u0435\u043b\u0438 SQLAlchemy\n\u2502   \u251c\u2500\u2500 factory.py          # \u0424\u0430\u0431\u0440\u0438\u043a\u0438 \u0430\u0434\u0430\u043f\u0442\u0435\u0440\u043e\u0432\n\u2502   \u2514\u2500\u2500 vault.py            # \u041f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440 \u0441\u0435\u043a\u0440\u0435\u0442\u043e\u0432 (Vault)\n\u2502\n\u251c\u2500\u2500 config/                 # \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438\n\u2502   \u251c\u2500\u2500 settings.py         # Pydantic-\u043c\u043e\u0434\u0435\u043b\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438\n\u2502   \u251c\u2500\u2500 loader.py           # \u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0438 \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a\n\u2502   \u2514\u2500\u2500 exceptions.py       # \u041e\u0448\u0438\u0431\u043a\u0438 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438\n\u2502\n\u251c\u2500\u2500 domain/                 # \u0414\u043e\u043c\u0435\u043d\u043d\u044b\u0439 \u0441\u043b\u043e\u0439 (\u0447\u0438\u0441\u0442\u0430\u044f \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0430)\n\u2502   \u251c\u2500\u2500 model.py            # \u0414\u043e\u043c\u0435\u043d\u043d\u044b\u0435 \u043c\u043e\u0434\u0435\u043b\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\n\u2502   \u2514\u2500\u2500 exceptions.py       # \u0418\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u043c\u0435\u043d\u043d\u043e\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f\n\u2502\n\u251c\u2500\u2500 entity/                 # \u0412\u0441\u043f\u043e\u043c\u043e\u0433\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043c\u043e\u0434\u0435\u043b\u0438 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0434\u043b\u044f ORM/DTO)\n\u2502   \u2514\u2500\u2500 models.py\n\u2502\n\u251c\u2500\u2500 entrypoints/            # \u0422\u043e\u0447\u043a\u0438 \u0432\u0445\u043e\u0434\u0430 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f\n\u2502   \u251c\u2500\u2500 api/                # HTTP API-\u044d\u043d\u0434\u043f\u043e\u0438\u043d\u0442\u044b\n\u2502   \u2502   \u2514\u2500\u2500 endpoints.py\n\u2502   \u2514\u2500\u2500 fastapi_app.py      # \u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f FastAPI\n\u2502\n\u251c\u2500\u2500 infrastructure/         # \u0418\u043d\u0444\u0440\u0430\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u043d\u044b\u0439 \u0441\u043b\u043e\u0439\n\u2502   \u251c\u2500\u2500 database/           # \u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0431\u0430\u0437\u043e\u0439 \u0434\u0430\u043d\u043d\u044b\u0445\n\u2502   \u2502   \u251c\u2500\u2500 engine.py       # \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0434\u0432\u0438\u0436\u043a\u0430 SQLAlchemy\n\u2502   \u2502   \u251c\u2500\u2500 exceptions.py   # \u041e\u0448\u0438\u0431\u043a\u0438 \u0438\u043d\u0444\u0440\u0430\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b \u0411\u0414\n\u2502   \u2502   \u2514\u2500\u2500 migrations/     # Alembic-\u043c\u0438\u0433\u0440\u0430\u0446\u0438\u0438\n\u2502   \u251c\u2500\u2500 lifespan.py         # \u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442 \u0436\u0438\u0437\u043d\u0435\u043d\u043d\u043e\u0433\u043e \u0446\u0438\u043a\u043b\u0430 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f\n\u2502   \u2514\u2500\u2500 logging/            # \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f\n\u2502\n\u251c\u2500\u2500 service_layer/          # \u0421\u0435\u0440\u0432\u0438\u0441\u043d\u044b\u0439 \u0441\u043b\u043e\u0439 (application layer)\n\u2502   \u251c\u2500\u2500 users_service.py    # \u0421\u0435\u0440\u0432\u0438\u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439\n\u2502   \u251c\u2500\u2500 uow.py              # Unit of Work\n\u2502   \u251c\u2500\u2500 dependencies.py     # FastAPI \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438\n\u2502   \u2514\u2500\u2500 exceptions.py       # \u041e\u0448\u0438\u0431\u043a\u0438 \u0441\u0435\u0440\u0432\u0438\u0441\u043d\u043e\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f\n\u2502\n\u251c\u2500\u2500 bootstrap.py            # \u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f\n\u251c\u2500\u2500 exceptions.py           # \u041e\u0431\u0449\u0438\u0435 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f\n\u2514\u2500\u2500 main.py                 # \u0422\u043e\u0447\u043a\u0430 \u0432\u0445\u043e\u0434\u0430 (run)\n</code></pre>"},{"location":"architecture/components/#2","title":"2. \u0412\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0441\u043b\u043e\u0451\u0432","text":"<pre><code>entrypoints\n    \u2193\nservice_layer  \u2192  domain\n    \u2193              \u2191\ninfrastructure \u2192 adapters\n    \u2193\n  config\n</code></pre>"},{"location":"architecture/components/#21","title":"2.1. \u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0441\u043b\u043e\u0451\u0432","text":"<ul> <li>entrypoints - \u0422\u043e\u0447\u043a\u0438 \u0432\u0445\u043e\u0434\u0430 \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 (HTTP API, CLI, \u0437\u0430\u0434\u0430\u0447\u0438 \u043f\u043e \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044e)</li> <li>service_layer - \u041f\u0440\u0438\u043a\u043b\u0430\u0434\u043d\u0430\u044f \u043b\u043e\u0433\u0438\u043a\u0430, \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0446\u0438\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439, \u0431\u0438\u0437\u043d\u0435\u0441-\u043f\u0440\u0430\u0432\u0438\u043b\u0430</li> <li>domain - \u0427\u0438\u0441\u0442\u0430\u044f \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0430, \u0434\u043e\u043c\u0435\u043d\u043d\u044b\u0435 \u043c\u043e\u0434\u0435\u043b\u0438 \u0438 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f</li> <li>adapters - \u0410\u0434\u0430\u043f\u0442\u0435\u0440\u044b \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0432\u043d\u0435\u0448\u043d\u0438\u043c\u0438 \u0441\u0438\u0441\u0442\u0435\u043c\u0430\u043c\u0438 \u0438 \u0411\u0414</li> <li>infrastructure - \u041d\u0438\u0437\u043a\u043e\u0443\u0440\u043e\u0432\u043d\u0435\u0432\u044b\u0435 \u0434\u0435\u0442\u0430\u043b\u0438 (\u0411\u0414, \u043a\u0435\u0448, \u0431\u0440\u043e\u043a\u0435\u0440\u044b \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439)</li> <li>config - \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f</li> </ul>"},{"location":"architecture/components/#3","title":"3. \u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f","text":""},{"location":"architecture/components/#31","title":"3.1. \u0417\u0430\u043f\u0443\u0441\u043a \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f","text":"<ol> <li>\u0417\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f <code>lifespan</code> (\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u044b\u0439 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 FastAPI)</li> <li>\u0412\u044b\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f <code>bootstrap()</code></li> <li>\u041f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432: </li> </ol> Source code in <code>src/bootstrap.py</code> <pre><code>async def bootstrap() -&gt; Settings:\n    try:\n        configure_logging()\n        await SettingsLoader().load()\n        settings = Settings()  # type: ignore\n        _ = get_engine()\n        logger.info('Bootstrap \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043b \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b')\n        return settings\n\n    except Exception as e:\n        logger.exception('Bootstrap failed')\n        raise BootstrapInitializationError(f'Failed to bootstrap application: {str(e)}') from e\n</code></pre>"},{"location":"architecture/components/#32","title":"3.2. \u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430","text":"<ol> <li>\u0417\u0430\u043f\u0440\u043e\u0441 \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442 \u0432 FastAPI \u044d\u043d\u0434\u043f\u043e\u0438\u043d\u0442</li> <li>\u0427\u0435\u0440\u0435\u0437 DI \u0432\u043d\u0435\u0434\u0440\u044f\u044e\u0442\u0441\u044f \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u0438\u0437 <code>service_layer.dependencies</code></li> <li>\u0421\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f \u0441\u0435\u0441\u0441\u0438\u044f \u0411\u0414 \u0447\u0435\u0440\u0435\u0437 <code>get_db()</code></li> <li>\u0412\u044b\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 \u0441\u0435\u0440\u0432\u0438\u0441/\u044e\u0437\u043a\u0435\u0439\u0441</li> <li>\u041f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u0440\u0430\u0431\u043e\u0442\u0430 \u0441 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f\u043c\u0438 \u0432 \u0440\u0430\u043c\u043a\u0430\u0445 UoW</li> <li>\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442\u0441\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0443</li> </ol>"},{"location":"architecture/components/#4","title":"4. \u041a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b","text":""},{"location":"architecture/components/#41","title":"4.1. \u041a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b","text":""},{"location":"architecture/components/#411-bootstrappy","title":"4.1.1. bootstrap.py","text":"<p>\u0426\u0435\u043d\u0442\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0442\u043e\u0447\u043a\u0430 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f:</p> <ul> <li>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043b\u043e\u0433\u0433\u0435\u0440\u0430</li> <li>\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0438\u0437 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f</li> <li>\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0411\u0414 \u0438 \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u0439</li> <li>\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439</li> <li>\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f FastAPI \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f</li> </ul>"},{"location":"architecture/components/#412-unit-of-work-uow","title":"4.1.2. Unit of Work (UoW)","text":"<p>\u041f\u0430\u0442\u0442\u0435\u0440\u043d \"\u0415\u0434\u0438\u043d\u0438\u0446\u0430 \u0440\u0430\u0431\u043e\u0442\u044b\" \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f\u043c\u0438:</p> <ul> <li>\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f UoW</li> <li>\u041e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0430\u0442\u043e\u043c\u0430\u0440\u043d\u043e\u0441\u0442\u044c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439</li> <li>\u0423\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0436\u0438\u0437\u043d\u0435\u043d\u043d\u044b\u043c \u0446\u0438\u043a\u043b\u043e\u043c \u0441\u0435\u0441\u0441\u0438\u0439 \u0411\u0414</li> </ul>"},{"location":"architecture/components/#413","title":"4.1.3. \u0421\u0435\u0440\u0432\u0438\u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439","text":"<p>\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0441\u0435\u0440\u0432\u0438\u0441 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438:</p> <ul> <li>\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f UserService</li> <li>\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0436\u0438\u0437\u043d\u0435\u043d\u043d\u044b\u043c \u0446\u0438\u043a\u043b\u043e\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439</li> <li>\u0410\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f</li> <li>\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0444\u0438\u043b\u044f\u043c\u0438</li> </ul>"},{"location":"architecture/components/#414","title":"4.1.4. \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f","text":"<p>\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f:</p> <ul> <li>\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0438\u0437 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f</li> <li>\u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u0447\u0435\u0440\u0435\u0437 Pydantic</li> <li>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u0440\u0430\u0437\u043d\u044b\u0445 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0439 (dev, test, prod)</li> </ul> <p>\u042d\u0442\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u0434\u0430\u0451\u0442 \u043f\u043e\u043b\u043d\u043e\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043e\u0431 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0438 \u043f\u0440\u0438\u043d\u0446\u0438\u043f\u0430\u0445 \u0435\u0433\u043e \u0440\u0430\u0431\u043e\u0442\u044b. \u0414\u043b\u044f \u0431\u043e\u043b\u0435\u0435 \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0438\u0437\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0445 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432 \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0430\u043c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438.</p>"},{"location":"faq/","title":"\u0420\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 eebook","text":"<p>\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 developer guide \u043f\u0440\u043e\u0435\u043a\u0442\u0430 eebook \u2014 \u00ab\u0418\u043d\u0432\u0435\u0441\u0442\u0438\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u041f\u043e\u043c\u043e\u0433\u0430\u0442\u043e\u0440\u00bb. \u0417\u0434\u0435\u0441\u044c \u043e\u043f\u0438\u0441\u0430\u043d\u044b \u0432\u0441\u0435 \u043f\u0440\u0438\u043d\u0446\u0438\u043f\u044b \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438, \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430, \u043a\u043e\u0434\u0438\u043d\u0433-\u0441\u0442\u0430\u0439\u043b, \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435, git \u0438 workflow.</p> <p>\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u043f\u0440\u0435\u0434\u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0430 \u0434\u043b\u044f:</p> <ul> <li>\u041d\u043e\u0432\u044b\u0445 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432 \u043f\u0440\u043e\u0435\u043a\u0442\u0430</li> <li>\u041a\u043e\u043d\u0442\u0440\u0438\u0431\u044c\u044e\u0442\u043e\u0440\u043e\u0432 open-source</li> <li>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 \u0435\u0434\u0438\u043d\u043e\u043e\u0431\u0440\u0430\u0437\u0438\u044f \u043a\u043e\u0434\u0430 \u0438 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u044b</li> </ul>"},{"location":"faq/#_1","title":"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435","text":"<ul> <li>\u041a\u043e\u0434\u0438\u043d\u0433 \u0438 \u0441\u0442\u0438\u043b\u044c</li> <li>Git, \u043a\u043e\u043c\u043c\u0438\u0442\u044b \u0438 PR</li> <li>\u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435</li> <li>Contributing</li> </ul>"},{"location":"faq/coding_guidelines/","title":"\u041a\u043e\u0434\u0438\u043d\u0433 \u0438 \u0441\u0442\u0438\u043b\u044c","text":""},{"location":"faq/coding_guidelines/#python","title":"Python","text":"<ul> <li>PEP8 + \u0442\u0438\u043f\u0438\u0437\u0430\u0446\u0438\u044f (<code>typing</code>)</li> <li>\u0414\u043e\u043a\u0441\u0442\u0440\u0438\u043d\u0433\u0438 Google / NumPy style</li> <li>4 \u043f\u0440\u043e\u0431\u0435\u043b\u0430 \u0434\u043b\u044f \u043e\u0442\u0441\u0442\u0443\u043f\u043e\u0432</li> <li>snake_case \u0434\u043b\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u0439 \u0438 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445, CamelCase \u0434\u043b\u044f \u043a\u043b\u0430\u0441\u0441\u043e\u0432</li> </ul>"},{"location":"faq/coding_guidelines/#clean-code","title":"Clean Code","text":"<ul> <li>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 (~5\u201315 \u0441\u0442\u0440\u043e\u043a)</li> <li>\u041a\u0430\u0436\u0434\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0434\u0435\u043b\u0430\u0435\u0442 \u043e\u0434\u043d\u0443 \u0432\u0435\u0449\u044c</li> <li>\u0427\u0451\u0442\u043a\u0438\u0435 \u0438\u043c\u0435\u043d\u0430 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0439</li> <li>\u0418\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0432\u043c\u0435\u0441\u0442\u043e <code>None</code> \u0434\u043b\u044f \u043e\u0448\u0438\u0431\u043e\u043a</li> </ul>"},{"location":"faq/coding_guidelines/#_2","title":"\u0414\u043e\u043a\u0441\u0442\u0440\u0438\u043d\u0433\u0438","text":"<ul> <li>\u0414\u043b\u044f \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0445 \u043a\u043b\u0430\u0441\u0441\u043e\u0432 \u0438 \u043c\u0435\u0442\u043e\u0434\u043e\u0432</li> <li>\u0423\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c: Args, Returns, Raises, Examples (\u043b\u0438\u0431\u043e \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c - \u041f\u0440\u0438\u043c\u0435\u0440\u044b), \u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u044f</li> <li>GoogleStyle</li> <li>\u041f\u0440\u0438\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u0441\u044f \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \"\u0445\u043e\u0440\u043e\u0448\u0438\u0439 \u043a\u043e\u0434 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043f\u043e\u043d\u044f\u0442\u0435\u043d \u0431\u0435\u0437 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438\". \u041d\u0435 \u043d\u0443\u0436\u043d\u043e \u043f\u0438\u0441\u0430\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e \u043d\u0430 \u0432\u0441\u0435 \u043f\u043e\u0434\u0440\u044f\u0434 - \u043f\u043e\u0441\u0442\u0430\u0440\u0430\u0439\u0442\u0435\u0441\u044c \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043a\u043e\u0434 \u0442\u0430\u043a, \u0447\u0442\u043e\u0431\u044b \u043e\u043d \u0431\u044b\u043b \u043f\u043e\u043d\u044f\u0442\u0435\u043d \u0438 \u0431\u0435\u0437 \u043d\u0438\u0445, \u043d\u043e \u0438 \u043f\u0440\u0438 \u044d\u0442\u043e\u043c \u043d\u0430 \u0447\u0442\u043e-\u0442\u043e \u043d\u0438\u0437\u043a\u043e\u0443\u0440\u043e\u0432\u043d\u0435\u0432\u043e\u0435, \u043f\u043e\u043d\u044f\u0442\u043d\u043e\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u043b\u0438\u0448\u044c \u0443\u0437\u043a\u043e\u043c\u0443 \u043a\u0440\u0443\u0433\u0443 \u043b\u044e\u0434\u0435\u0439 - \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e \u043f\u0438\u0441\u0430\u0442\u044c \u043d\u0443\u0436\u043d\u043e</li> </ul>"},{"location":"faq/contributing/","title":"\u041a\u043e\u043d\u0442\u0440\u0438\u0431\u044c\u044e\u0442\u0438\u043d\u0433 \u0432 \u043f\u0440\u043e\u0435\u043a\u0442 eebook","text":"<p>\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 \u0433\u0430\u0439\u0434 \u0434\u043b\u044f \u043a\u043e\u043d\u0442\u0440\u0438\u0431\u044c\u044e\u0442\u043e\u0440\u043e\u0432! \u0417\u0434\u0435\u0441\u044c \u043e\u043f\u0438\u0441\u0430\u043d\u043e, \u043a\u0430\u043a \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0443\u0447\u0430\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u043a\u043e\u0434 \u0431\u044b\u043b \u0447\u0438\u0441\u0442\u044b\u043c, \u0442\u0435\u0441\u0442\u0438\u0440\u0443\u0435\u043c\u044b\u043c \u0438 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043e\u0432\u0430\u043b \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u0430\u043c.</p>"},{"location":"faq/contributing/#1","title":"1. \u041e\u0431\u0449\u0438\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u0430","text":"<ul> <li>\u0412\u0441\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0445\u043e\u0434\u044f\u0442 \u0447\u0435\u0440\u0435\u0437 Pull Request.</li> <li>\u041f\u0435\u0440\u0435\u0434 PR \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u0443\u044e \u0432\u0435\u0442\u043a\u0443 \u0441 main: <pre><code>git checkout feature/your-feature\ngit fetch origin\ngit rebase origin/main\n</code></pre> PR \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043c\u0430\u043b\u0435\u043d\u044c\u043a\u0438\u043c \u0438 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438 \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d\u043d\u044b\u043c. \u0412\u0441\u0435 \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0435 \u043c\u0435\u0442\u043e\u0434\u044b \u0438 \u043a\u043b\u0430\u0441\u0441\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0438\u043c\u0435\u0442\u044c \u0434\u043e\u043a\u0441\u0442\u0440\u0438\u043d\u0433\u0438. \u0421\u043e\u0431\u043b\u044e\u0434\u0430\u0435\u043c PEP8 / PSR-12 \u0438 \u0442\u0438\u043f\u0438\u0437\u0430\u0446\u0438\u044e. \u041f\u0435\u0440\u0435\u0434 PR \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u043c \u0442\u0435\u0441\u0442\u044b \u0438 \u043b\u0438\u043d\u0442\u0438\u043d\u0433: <pre><code>pre-commit run --all-files\npytest --cov=src\n</code></pre></li> </ul>"},{"location":"faq/contributing/#2","title":"2. \u0412\u0435\u0442\u043a\u0430 \u0438 \u043a\u043e\u043c\u043c\u0438\u0442\u044b","text":"<ul> <li> <p>\u041a\u0430\u0436\u0434\u0430\u044f \u043d\u043e\u0432\u0430\u044f \u0444\u0438\u0447\u0430/\u0438\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432 \u0441\u0432\u043e\u0435\u0439 \u0432\u0435\u0442\u043a\u0435: <pre><code>feature/&lt;\u043a\u043e\u0440\u043e\u0442\u043a\u043e\u0435-\u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435&gt;\nbugfix/&lt;\u043a\u043e\u0440\u043e\u0442\u043a\u043e\u0435-\u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435&gt;\n</code></pre></p> </li> <li> <p>\u041a\u043e\u043c\u043c\u0438\u0442\u044b \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 Conventional Commits: <pre><code>feat(auth): add JWT authentication\nfix(portfolio): correct income calculation\ndocs: update API docs\nrefactor(service_layer): simplify calculation logic\n</code></pre> \u041a\u043e\u043c\u043c\u0438\u0442\u044b \u0430\u0442\u043e\u043c\u0430\u0440\u043d\u044b\u0435: \u043e\u0434\u043d\u0430 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0437\u0430\u0434\u0430\u0447\u0430 = \u043e\u0434\u0438\u043d \u043a\u043e\u043c\u043c\u0438\u0442.</p> </li> </ul>"},{"location":"faq/contributing/#3-pull-request","title":"3. Pull Request","text":"<ul> <li>\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 PR \u2014 \u043a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0444\u0438\u0447\u0438 \u0438\u043b\u0438 \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f.</li> <li>\u0412 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0438 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c:</li> <li> <ul> <li>\u0427\u0442\u043e \u0441\u0434\u0435\u043b\u0430\u043d\u043e</li> </ul> </li> <li> <ul> <li>\u0421\u0441\u044b\u043b\u043a\u0438 \u043d\u0430 \u0437\u0430\u0434\u0430\u0447\u0438/\u0442\u0438\u043a\u0435\u0442\u044b</li> </ul> </li> <li> <ul> <li>\u0427\u0442\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u0435\u043d\u043e \u0432\u0440\u0443\u0447\u043d\u0443\u044e/\u0442\u0435\u0441\u0442\u0430\u043c\u0438</li> </ul> </li> <li>PR \u0434\u043e\u043b\u0436\u0435\u043d \u043f\u0440\u043e\u0439\u0442\u0438 Code Review \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430.</li> <li>\u041f\u043e\u0441\u043b\u0435 approval \u2014 merge \u0447\u0435\u0440\u0435\u0437 Squash and Merge \u0438\u043b\u0438 Rebase (\u043f\u043e \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0451\u043d\u043d\u043e\u0441\u0442\u0438 \u043a\u043e\u043c\u0430\u043d\u0434\u044b).</li> </ul>"},{"location":"faq/contributing/#4","title":"4. \u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439","text":"<ul> <li>\u041b\u044e\u0431\u0430\u044f \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043f\u043e\u043a\u0440\u044b\u0442\u0430 unit-\u0442\u0435\u0441\u0442\u0430\u043c\u0438.</li> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c pytest, \u0444\u0438\u043a\u0441\u0442\u0443\u0440\u044b \u0434\u043b\u044f \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445.</li> <li>\u0414\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0432\u043d\u0435\u0448\u043d\u0438\u043c\u0438 \u0441\u0435\u0440\u0432\u0438\u0441\u0430\u043c\u0438 (DB, Vault) \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c mocking / fixtures.</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u0435: \u043c\u0438\u043d\u0438\u043c\u0443\u043c 60% \u0434\u043b\u044f \u043c\u0435\u0440\u0436\u0435\u0439 \u0432 main.</li> </ul>"},{"location":"faq/contributing/#5","title":"5. \u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439","text":"<ul> <li>\u0415\u0441\u043b\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430 \u043d\u043e\u0432\u0430\u044f \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0438\u043b\u0438 \u043a\u043b\u0430\u0441\u0441 \u2014 \u043f\u0438\u0448\u0435\u043c \u0434\u043e\u043a\u0441\u0442\u0440\u0438\u043d\u0433\u0438.</li> <li>\u0415\u0441\u043b\u0438 API \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u044c \u2014 \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u043c API-\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e (MkDocs + mkdocstrings).</li> <li>README \u0438\u043b\u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u0433\u0430\u0439\u0434\u044b \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0435\u043c \u043f\u0440\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438.</li> </ul>"},{"location":"faq/contributing/#6","title":"6. \u0421\u0442\u0438\u043b\u044c \u0438 \u043b\u0443\u0447\u0448\u0438\u0435 \u043f\u0440\u0430\u043a\u0442\u0438\u043a\u0438","text":"<ul> <li>Clean Architecture / DDD: \u0441\u043e\u0431\u043b\u044e\u0434\u0430\u0435\u043c \u0441\u043b\u043e\u0438, \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u0432\u043d\u0443\u0442\u0440\u044c.</li> <li>KISS \u0438 DRY: \u043f\u0440\u043e\u0441\u0442\u043e\u0442\u0430 \u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u0434\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f.</li> <li>\u041c\u0438\u043d\u0438\u043c\u0438\u0437\u0438\u0440\u0443\u0435\u043c \u043f\u043e\u0431\u043e\u0447\u043d\u044b\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u044b: \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0438 \u043c\u0435\u0442\u043e\u0434\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0434\u0435\u0442\u0435\u0440\u043c\u0438\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u043c\u0438.</li> <li>\u041b\u043e\u0433\u0438\u043a\u0430 \u0431\u0438\u0437\u043d\u0435\u0441-\u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0435\u0439 \u0442\u043e\u043b\u044c\u043a\u043e \u0432 domain / service_layer.</li> <li>\u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0432\u043d\u0435\u0448\u043d\u0438\u043c\u0438 \u0441\u0438\u0441\u0442\u0435\u043c\u0430\u043c\u0438 \u0447\u0435\u0440\u0435\u0437 \u0430\u0434\u0430\u043f\u0442\u0435\u0440\u044b (adapters) \u0438 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b.</li> </ul>"},{"location":"faq/contributing/#7","title":"7. \u041e\u0431\u0449\u0435\u043d\u0438\u0435 \u0438 \u043f\u043e\u043c\u043e\u0449\u044c","text":"<ul> <li>\u0412\u043e\u043f\u0440\u043e\u0441\u044b \u043f\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0443 \u2014 \u0447\u0435\u0440\u0435\u0437 \u0442\u0438\u043a\u0435\u0442\u044b \u0438\u043b\u0438 internal \u0447\u0430\u0442.</li> <li>\u041d\u0435 \u0441\u0442\u0435\u0441\u043d\u044f\u0435\u043c\u0441\u044f \u0434\u0435\u043b\u0430\u0442\u044c \u043c\u0430\u043b\u0435\u043d\u044c\u043a\u0438\u0435 PR \u0438 \u0441\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0442\u044c \u0441\u043e\u0432\u0435\u0442\u044b.</li> <li>\u0412\u0441\u0435 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438 \u0441\u043b\u0435\u0434\u044f\u0442 \u0437\u0430 \u0435\u0434\u0438\u043d\u043e\u043e\u0431\u0440\u0430\u0437\u0438\u0435\u043c \u043a\u043e\u0434\u0430 \u0438 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u044b.</li> </ul> <p>\u0421\u043e\u0432\u0435\u0442: \u043f\u0435\u0440\u0435\u0434 \u043b\u044e\u0431\u044b\u043c PR \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435, \u0447\u0442\u043e \u043b\u0438\u043d\u0442\u0435\u0440 \u043d\u0435 \u0440\u0443\u0433\u0430\u0435\u0442\u0441\u044f, \u0442\u0435\u0441\u0442\u044b \u043f\u0440\u043e\u0445\u043e\u0434\u044f\u0442, \u0438 \u0432\u0441\u0435 \u0441\u043b\u043e\u0438 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u044b \u0441\u043e\u0431\u043b\u044e\u0434\u0435\u043d\u044b.</p>"},{"location":"faq/git_commits/","title":"Git, \u043a\u043e\u043c\u043c\u0438\u0442\u044b \u0438 Pull Request","text":""},{"location":"faq/git_commits/#_1","title":"\u041a\u043e\u043c\u043c\u0438\u0442\u044b","text":"<ul> <li>\u0424\u043e\u0440\u043c\u0430\u0442: Conventional Commits <pre><code>feat(portfolio): add portfolio analytics\nfix(api): correct asset calculation\ndocs: update API docs\n</code></pre></li> <li>\u041a\u0430\u0436\u0434\u044b\u0439 \u043a\u043e\u043c\u043c\u0438\u0442 \u2014 \u0430\u0442\u043e\u043c\u0430\u0440\u043d\u043e\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435</li> </ul>"},{"location":"faq/git_commits/#pull-request","title":"Pull Request","text":"<ul> <li>PR \u043c\u0430\u043b\u0435\u043d\u044c\u043a\u0438\u0439, \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438 \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d\u043d\u044b\u0439</li> <li>\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0438 \u0441\u0441\u044b\u043b\u043a\u0438 \u043d\u0430 \u0437\u0430\u0434\u0430\u0447\u0438/\u0442\u0438\u043a\u0435\u0442\u044b</li> <li>Code review \u043f\u0435\u0440\u0435\u0434 merge</li> </ul>"},{"location":"faq/testing/","title":"\u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","text":"<ul> <li>Unit-\u0442\u0435\u0441\u0442\u044b: <code>pytest</code></li> <li>API-\u0442\u0435\u0441\u0442\u044b \u0447\u0435\u0440\u0435\u0437 <code>TestClient</code> FastAPI</li> <li>CI \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u0435 &gt;=60%</li> <li>Fixtures \u0434\u043b\u044f \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>Mocking \u0432\u043d\u0435\u0448\u043d\u0438\u0445 \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u0432</li> </ul>"},{"location":"troubleshooting/start/","title":"\u0420\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e \u043f\u043e \u0443\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u0438\u044e \u043d\u0435\u043f\u043e\u043b\u0430\u0434\u043e\u043a \u043f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430","text":"<p>\u0412 \u044d\u0442\u043e\u043c \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u0435 \u0441\u043e\u0431\u0440\u0430\u043d\u044b \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u0440\u0430\u0441\u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b, \u0441 \u043a\u043e\u0442\u043e\u0440\u044b\u043c\u0438 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u0442\u043e\u043b\u043a\u043d\u0443\u0442\u044c\u0441\u044f \u043f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430, \u0438 \u0441\u043f\u043e\u0441\u043e\u0431\u044b \u0438\u0445 \u0440\u0435\u0448\u0435\u043d\u0438\u044f.</p>"},{"location":"troubleshooting/start/#_2","title":"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435","text":"<ul> <li>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0441 \u0431\u0430\u0437\u043e\u0439 \u0434\u0430\u043d\u043d\u044b\u0445</li> </ul>"},{"location":"troubleshooting/start/#_3","title":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0441 \u0431\u0430\u0437\u043e\u0439 \u0434\u0430\u043d\u043d\u044b\u0445","text":""},{"location":"troubleshooting/start/#1-postgresql-docker","title":"1. \u041e\u0448\u0438\u0431\u043a\u0430 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 PostgreSQL \u0432 Docker","text":"<p>\u0421\u0438\u043c\u043f\u0442\u043e\u043c\u044b: <pre><code>postgres-1 | Error: Database is uninitialized and superuser password is not specified.\n</code></pre></p> <p>\u041f\u0440\u0438\u0447\u0438\u043d\u0430: \u041f\u0440\u0438 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0432 Docker-\u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f \u0438\u0437 Vault \u0435\u0449\u0451 \u043d\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u044b, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 Docker \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 PostgreSQL.</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435: 1. \u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0432 <code>docker-compose.yml</code> \u0434\u043b\u044f \u0441\u0435\u0440\u0432\u0438\u0441\u0430 PostgreSQL \u044f\u0432\u043d\u043e\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f:    <pre><code>services:\n  postgres:\n    image: postgres:13\n    environment:\n      POSTGRES_USER: your_username\n      POSTGRES_PASSWORD: your_secure_password\n      POSTGRES_DB: your_database_name\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n\nvolumes:\n  postgres_data:\n</code></pre></p> <ol> <li>\u041f\u0435\u0440\u0435\u0441\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0438 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u044b:    <pre><code>docker-compose down -v\nmake up\n</code></pre></li> </ol>"},{"location":"troubleshooting/start/#_4","title":"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u043f\u043e\u043c\u043e\u0449\u0438","text":"<p>\u0415\u0441\u043b\u0438 \u0432\u044b \u043d\u0435 \u043d\u0430\u0448\u043b\u0438 \u0440\u0435\u0448\u0435\u043d\u0438\u0435 \u0441\u0432\u043e\u0435\u0439 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0432 \u044d\u0442\u043e\u043c \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u0435, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435:</p> <ol> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c Issues \u043d\u0430 GitHub</li> <li>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 Issue \u0441 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435\u043c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b</li> <li>\u0423\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0435\u0440\u0441\u0438\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0433\u043e \u041f\u041e</li> <li>\u041f\u0440\u0438\u043b\u043e\u0436\u0438\u0442\u044c \u043b\u043e\u0433\u0438 \u043e\u0448\u0438\u0431\u043e\u043a</li> <li>\u041e\u043f\u0438\u0441\u0430\u0442\u044c \u0448\u0430\u0433\u0438 \u0434\u043b\u044f \u0432\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b</li> </ol>"}]}